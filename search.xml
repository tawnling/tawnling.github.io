<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Some useful scripts</title>
      <link href="/2019/11/28/some-useful-scripts/"/>
      <url>/2019/11/28/some-useful-scripts/</url>
      
        <content type="html"><![CDATA[<h2 id="利用json进行MongoDB文件转移"><a href="#利用json进行MongoDB文件转移" class="headerlink" title="利用json进行MongoDB文件转移"></a>利用json进行MongoDB文件转移</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> pymongo<span class="token keyword">import</span> json<span class="token keyword">class</span> <span class="token class-name">Transform</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>MONGO_URI <span class="token operator">=</span> <span class="token string">'mongodb://127.0.0.1:27017'</span>        self<span class="token punctuation">.</span>client <span class="token operator">=</span> pymongo<span class="token punctuation">.</span>MongoClient<span class="token punctuation">(</span>self<span class="token punctuation">.</span>MONGO_URI<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>database <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">[</span><span class="token string">'test'</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span>collection <span class="token operator">=</span> self<span class="token punctuation">.</span>database<span class="token punctuation">[</span><span class="token string">'your_collection_name'</span><span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">write</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> st<span class="token punctuation">,</span> num<span class="token punctuation">,</span> file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>        cur <span class="token operator">=</span> self<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>skip<span class="token punctuation">(</span>st<span class="token punctuation">)</span><span class="token punctuation">.</span>limit<span class="token punctuation">(</span>num<span class="token punctuation">)</span>        <span class="token keyword">with</span> open<span class="token punctuation">(</span>file_path<span class="token punctuation">.</span>format<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>            <span class="token keyword">for</span> item <span class="token keyword">in</span> cur<span class="token punctuation">:</span>                <span class="token keyword">del</span> item<span class="token punctuation">[</span><span class="token string">'_id'</span><span class="token punctuation">]</span>                json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>item<span class="token punctuation">,</span> f<span class="token punctuation">,</span> ensure_ascii<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>                f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"{}条数据加载入{}文件完成..."</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>num<span class="token punctuation">,</span> file_path<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">read</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">with</span> open<span class="token punctuation">(</span>file_path<span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> load_f<span class="token punctuation">:</span>            <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>                line <span class="token operator">=</span> load_f<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> line<span class="token punctuation">:</span>                    r <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>line<span class="token punctuation">)</span>                    <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    <span class="token keyword">break</span>    <span class="token keyword">def</span> <span class="token function">count</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>collection<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    transform <span class="token operator">=</span> Transform<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#     transform.count()</span><span class="token comment" spellcheck="true">#     transform.read("json/record_1.json")</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        transform<span class="token punctuation">.</span>write<span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token string">"json/record_%03d.json"</span> <span class="token operator">%</span> i<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="python-多进程的简单使用"><a href="#python-多进程的简单使用" class="headerlink" title="python 多进程的简单使用"></a>python 多进程的简单使用</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> pymongo<span class="token keyword">import</span> json   <span class="token keyword">import</span> multiprocessing<span class="token keyword">import</span> sys<span class="token keyword">def</span> <span class="token function">worker</span><span class="token punctuation">(</span>st<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 注意父子进程不能共用同一MongoDB connection</span>    MONGO_URI <span class="token operator">=</span> <span class="token string">'mongodb://127.0.0.1:27017'</span>    client <span class="token operator">=</span> pymongo<span class="token punctuation">.</span>MongoClient<span class="token punctuation">(</span>MONGO_URI<span class="token punctuation">)</span>    database <span class="token operator">=</span> client<span class="token punctuation">[</span><span class="token string">'test'</span><span class="token punctuation">]</span>    col1 <span class="token operator">=</span> database<span class="token punctuation">[</span><span class="token string">'your_collection_name1'</span><span class="token punctuation">]</span>    col2 <span class="token operator">=</span> database<span class="token punctuation">[</span><span class="token string">'your_collection_name2'</span><span class="token punctuation">]</span>    cur <span class="token operator">=</span> col1<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>skip<span class="token punctuation">(</span>st<span class="token punctuation">)</span><span class="token punctuation">.</span>limit<span class="token punctuation">(</span>num<span class="token punctuation">)</span>    <span class="token keyword">for</span> item <span class="token keyword">in</span> cur<span class="token punctuation">:</span>        <span class="token keyword">del</span> item<span class="token punctuation">[</span><span class="token string">'_id'</span><span class="token punctuation">]</span>        raw_key <span class="token operator">=</span> item<span class="token punctuation">[</span><span class="token string">'raw_key'</span><span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span> <span class="token operator">+</span> item<span class="token punctuation">[</span><span class="token string">'area'</span><span class="token punctuation">]</span> <span class="token operator">+</span> item<span class="token punctuation">[</span><span class="token string">'college'</span><span class="token punctuation">]</span> <span class="token operator">+</span> item<span class="token punctuation">[</span><span class="token string">'major'</span><span class="token punctuation">]</span>        col2<span class="token punctuation">.</span>update_many<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'raw_key'</span><span class="token punctuation">:</span> raw_key<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'$set'</span><span class="token punctuation">:</span> dict<span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> upsert<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    st <span class="token operator">=</span> int<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    ed <span class="token operator">=</span> int<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    process_num <span class="token operator">=</span> int<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    x <span class="token operator">=</span> int<span class="token punctuation">(</span><span class="token punctuation">(</span>ed<span class="token operator">-</span>st<span class="token punctuation">)</span><span class="token operator">/</span>process_num<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> process_num<span class="token punctuation">)</span><span class="token punctuation">:</span>        multiprocessing<span class="token punctuation">.</span>Process<span class="token punctuation">(</span>target<span class="token operator">=</span>worker<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>st<span class="token operator">+</span>x<span class="token operator">*</span>i<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Scripts </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scripts </tag>
            
            <tag> json </tag>
            
            <tag> MongoDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>K-Means-Simple understanding and code implementation</title>
      <link href="/2019/11/28/k-means-simple-understanding-and-code-implementation/"/>
      <url>/2019/11/28/k-means-simple-understanding-and-code-implementation/</url>
      
        <content type="html"><![CDATA[<h2 id="一、聚类定义"><a href="#一、聚类定义" class="headerlink" title="一、聚类定义"></a>一、聚类定义</h2><blockquote><p>聚类分析(cluster analysis)是一组将研究对象分为相对同质的群组(clusters)的统计分析技术。 聚类分析区别于分类分析(classification analysis) ，后者是有监督的学习。</p></blockquote><ul><li>依据研究对象（样品或指标）的特征，对其进行分类的方法，减少研究对象的数目。</li><li>各类事物缺乏可靠的历史资料，无法确定共有多少类别，目的是将性质相近事物归入一类。</li><li>各指标之间具有一定的相关关系。</li></ul><blockquote><p>变量类型：定类变量、定量（离散和连续）变量</p></blockquote><h2 id="二、划分聚类方法-Kmeans"><a href="#二、划分聚类方法-Kmeans" class="headerlink" title="二、划分聚类方法-Kmeans:"></a>二、划分聚类方法-Kmeans:</h2><p>对于给定的样本集，按照样本之间的距离大小，将样本集划分为K个簇。让簇内的点尽量紧密的连在一起，而让簇间的距离尽量的大。</p><ul><li>步骤1：取得k个初始中心点</li><li>步骤2：利用中心点划分样本集为k个簇</li><li>步骤3：根据已经被分类的数据分别重新计算各自的中心点，如果中心点发生变化回到步骤2，未发生变化转到步骤4</li><li>步骤4：收敛</li></ul><p>缺点：<br>初始值敏感、采用迭代方法，得到的结果只是局部最优、K值的选取不好把握、对于不是凸的数据集比较难收敛<br>如何衡量Kmeans 算法的精确度？<br>SSE(Sum of Square Error) 误差平方和， SSE越小，精确度越高。</p><h2 id="三、改进算法-二分Kmeans"><a href="#三、改进算法-二分Kmeans" class="headerlink" title="三、改进算法-二分Kmeans"></a>三、改进算法-二分Kmeans</h2><ul><li>首先将所有点作为一个簇，然后将其一分为二。</li><li>每次选择一个簇一分为二，选取簇的依据取决于其是否能最大程度降低SSE即选取聚类后SSE最小的一个簇进行划分。</li><li>直至有k个簇</li></ul><h2 id="四、Kmeans-Code"><a href="#四、Kmeans-Code" class="headerlink" title="四、Kmeans Code"></a>四、Kmeans Code</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> scipy<span class="token punctuation">.</span>io <span class="token keyword">as</span> scio<span class="token comment" spellcheck="true"># %matplotlib inline</span><span class="token keyword">def</span> <span class="token function">K_Means</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span> sp<span class="token punctuation">,</span> K<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 计算临近点</span>    <span class="token keyword">def</span> <span class="token function">near</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">:</span>        dis <span class="token operator">=</span> <span class="token punctuation">[</span>np<span class="token punctuation">.</span>sum<span class="token punctuation">(</span>np<span class="token punctuation">.</span>square<span class="token punctuation">(</span>x<span class="token operator">-</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> sp<span class="token punctuation">]</span>        <span class="token keyword">return</span> dis<span class="token punctuation">.</span>index<span class="token punctuation">(</span>min<span class="token punctuation">(</span>dis<span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment" spellcheck="true"># 打印结果</span>    <span class="token keyword">def</span> <span class="token function">print_result</span><span class="token punctuation">(</span>sp_list<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true">#打印中心点迭代轨迹</span>        sp_list <span class="token operator">=</span> <span class="token punctuation">[</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> sp_list<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> k <span class="token keyword">in</span> range<span class="token punctuation">(</span>K<span class="token punctuation">)</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> k <span class="token keyword">in</span> range<span class="token punctuation">(</span>K<span class="token punctuation">)</span><span class="token punctuation">:</span>            plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>sp_list<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sp_list<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'k->'</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'type{}'</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">#分类打印其他点</span>        p_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> k <span class="token keyword">in</span> range<span class="token punctuation">(</span>K<span class="token punctuation">)</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> p <span class="token keyword">in</span> X<span class="token punctuation">:</span>            i <span class="token operator">=</span> near<span class="token punctuation">(</span>p<span class="token punctuation">)</span>                        p_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>p<span class="token punctuation">)</span>        p_list <span class="token operator">=</span> <span class="token punctuation">[</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> p_list<span class="token punctuation">]</span>        color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'r'</span><span class="token punctuation">,</span><span class="token string">'g'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">]</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>K<span class="token punctuation">)</span><span class="token punctuation">:</span>            plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>p_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>color<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">'o'</span><span class="token punctuation">)</span>        plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'K-Means Result'</span><span class="token punctuation">)</span>        plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'X'</span><span class="token punctuation">)</span>        plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Y'</span><span class="token punctuation">)</span>        plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span>        plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 迭代中心点</span>    sp_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    sp_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>sp<span class="token punctuation">)</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        count <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>K<span class="token punctuation">)</span>        sp_t <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>K<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> p <span class="token keyword">in</span> X<span class="token punctuation">:</span>            i <span class="token operator">=</span> near<span class="token punctuation">(</span>p<span class="token punctuation">)</span>                        count<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>            sp_t<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> p        sp_t <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>sp_t<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">/</span>count<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>K<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        SSE <span class="token operator">=</span> np<span class="token punctuation">.</span>sum<span class="token punctuation">(</span>np<span class="token punctuation">.</span>square<span class="token punctuation">(</span>sp<span class="token operator">-</span>sp_t<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> SSE <span class="token operator">&lt;</span> <span class="token number">0.001</span><span class="token punctuation">:</span>            <span class="token keyword">break</span>        sp <span class="token operator">=</span> sp_t        sp_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>sp<span class="token punctuation">)</span>    print_result<span class="token punctuation">(</span>sp_list<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'聚类中心:'</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> p <span class="token keyword">in</span> sp<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    data <span class="token operator">=</span> scio<span class="token punctuation">.</span>loadmat<span class="token punctuation">(</span><span class="token string">'ex7data2.mat'</span><span class="token punctuation">)</span>    X <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'X'</span><span class="token punctuation">]</span>    K <span class="token operator">=</span> <span class="token number">3</span>    sp <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># starting point</span>    K_Means<span class="token punctuation">(</span>X<span class="token punctuation">,</span> sp<span class="token punctuation">,</span> K<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://i.loli.net/2019/11/28/gWQ9ZO6CwVMrA34.png" alt="kmeans聚类结果"></p><p><strong>K为3聚类中心</strong>: [1.95399466 5.02557006],[3.04367119 1.01541041],[6.03366736 3.00052511]</p><p>[测试数据下载地址]： <a href="https://uploader.shimo.im/f/7cTjEl5cRAINXBO8.mat?attname=ex7data2.mat&amp;download">ex7data2.mat</a><br>[参考资料]：<a href="https://www.cnblogs.com/pinard/p/6164214.html">K-Means聚类算法原理</a></p>]]></content>
      
      
      <categories>
          
          <category> ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ML </tag>
            
            <tag> Clustering </tag>
            
            <tag> KMeans </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm Problem List</title>
      <link href="/2019/11/08/algorithm-problem-list/"/>
      <url>/2019/11/08/algorithm-problem-list/</url>
      
        <content type="html"><![CDATA[<h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><p>1.<a href="/2018/12/17/luogup1028/">luoguP1028 数的计算</a><br>2.<a href="/2019/02/09/luogup2789/">luoguP2789 直线交点数</a></p><h2 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h2><h3 id="迭代加深搜索ID"><a href="#迭代加深搜索ID" class="headerlink" title="迭代加深搜索ID"></a>迭代加深搜索ID</h3><p>1.<a href="/2019/02/26/codevs1288/">codevs1288 埃及分数</a><br>2.<a href="/2019/02/27/uva11212/">uva11212 Editing a Book</a></p><h2 id="D-P"><a href="#D-P" class="headerlink" title="D P"></a>D P</h2><h3 id="背包"><a href="#背包" class="headerlink" title="背包"></a>背包</h3><h4 id="01背包"><a href="#01背包" class="headerlink" title="01背包"></a>01背包</h4><ol><li><a href="/2019/02/04/luogup1060/">luoguP1060 开心的金明</a></li><li><a href="/2019/02/04/luogup1164/">luoguP1164 小A点菜</a></li><li><a href="/2019/02/04/luogup1064/">luoguP1064 金明的预算方案</a></li><li><a href="/2019/02/04/luogup1048/">luoguP1048 采药</a></li><li><a href="/2019/02/04/luogup1049/">luoguP1049 装箱问题</a></li><li><a href="/2019/01/23/nowcoder317C/">nowcoder317C 小a与星际探索</a></li><li><a href="/2018/12/17/hdu3466/">HDU3466 Proud Merchants</a></li><li><a href="/2018/12/17/hdu2955/">HDU2955 01 背包 Robberies</a></li><li><a href="/2018/12/17/hdu5890/">HDU5890 Eighty seven</a></li></ol><h4 id="完全背包"><a href="#完全背包" class="headerlink" title="完全背包"></a>完全背包</h4><ol><li><a href="/2019/02/04/luogup1616/">luoguP1616 疯狂的采药</a></li></ol><h4 id="多重背包"><a href="#多重背包" class="headerlink" title="多重背包"></a>多重背包</h4><h3 id="线性DP"><a href="#线性DP" class="headerlink" title="线性DP"></a>线性DP</h3><ol><li><a href="/2019/02/11/luogup1020/">luoguP1020 导弹拦截</a></li><li><a href="/2019/02/12/luogup1091/">luoguP1091 合唱队形</a></li><li><a href="/2019/02/25/luogup1280/">luoguP1280 尼克的任务</a></li><li><a href="/2019/02/25/luogup1880/">luoguP1880 石子合并</a></li><li><a href="/2019/02/26/luogup1140/">luoguP1140 相似基因</a></li><li><a href="/2019/02/26/luogup1282">luoguP1282 多米诺骨牌</a></li></ol><h3 id="区间DP"><a href="#区间DP" class="headerlink" title="区间DP"></a>区间DP</h3><ol><li><a href="/2019/02/26/poj3280/">poj3280 Cheapest Palindrome</a></li><li><a href="/2019/02/26/poj2955/">poj2955 Brackets</a></li><li><a href="/2019/02/26/poj1651/">poj1651 Multiplication Puzzle</a></li><li><a href="/2019/02/26/luogup2758/">luoguP2758 编辑距离</a></li></ol><h3 id="树形DP"><a href="#树形DP" class="headerlink" title="树形DP"></a>树形DP</h3><ol><li><a href="/2019/02/26/luogup1122/">luoguP1122 最大子树和</a></li><li><a href="/2019/02/26/hdu2412/">HDU2412 Party at Hali-Bula</a></li></ol><h2 id="图论"><a href="#图论" class="headerlink" title="图论"></a>图论</h2><h3 id="Bipartite-Graph"><a href="#Bipartite-Graph" class="headerlink" title="Bipartite Graph"></a>Bipartite Graph</h3><ol><li><a href="/2019/02/01/luogup3386/">luoguP3386   模板 二分图匹配</a></li><li><a href="/2019/02/01/luogup1640/">luoguP1640 SCOI2010连续攻击游戏</a></li><li><a href="/2019/02/01/luogup1129/">luoguP1129 ZJOI2007矩阵游戏</a></li></ol><h3 id="Network-Flows"><a href="#Network-Flows" class="headerlink" title="Network-Flows"></a>Network-Flows</h3><ol><li><a href="/2019/01/22/luogup2604/">luoguP2604 ZJOI2010网络扩容</a></li><li><a href="/2019/01/23/luogup3171/">luoguP3171 CQOI2015网络吞吐量</a></li><li><a href="/2019/01/23/luogup2766/">luoguP2766 最长不下降子序列问题</a></li></ol><h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><h2 id="数论"><a href="#数论" class="headerlink" title="数论"></a>数论</h2>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Graph Theory </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Daily New Words</title>
      <link href="/2019/11/03/daily-new-words/"/>
      <url>/2019/11/03/daily-new-words/</url>
      
        <content type="html"><![CDATA[<h2 id="29-Dec"><a href="#29-Dec" class="headerlink" title="29 Dec"></a>29 Dec</h2><h2 id="26-Oct"><a href="#26-Oct" class="headerlink" title="26 Oct"></a>26 Oct</h2><h3 id="complacency"><a href="#complacency" class="headerlink" title="complacency"></a><a href="https://fanyi.baidu.com/#en/zh/complacency">complacency</a></h3><blockquote><ul><li>[kəmˈpleɪsnsi]</li><li>n</li></ul><ol><li>Despite signs of an improvement in the economy, there is no room for complacency.</li><li>The survey data suggest that these are relatively early days for the technologies covered in this report, but this is no time for complacency.</li></ol></blockquote><h3 id="indication"><a href="#indication" class="headerlink" title="indication"></a><a href="https://fanyi.baidu.com/#en/zh/indication">indication</a></h3><blockquote><ul><li>[ˌɪndɪˈkeɪʃn]</li><li>n</li></ul><ol><li>They gave no indication of how the work should be done.</li><li>There are clear indications that the economy is improving.</li></ol></blockquote><h3 id="contradiction"><a href="#contradiction" class="headerlink" title="contradiction"></a><a href="https://fanyi.baidu.com/#em/zh/contradiction">contradiction</a></h3><blockquote><ul><li>[ˌkɒntrəˈdɪkʃn]</li><li>n</li></ul><ol><li>It is therefore not a contradiction to say that companies that have an upper hand with the IoT, machine learning, augmented reality and other technologies that will be enabled by next-generation connectivity know they need the most improvements.</li><li>I think I can say, without fear of contradiction , that…</li></ol></blockquote><h2 id="25-Oct"><a href="#25-Oct" class="headerlink" title="25 Oct"></a>25 Oct</h2><h3 id="utility"><a href="#utility" class="headerlink" title="utility"></a><a href="https://fanyi.baidu.com/#en/zh/utility">utility</a></h3><blockquote><ul><li>[juːˈtɪləti]</li><li>n &amp; adj</li></ul><ol><li>Belief in the utility of public education is shared by students nationwide.</li><li>A fur coat has more utility in winter than in autumn.</li><li>This is analogous <em>[əˈnæləɡəs]</em> to many Java methods calling one utility method.</li></ol></blockquote><h3 id="meter"><a href="#meter" class="headerlink" title="meter"></a><a href="http://fanyi.baidu.com/#en/zh/meter">meter</a></h3><blockquote><ul><li>[ˈmiːtə(r)]</li><li>n &amp; v</li></ul><ol><li>A man came to read the gas meter.</li><li>Only one third of these households thought it reasonable to meter water.</li><li>They have right to come in and inspect the electricity meter.</li></ol></blockquote><h3 id="pursue"><a href="#pursue" class="headerlink" title="pursue"></a><a href="http://fanyi.baidu.com/#en/zh/pursue">pursue</a></h3><blockquote><ul><li>[pəˈsjuː]</li><li>v</li></ul><ol><li>We intend to persue the policy with determination.</li><li>She wishes to persue a medical career.</li><li>We have decided not to persue the matter/legal action.</li><li>Police persued the car at high speed.</li></ol></blockquote><h3 id="exploit"><a href="#exploit" class="headerlink" title="exploit"></a><a href="http://fanyi.baidu.com/#en/zh/exploit">exploit</a></h3><blockquote><ul><li>[ɪkˈsplɔɪt , ˈeksplɔɪt]</li><li>v &amp; n</li></ul><ol><li>He exploited his father’s name to get himself a job.</li><li>Critics claim he exploited black musician for personal gain.</li><li>You’ll need a good aerial <em>[ˈeəriəl]</em> to exploit the radio’s performance/</li></ol></blockquote><h3 id="detect"><a href="#detect" class="headerlink" title="detect"></a><a href="http://fanyi.baidu.com/#en/zh/detect">detect</a></h3><blockquote><ul><li>[dɪˈtekt]</li><li>v</li></ul><ol><li>The tests are designed to detect the disease early.</li><li>Arnold can detect a certain sadness in the old man face.</li></ol></blockquote><h3 id="vessel"><a href="#vessel" class="headerlink" title="vessel"></a><a href="http://fanyi.baidu.com/#en/zh/vessel">vessel</a></h3><blockquote><ul><li>vessel</li><li>n</li></ul><ol><li>He makes decorative vessels in copper, stainless steel and silver</li></ol></blockquote><h3 id="navigate"><a href="#navigate" class="headerlink" title="navigate"></a><a href="http://fanyi.baidu.com/#en/zh/navigate">navigate</a></h3><blockquote><ul><li>[ˈnævɪɡeɪt]</li><li>v</li></ul><ol><li>The river became too narrow and shallow to navigate.</li><li>I’ll drive, and you can navigate.</li><li>He naviage his way to the altar <em>[ˈɔːltə(r)]</em>.</li></ol></blockquote><h3 id="multiple"><a href="#multiple" class="headerlink" title="multiple"></a><a href="http://fanyi.baidu.com/#en/zh/multiple">multiple</a></h3><blockquote><ul><li>ˈmʌltɪpl]</li><li>adj &amp; n</li><li><ol><li>He died of multiple injures.</li></ol></li><li><ol start="2"><li>Their numerical system, derived from the Babylonians, was based on multiples of the number six.</li></ol></li><li><ol start="3"><li>36 is a multiple of 9.</li></ol></li><li><ol start="4"><li>The most common multiple births are twins, two babies born at the same time.</li></ol></li></ul></blockquote><h3 id="paramount"><a href="#paramount" class="headerlink" title="paramount"></a><a href="http://fanyi.baidu.com/#en/zh/paramount">paramount</a></h3><blockquote><ul><li>[ˈpærəmaʊnt]</li><li>adj</li></ul><ol><li>Safety is paramount.</li><li>The matter is of paramount importance.</li><li>The child’s welfare must be seen as paramount。</li></ol></blockquote><h3 id="cite"><a href="#cite" class="headerlink" title="cite"></a><a href="http://fanyi.baidu.com/#en/zh/cite">cite</a></h3><blockquote><ul><li>[saɪt]</li><li>v</li></ul><ol><li>He cited his heavy workload as the reason for his breakdown.</li><li>She cites a favourite poem by George Herbert</li><li>She was cited in the divorce proceedings.</li><li>He was cited for bravery.</li></ol></blockquote><h3 id="articulate"><a href="#articulate" class="headerlink" title="articulate"></a><a href="http://fanyi.baidu.com/#en/zh/articulate">articulate</a></h3><blockquote><ul><li>[ɑːˈtɪkjuleɪt , ɑːˈtɪkjələt]</li><li>v &amp; adj</li></ul><ol><li>She struggled to articulate her thoughts.</li><li>He was too drunk to articulate properly.</li><li>He articulated each syllable <em>[ˈsɪləbl]</em> carefully.</li><li>She was an articulate young woman.</li></ol></blockquote><h3 id="privacy"><a href="#privacy" class="headerlink" title="privacy"></a><a href="http://fanyi.baidu.com/#en/zh/privacy">privacy</a></h3><blockquote><ul><li>[ˈprɪvəsi]</li><li>n</li><li><ol><li>She was longing for some peace and privacy.</li></ol></li><li><ol start="2"><li>I value my privacy.</li></ol></li><li><ol start="3"><li>The press invade people’s privacy unjustifiably every day.</li></ol></li><li><ol start="4"><li>The newspaper breached the code of conduct on privacy.</li></ol></li></ul></blockquote><h3 id="context"><a href="#context" class="headerlink" title="context"></a><a href="http://fanyi.baidu.com/#en/zh/context">context</a></h3><blockquote><ul><li>[ˈkɒntekst]</li><li>n</li></ul><ol><li>His decision can only be understood in context.</li><li>You should be able to guess the meaning of the word from the context.</li></ol></blockquote><h3 id="vulnerability"><a href="#vulnerability" class="headerlink" title="vulnerability"></a><a href="http://fanyi.baidu.com/#en/zh/vulnerability">vulnerability</a></h3><blockquote><ul><li>[ˌvʌlnərə’bɪlətɪ]</li><li>n</li><li><ol><li>Old people are particularly vulnerable members of our society.</li></ol></li><li><ol start="2"><li>His vulnerability makes him even more lovable.</li></ol></li></ul></blockquote><h3 id="capability"><a href="#capability" class="headerlink" title="capability"></a><a href="http://fanyi.baidu.com/#en/zh/capability">capability</a></h3><blockquote><ul><li>[ˌkeɪpəˈbɪləti]</li><li>n</li></ul><ol><li>Animals in the zoo have lost the capability of catching food for themselves.</li><li>People experience differences in physical and mental capability depending on the time of day.</li></ol></blockquote><h3 id="screen"><a href="#screen" class="headerlink" title="screen"></a><a href="http://fanyi.baidu.com/#en/zh/screen">screen</a></h3><blockquote><p>[skriːn]<br>n &amp; v</p><ol><li>Can you do a printout of this screen for me .</li><li>Most of the road behind the hotel was screened by a block of flats.</li><li>They will screen all their candiates.</li></ol></blockquote><h2 id="24-Oct"><a href="#24-Oct" class="headerlink" title="24 Oct"></a>24 Oct</h2><h3 id="implication"><a href="#implication" class="headerlink" title="implication"></a><a href="https://fanyi.baidu.com/#en/zh/implication">implication</a></h3><blockquote><ul><li>[ˌɪmplɪˈkeɪʃn]  </li><li>n</li></ul><ol><li>the implication is that no one at the bank is responsible.</li><li>The overwhelming interest of respondents in next-generation connectivity is driven by both optimism about the revenue implications and a fear of being left behind.</li></ol></blockquote><h3 id="potential"><a href="#potential" class="headerlink" title="potential"></a><a href="https://fanyi.baidu.com/#en/zh/potential">potential</a></h3><blockquote><ul><li>[pəˈtenʃl]  </li><li>adj &amp; n</li></ul><ol><li>First we need to identify actual and potential problems.</li><li>She has great potential  as an artist / to became a world-class musician.</li><li>The house has a lot of potential.</li></ol></blockquote><h3 id="necessitate"><a href="#necessitate" class="headerlink" title="necessitate"></a><a href="https://fanyi.baidu.com/#en/zh/necessitate">necessitate</a></h3><blockquote><ul><li>[nəˈsesɪteɪt]</li><li>v</li></ul><ol><li>Recent financial scandals have neccessitated changes in parliamentary <em>[ˌpɑːləˈmentri]</em> procedure <em>[prəˈsiːdʒə(r)]</em>.</li><li>the potential offered by lower latency <em>[‘leɪtənsɪ]</em> necessitates a step change in business investment and innovation <em>[ˌɪnəˈveɪʃn]</em>.</li></ol></blockquote><h3 id="parliamentary"><a href="#parliamentary" class="headerlink" title="parliamentary"></a><a href="https://fanyi.baidu.com/#en/zh/parliamentary">parliamentary</a></h3><blockquote><ul><li>[ˌpɑːləˈmentri]</li><li>adj</li></ul><ol><li>He used his influence to make sure she was not selected as a parliamentary candidate.</li><li>The Prime Minister has been briefed by her parliamentary aides</li></ol></blockquote><h3 id="automation"><a href="#automation" class="headerlink" title="automation"></a><a href="https://fanyi.baidu.com/#en/zh/automation">automation</a></h3><blockquote><ul><li>[ˌɔːtəˈmeɪʃn]</li><li>n</li></ul><ol><li>Automation meants the loss of lot of factory jobs.</li><li>In the last ten years, automation has reduced the the worke force here by half.</li><li>Automation would bring shorter and more flexible working week.</li><li>Automation revolutionized the olive industry in the early 1970s.</li><li>This is a design limitation of my automation system.</li><li>Automation has obsoleted <em>[ˈɒbsəliːtɪd]</em> any unskilled worker.</li></ol></blockquote><h3 id="crucial"><a href="#crucial" class="headerlink" title="crucial"></a><a href="https://fanyi.baidu.com/#en/zh/crucial">crucial</a></h3><blockquote><ul><li>[ˈkruːʃl]</li><li>adj</li></ul><ol><li>Parents play a crucial role in preparing their child for school.</li><li>The next few weeks are going to be crucial.</li><li>This is a crucial point, since the fear of competitive disruption is driving an urgency to adopt use cases and capitalise on them.</li></ol></blockquote><h3 id="urgency"><a href="#urgency" class="headerlink" title="urgency"></a><a href="https://fanyi.baidu.com/#en/zh/urgency">urgency</a></h3><blockquote><ul><li>[ˈɜːdʒənsi]</li><li>n</li></ul><ol><li>It’s a matter of utmost ** [ˈʌtməʊst]** urgency. 这事刻不容缓</li><li>She was surprised at urgency in his voice.</li><li>They hastened to greet him and asked urgently, ‘Did you find it?’</li></ol></blockquote><h3 id="adopt"><a href="#adopt" class="headerlink" title="adopt"></a><a href="https://fanyi.baidu.com/#en/zh/adopt">adopt</a></h3><blockquote><ul><li>[əˈdɒpt]</li><li>v</li></ul><ol><li>She was forced to have her baby adopted</li><li>All three teams adopted different approaches to the problem.</li><li>The council is expected to adopt the new policy at its next meeting.</li><li>Early Christians in Europe adopted many of the practices of older, pagan religions.</li><li>She was adopted as parliamentary candidate for Wood Green.</li></ol></blockquote><h3 id="capitalize"><a href="#capitalize" class="headerlink" title="capitalize"></a><a href="https://fanyi.baidu.com/#en/zh/capitalize">capitalize</a></h3><blockquote><ul><li>[ˈkæpɪtəlaɪz]</li><li>v</li></ul><ol><li>The team failed to capitalize their early lead.</li><li>The rebels seem to be trying to capitalize the public’s discontent with gevernment.</li><li>Our intention is to capitalize the company by any means we can…</li></ol></blockquote><h3 id="consultancy"><a href="#consultancy" class="headerlink" title="consultancy"></a><a href="https://fanyi.baidu.com/#en/zh/consultancy">consultancy</a></h3><blockquote><ul><li>[kənˈsʌltənsi]</li><li>n</li></ul><ol><li>He is acting on a consultancy basis.</li><li>consultancy is a company that gives expert advice on a particular subject to other companies or organizations.</li></ol></blockquote><h3 id="divergence"><a href="#divergence" class="headerlink" title="divergence"></a><a href="https://fanyi.baidu.com/#en/zh/divergence">divergence</a></h3><blockquote><ul><li>[daɪˈvɜːdʒəns]</li><li>n</li></ul><ol><li>There’s a substantial divergence of opinion within the party.</li><li>A minimal error or deviation may result in wide divergence</li><li>There is an interesting divergence between B2C (business to consumer) and B2B (business to business) companies in how urgently they are approaching opportunities stemming from next-generation connectivity</li></ol></blockquote><h3 id="stem"><a href="#stem" class="headerlink" title="stem"></a><a href="https://fanyi.baidu.com/#en/zh/stem">stem</a></h3><blockquote><ul><li>[stem]</li><li>n &amp; v</li></ul><ol><li>Stem is the long thin part of a wine glass between the bowl and the base</li><li>Stem is the main long thin part of a plant above the ground from which the leaves or flowers grow.</li><li>Stem is the thin tube of a tobacco pipe.</li><li>The government had failed to stem the the tide of factory closures.</li><li>All my problems stem from drink.</li></ol></blockquote><h3 id="notably"><a href="#notably" class="headerlink" title="notably"></a><a href="https://fanyi.baidu.com/#en/zh/notably">notably</a></h3><blockquote><ul><li>[ˈnəʊtəbli]</li><li>adv</li></ul><ol><li>The house has lots of drawbacks, most notably its price.</li><li>This has not been a notably successful project.</li></ol></blockquote><h3 id="gear"><a href="#gear" class="headerlink" title="gear"></a><a href="https://fanyi.baidu.com/#en/zh/gear">gear</a></h3><blockquote><ul><li>[ɡɪə(r)]</li><li>n &amp; v</li></ul><ol><li>Careless use of clutch <em>[klʌtʃ]</em> my damage gears.</li><li>What gear are you in? Please shift the low gear.</li><li>I have left all my gear in Dave’s house.</li></ol></blockquote><h3 id="enormous"><a href="#enormous" class="headerlink" title="enormous"></a><a href="https://fanyi.baidu.com/#en/zh/enormous">enormous</a></h3><blockquote><ul><li>[ɪˈnɔːməs]</li><li>adj</li></ul><ol><li>The problem facing the President is enormous.</li><li>It was a enormous disappointment.</li><li>It is a enormous challenge but we hope to meet it within a a year.</li></ol></blockquote><h3 id="streamline"><a href="#streamline" class="headerlink" title="streamline"></a><a href="https://fanyi.baidu.com/#em/zh/streamline">streamline</a></h3><blockquote><ul><li>[ˈstriːmlaɪn]</li><li>v &amp; n</li></ul><ol><li>The cars all have a new streamlined design.</li><li>The production process is to be streamline.</li><li>They are making efforts to streamline their normally cumbersome <em>[ˈkʌmbəsəm]</em> bureaucracy <em>[bjʊəˈrɒkrəsi]</em>.</li></ol></blockquote><h3 id="boost"><a href="#boost" class="headerlink" title="boost"></a><a href="https://fanyi.baidu.com/#en/zh/boost">boost</a></h3><blockquote><ul><li>[buːst]</li><li>v &amp; n</li></ul><ol><li>Getting that job did a lot to boost his ego.</li><li>The tax cuts will give a much needed boost to the economy.</li><li>Winning the competition was a wonderful boost for her morale <em>[məˈrɑːl]</em>.</li><li>Do what you to give her confident and boost her morale.</li></ol></blockquote><h3 id="administrative"><a href="#administrative" class="headerlink" title="administrative"></a><a href="https://fanyi.baidu.com/#en/zh/administrative">administrative</a></h3><blockquote><ul><li>[ədˈmɪnɪstrətɪv</li><li>adj</li></ul><ol><li>Other industries have had to sack managers to reduce administrative costs</li><li>In terms of the types of business opportunities that companies, B2B or B2C, are focused<br>on, respondents appeared especially <strong>geared</strong> towards automation—an innovation that could have <strong>enormous implications</strong> in <strong>streamlining operations</strong> and <strong>boosting firms’ administrative efficiency</strong>.</li></ol></blockquote><h3 id="transportation"><a href="#transportation" class="headerlink" title="transportation"></a><a href="https://fanyi.baidu.com/#en/zh/transportation">transportation</a></h3><blockquote><ul><li>[ˌtrænspɔːˈteɪʃn]</li><li>n</li></ul><ol><li>The company will provide free transportation.</li><li>Campuses are usually accessible by public transportation.</li><li>The baggage was being rapidly stowed <em>[stəʊd]</em> away for transportation.</li><li>This trend is especially apparent in the energy and transportation sectors.</li></ol></blockquote><h2 id="20-Oct"><a href="#20-Oct" class="headerlink" title="20 Oct"></a>20 Oct</h2><h3 id="consent"><a href="#consent" class="headerlink" title="consent"></a>consent</h3><blockquote><p>/kənˈsɛnt/<br>noun permission for something to happen or agreement to do something.<br>“no change may be made without the consent of all the partners”<br>verb give permission for something to happen.<br>“he consented to a search by a detective”</p></blockquote><ol><li>He expresses consent to do sth.</li><li>I got his consent to sth/do sth.</li><li>They got married by mutual consent of theri parents.</li><li>In China, the age of consent for marriage shall not earlier than the age of 22 years old for man and 20 for woman.</li><li>I am sure my teacher won’t consent.</li></ol><h3 id="criterion"><a href="#criterion" class="headerlink" title="criterion"></a>criterion</h3><blockquote><p>/krʌɪˈtɪərɪən/ plural noun: criteria<br>noun a principle or standard by which something may be judged or decided.<br>“they award a green label to products that meet certain environmental criteria”</p></blockquote><ol><li>There are a number of criteria we need to ment.</li><li>We have specific criteria and certain limitation.</li><li>Motivation is one of the principal criteria for success in learning the second language.</li><li>At that price, it met the low-price criteria.</li><li>the committee waived its normal five-year retirement criteria for fear Kelley might never retire.</li></ol><h3 id="specific"><a href="#specific" class="headerlink" title="specific"></a>specific</h3><blockquote><p>/spəˈsɪfɪk/</p></blockquote><ul><li>adjective</li></ul><blockquote><p>clearly defined or identified.<br>“savings were made by increasing the electricity supply only until it met specific development needs”</p></blockquote><ol><li>Before starting to practice English speaking, we must have a specific expectation to our score.</li></ol><blockquote><p>precise and clear in making statements or issuing instructions.<br>“when ordering goods be specific”</p></blockquote><ol start="2"><li>If we want to win this competition, we must have a specific training schedule and obey it strictly.</li></ol><blockquote><p>relating to species or a species.<br>“the differences between them can only be on the specific level”</p></blockquote><ul><li>noun</li></ul><blockquote><p>plural noun: specifics<br>a medicine or remedy effective in treating a particular disease or part of the body.<br>“he grasped at the idea as though she had offered him a specific for cancer”<br>a precise detail.<br>“I wish I’d put more thought into the specifics”</p></blockquote><ol start="3"><li>I’m not going to get into specifics</li><li>“I can’t get more specific</li></ol><h3 id="contrast"><a href="#contrast" class="headerlink" title="contrast"></a>contrast</h3><blockquote><p>noun /ˈkänˌtrast/<br>the state of being strikingly different from something else in juxtaposition or close association.<br>“the day began cold and blustery, in contrast to almost two weeks of uninterrupted sunshine”<br>verb /ˈkänˌtrast,kənˈtrast/<br>differ strikingly.<br>“his friend’s success contrasted with his own failure”</p></blockquote><h2 id="05-Oct"><a href="#05-Oct" class="headerlink" title="05 Oct"></a>05 Oct</h2><p>sediment, lush, pollen, palm, wreck, fragile, yield, civil war, assert</p><p>dominance, sledge, toppling, catastrophe, excavation, heroic, circular</p><p>windbreaks, moist, prehistoric, contend,  upright, back up, manoeuvre</p><p>wholly, doom, immunity, ingenious, stewards, reckless</p><p>pioneer, statues, poison, caption, chimp, messy, scrutiny, exclusively</p><p>deceptively, meticulously, radically, flit, contradict, motifs, thoroughly</p><p>renown, fame, reputation, prestige, drill, hoe, plough, rapid</p><p>advancement, the bar, randomly, harrow, deem, scatter, hopper</p><p>tube, furrow, blade, coulter, sow, manure, fertiliser, fermentative</p><p>inherited, pulmonary, cultivation, vineyard, tillage, ongoing</p><p>flip, trapdoor, fuss, astounding, manoeuvre, rear, plunge, vertical</p><p>submerge, rotate, preposterous, gymnastics, weld, resemblance, deposit</p><p>propeller, hinge, blade, appendage, compartment, versatility, edge</p><p>retraction</p><p>parcel shipment transit warehouse coverage financial mirror smashed</p><p>cruise obsolete fragmentary, imperial, emerge, realm, envoy, compile</p><p>compendia, incentive, basin, devout, hajj, prophet, lane, sacred</p><p>enlightenment, counterpart, genre, missionary, sojourn, conqueror</p><p>halt, churn out, insatiable, appetite, prowess, diplomacy, winery</p><p>safari, reshuffle</p><h2 id="03-Oct"><a href="#03-Oct" class="headerlink" title="03 Oct"></a>03 Oct</h2><p>cumulative, ratchet, fidelity, manipulation, neural, crow, prickly</p><p>hooked, counterpart, sever, split, serrated, impale, puncture, punch</p><p>ecological, correlate, correlation, trial-and-error, beak, wary</p><p>neurobiologist, reptile, convoluted, crevice, convergent, novice</p><p>principal, principle, commitment, heuristics, constraint, restraint</p><p>piece, chess figure, mentor, tutor, tuition, radiologist, cognitive</p><p>journeyman, journey, journal, journalist, reporter, interviewer, strategic</p><p>hypothesis, theory, prediction, apprenticeship, respectve, domain, perceive</p><p>utility, utilize, utilization, criticize, critical, criteria, ultimate, ultimately,</p><p>steam, emulate, prefume, fragrance, aroma, scent, odourant, fragrant, exude, smear</p><p>diffuse, saturated, soak, evaporate, denature, distillation, solvent, concrete</p><p>flora, fauna, endemic, spice, therapy, therapist, threapeutic, anti-freeze, antiviral</p><p>rheumatism, fortifier, tonic, aromatherapy, ailment, nausea, navy, naval</p><p>navigate, astronaut, poisonous, toxic</p>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> English </tag>
            
            <tag> Vocabulary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Apache Kafka Notes</title>
      <link href="/2019/11/03/apache-kafka-notes/"/>
      <url>/2019/11/03/apache-kafka-notes/</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.loli.net/2019/11/03/KztPYLn7qFTNegB.jpg"></p><h2 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h2><hr><blockquote><p>在大数据技术中主要有两个挑战：收集数据和分析并处理数据，消息系统将会让这些事情变得更简单。<br>Appache Kafka 最初由Linkedin公司开发，Linkedin于2010年贡献给了Apache基金会并成为顶级开源项目。Kafka是一种快速、可扩展的、设计内在就是分布式的，分区的和可复制的提交日志服务。</p></blockquote><h3 id="1-1-消息系统"><a href="#1-1-消息系统" class="headerlink" title="1.1 消息系统"></a>1.1 消息系统</h3><blockquote><p>消息系统负责从一个程序到另一个程序，是程序可以专注于数据而不用关心数据的传递和共享。<br>分布式消息传递基于可靠消息队列, 消息在客户端应用程序和消息传递系统之间异步传递消息</p></blockquote><p>两种类型消息系统</p><ul><li><p>点对点<br>消息保存在队列，一个或者多个消费者同时消耗消息，一个消息最多一个消费者消费</p></li><li><p>发布-订阅（pub-sub)<br>消息保存在主题中，消费者可以订阅一个或者多个主题的消息，发布者和订阅者</p></li></ul><p><img src="https://i.loli.net/2019/11/03/3DyicoCmYGgAa5x.png" alt="点对点"><img src="https://i.loli.net/2019/11/03/V9BcRuNbTqarZ6X.png" alt="发布-订阅"></p><h3 id="1-2-Kafka"><a href="#1-2-Kafka" class="headerlink" title="1.2 Kafka"></a>1.2 Kafka</h3><blockquote><ul><li>Kafka 是一个分布式发布 - 订阅消息系统,</li><li>Kafka 可以处理大量的数据，并使您能够将消息从一个端点传递到另一个端点。</li><li>Kafka 适合离线和在线消息消费。</li><li>kafka 非常快，执行200万写/秒</li><li>Kafka 消息保留在磁盘上，并在群集内复制以防止数据丢失。</li></ul></blockquote><p>用例：</p><ul><li><p>指标： Kafka通常用于操作监控数据。 这涉及聚合来自分布式应用程序的统计信息，以产生操作数据的集中馈送。</p></li><li><p>日志聚合解决方案：  Kafka可用于跨组织从多个服务收集日志，并使它们以标准格式提供给多个服务器。</p></li><li><p>流处理：流式的框架(如Storm和Spark Streaming)从主题中读取数据，对其进行处理，并将处理后的数据写入新主题，供用户和应用程序使用。 Kafka的强耐久性在流处理的上下文中也非常有用。</p></li></ul><h2 id="二、基础"><a href="#二、基础" class="headerlink" title="二、基础"></a>二、基础</h2><hr><h3 id="2-1-优点"><a href="#2-1-优点" class="headerlink" title="2.1 优点"></a>2.1 优点</h3><blockquote><p>解耦、冗余、扩展性、灵活性和峰值处理能力、可恢复性、缓冲、异步通信</p></blockquote><ul><li><p><strong>解耦</strong> : 在处理过程插入了一个隐含的、基于数据的接口层，两边的应用程序都只需要实现这个接口，不用关心数据的传递。两边的程序可以独立的扩展或修改处理过程，只需要保证接口约束。</p></li><li><p><strong>冗余</strong> : 消息队列会将数据持久化到处理系统明确数据完全处理完毕，防止处理数据过程失败导致数据丢失。</p></li><li><p><strong>扩展性</strong> : 由于解耦了处理过程，易于调节消息入队和处理的频率，只需增加处理过程，不需要改变代码和参数。</p></li><li><p><strong>灵活性和峰值处理能力</strong> : 有利于访问量剧增的情况，将消息存下来，防止应用崩溃。</p></li><li><p><strong>可恢复性</strong> : 降低了耦合度，部分组件的崩溃不会影响到整个系统，会在系统恢复后继续处理</p></li><li><p><strong>顺序保证</strong> : Kafka 保证一个分区内消息的有序性</p></li><li><p><strong>缓冲</strong> : 消息队列通过一个缓冲层来帮助任务最高效率的执行</p></li><li><p><strong>异步通信</strong> : 消息放入不用立即取，需要时再取出来</p></li></ul><h3 id="2-2-术语"><a href="#2-2-术语" class="headerlink" title="2.2 术语"></a>2.2 术语</h3><p><img src="https://i.loli.net/2019/11/03/9gZActqbVJmlG6R.jpg" alt="Kafka数据流程图"></p><blockquote><p>Producer、Consumer、Consumer Group、Kafka Cluster、Broker、Topic、Partition、Partition offset、 Replicas of partition、Leader、Follower</p></blockquote><ul><li><p><strong>Producer</strong> : 生产者，数据发布者。</p></li><li><p><strong>Consumer</strong> : 消费者，数据订阅者。</p></li><li><p><strong>Consumer Group</strong> : 消费者分组，同一分组内的消费者共同消费消息，特定消息只会被分组内任一消费者消费一次。</p></li><li><p><strong>Kafka Cluster</strong> : Kafka 集群 Kafka有多个服务器被称为Kafka 可以扩展Kafka集群，无需停机。 这些集群用于管理消息数据的持久性和复制。</p></li><li><p><strong>Broker</strong> : Broker，即Kafka的服务器，负责存储消息，Kafa集群中的一台或多台服务器统称为 Broker。</p></li><li><p><strong>Topic</strong> : 主题，由用户定义并配置在Kafka服务器，用于建立生产者和消息者之间的订阅关系：生产者发送消息到指定的Topic下，消息者从这个Topic下消费消息。</p></li><li><p><strong>Partition</strong> : 分区，Partition，一个Topic下面会分为很多分区。Topic物理上的分组，一个topic可以分为多个partition保存在一个或者多个Broker，每个 partition 是一个有序的队列。partition中的每条消息都会被分配一个有序的 id（offset）</p></li><li><p><strong>Partition offset</strong> : 分区偏移，offset 为一个 long 型的数字，是每个分区的消息的唯一序列标识。</p></li><li><p><strong>Replicas of partition</strong> : 分区备份，副本只是一个分区的备份。 副本从不读取或写入数据。 它们用于防止数据丢失。如果一个topic的副本数为3，那么Kafka将在集群中为每个partition创建3个相同的副本。集群中的每个broker存储一个或多个partition。</p></li><li><p><strong>Leader</strong> : 领导者，负责给定分区的所有读取和写入的服务器节点。 每个分区都有一个服务器充当Leader</p></li><li><p><strong>Follower</strong> : 追随者，跟随领导者指令的节点被称为Follower。 如果领导失败，一个追随者将自动成为新的领导者。 跟随者作为正常消费者，拉取消息并更新其自己的数据存储。</p></li></ul><p><strong>数据均衡，水平扩展</strong></p><blockquote><ul><li>如果在一个Topic中有N个Partition，Kafka Cluster有N个Broker，则每个Broker存储一个Partiction。</li><li>如果在一个Topic中有N个Partition，Kafka Cluster有N+M个Broker，则其中N个Broker各存储一个Partition，剩下M个Broker 不存储该Topic的 Particition</li><li>如果在一个Topic中有N个Partition，Kafka Cluster有少于N个Broker, 则一个Broker存储该Topic的一个或多个Partition，但容易导致Kafka集群数据不均衡。</li></ul></blockquote><h2 id="三、架构"><a href="#三、架构" class="headerlink" title="三、架构"></a>三、架构</h2><hr><h3 id="3-1-架构图"><a href="#3-1-架构图" class="headerlink" title="3.1 架构图"></a>3.1 架构图</h3><p><img src="https://i.loli.net/2019/11/03/jWnGoPUxHJ1g5wV.jpg" alt="基于 Kafka-ZooKeeper 的分布式消息队列系统总体架构"></p><blockquote><p>如上图所示，一个典型的 Kafka 体系架构包括若干 Producer（可以是服务器日志，业务数据，页面前端产生的 page view 等等），若干 Broker（Kafka 支持水平扩展，一般 Broker 数量越多，集群吞吐率越高），若干 Consumer (Group)，以及一个 Zookeeper 集群。Kafka 通过 Zookeeper 管理集群配置，选举 Leader，以及在 Consumer Group 发生变化时进行 rebalance。Producer 使用 push(推) 模式将消息发布到 broker，Consumer 使用 pull(拉) 模式从 Broker 订阅并消费消息。</p></blockquote><h3 id="3-2-组件"><a href="#3-2-组件" class="headerlink" title="3.2 组件"></a>3.2 组件</h3><ul><li><strong>Broker</strong><br> Kafka集群通常由多个Broker组成以保持负载平衡。 KafkaBroker是无状态的，所以他们使用ZooKeeper来维护它们的集群状态。 一个KafkaBroker实例可以每秒处理数十万次读取和写入，每个Broker可以处理TB的消息，而没有性能影响。 Kafka Broker 的 Leader 选举可以由ZooKeeper完成</li><li><strong>ZooKeeper</strong><br>ZooKeeper用于管理和协调Kafka Broker。 ZooKeeper服务主要用于通知生产者和消费者Kafka系统中存在任何新Broker或Kafka系统中Broker失败。 根据Zookeeper接收到关于Broker的存在或失败的通知，然后生产者和消费者采取决定并开始与某些其他Broker协调他们的任务。Apache Zookeeper，它是一个分布式配置和同步服务。 Zookeeper是Kafka代理和消费者之间的协调接口。 Kafka服务器通过Zookeeper集群共享信息。 Kafka在Zookeeper中存储基本元数据，例如关于 <strong>主题，代理，消费者偏移(队列读取器)</strong> 等的信息。由于所有关键信息存储在Zookeeper中，并且它通常在其整体上复制此数据，因此Kafka代理/ Zookeeper的故障不会影响Kafka集群的状态。 一旦Zookeeper重新启动，Kafka将恢复状态。 这为Kafka带来了零停机时间</li><li><strong>Producer</strong><br>生产者将数据推送给Broker。 当新Broker启动时，所有生产者搜索它并自动向该新Broker发送消息。 Kafka生产者不等待来自Broker的确认，并且发送消息的速度与Broker可以处理的一样快</li><li><strong>Consumer</strong><br>因为KafkaBroker是无状态的，这意味着消费者必须通过使用分区偏移来维护已经消耗了多少消息。 如果消费者确认特定的消息偏移，则意味着消费者已经消费了所有先前的消息。 消费者向Broker发出异步拉取请求，以具有准备好消耗的字节缓冲区。 消费者可以简单地通过提供偏移值来快退或跳到分区中的任何点。 消费者偏移值由ZooKeeper通知。</li></ul><h2 id="四、流程"><a href="#四、流程" class="headerlink" title="四、流程"></a>四、流程</h2><h3 id="4-1-发布订阅消息传递的工作流"><a href="#4-1-发布订阅消息传递的工作流" class="headerlink" title="4.1 发布订阅消息传递的工作流"></a>4.1 发布订阅消息传递的工作流</h3><ul><li>生产者定期向主题发送消息。</li><li>Kafka代理存储为该特定主题配置的分区中的所有消息。 它确保消息在分区之间平等共享。 如果生产者发送两个消息并且有两个分区，Kafka将在第一分区中存储一个消息，在第二分区中存储第二消息。</li><li>消费者订阅特定主题。</li><li>一旦消费者订阅主题，Kafka将向消费者提供主题的当前偏移，并且还将偏移保存在Zookeeper系综中。</li><li>消费者将定期请求Kafka(如100 Ms)新消息。</li><li>一旦Kafka收到来自生产者的消息，它将这些消息转发给消费者。</li><li>消费者将收到消息并进行处理。</li><li>一旦消息被处理，消费者将向Kafka Broker发送确认。</li><li>一旦Kafka收到确认，它将偏移更改为新值，并在Zookeeper中更新它。 由于偏移在Zookeeper中维护，消费者可以正确地读取下一个消息，即使在服务器暴力期间。</li><li>以上流程将重复，直到消费者停止请求。</li><li>消费者可以随时回退/跳到所需的主题偏移量，并阅读所有后续消息</li></ul><h3 id="4-2-队列消息-x2F-用户组的工作流"><a href="#4-2-队列消息-x2F-用户组的工作流" class="headerlink" title="4.2 队列消息/用户组的工作流"></a>4.2 队列消息/用户组的工作流</h3><p>在队列消息传递系统而不是单个消费者中，具有相同组ID 的一组消费者将订阅主题。 简单来说，订阅具有相同 Group ID 的主题的消费者被认为是单个组，并且消息在它们之间共享。 让我们检查这个系统的实际工作流程。</p><ul><li>生产者定期向某个主题发送消息。</li><li>Kafka将所有消息存储在为该特定主题配置的分区中。</li><li>单个消费者订阅特定主题，假设 主题为Topic-01， Group ID 为 Group-1 。</li><li>Kafka以与发布 - 订阅消息相同的方式与消费者交互，直到新消费者以相同的组ID Group-1 订阅相同主题 Topic-01 。</li><li>一旦新消费者到达，Kafka将其操作切换到共享模式，并在两个消费者之间共享数据。 此共享将继续，直到用户数达到为该特定主题配置的分区数。</li><li>一旦消费者的数量超过分区的数量，新消费者将不会接收任何进一步的消息，直到现有消费者取消订阅任何一个消费者。 出现这种情况是因为 <strong>Kafka中的每个消费者将被分配至少一个分区，并且一旦所有分区被分配给现有消费者，新消费者将必须等待。</strong><br>这个功能被称为 <strong>消费群</strong>。 以同样的方式，Kafka将以非常简单和有效的方式提供这两个系统。</li></ul><h2 id="五、安装"><a href="#五、安装" class="headerlink" title="五、安装"></a>五、安装</h2><h3 id="Mac-环境"><a href="#Mac-环境" class="headerlink" title="Mac 环境"></a>Mac 环境</h3><ol><li>JDK8 环境安装</li></ol><pre class="line-numbers language-bash"><code class="language-bash">brew cask <span class="token function">install</span> homebrew/cask-versions/adoptopenjdk8<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>kafka 安装</li></ol><pre class="line-numbers language-bash"><code class="language-bash">brew <span class="token function">install</span> kafka<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  安装会依赖zookeeper。<br>  安装目录：/usr/local/Cellar/kafka/2.3.1</p><ol start="3"><li>配置文件位置：/usr/local/etc/kafka</li></ol><ul><li>/usr/local/etc/kafka/server.properties</li><li>/usr/local/etc/kafka/zookeeper.properties</li></ul><ol start="4"><li>启动zookeeper:</li></ol><pre class="line-numbers language-bash"><code class="language-bash">zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="5"><li>启动kafka:</li></ol><pre class="line-numbers language-bash"><code class="language-bash">kafka-server-start /usr/local/etc/kafka/server.properties<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  <strong>可以zookeeper和kafka一起启动</strong></p><pre class="line-numbers language-bash"><code class="language-bash">zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties <span class="token operator">&amp;</span> kafka-server-start /usr/local/etc/kafka/server.properties<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="6"><li>本地测试<blockquote><p> 启动zookeeper 和 kafka 后新开一个terminal window</p></blockquote></li></ol><ul><li>创建topic : 使用单个分区和只有一个副本创建一个名为“test”的主题</li></ul><pre class="line-numbers language-bash"><code class="language-bash">kafka-topics --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic <span class="token function">test</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>查看创建的topic</li></ul><pre class="line-numbers language-bash"><code class="language-bash">kafka-topics --list --zookeeper localhost:2181<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>生产消息</li></ul><pre class="line-numbers language-bash"><code class="language-bash">kafka-console-producer --broker-list localhost:9092 --topic <span class="token function">test</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>消费消息</li></ul><p>  新开一个terminal window 输入下方命令，然后再生产窗口输入消息</p><pre class="line-numbers language-bash"><code class="language-bash">kafka-console-consumer --bootstrap-server localhost:9092 --topic <span class="token function">test</span> --from-beginning<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  <img src="https://i.loli.net/2019/11/04/A9mjxtc7sGUL8Sh.png" alt="生产-消费"></p><h2 id="六、使用"><a href="#六、使用" class="headerlink" title="六、使用"></a>六、使用</h2><h3 id="PyKafka"><a href="#PyKafka" class="headerlink" title="PyKafka"></a>PyKafka</h3><p>  <a href="https://pykafka.readthedocs.io/en/latest/#">官方文档</a><br>  <a href="https://my.oschina.net/u/2263272/blog/788006">python通过Pykafka库来连接kafka并收发消息</a></p><p><strong>[参考资料]</strong></p><ul><li><a href="https://www.w3cschool.cn/apache_kafka/">w3cschool·Apache Kafka教程</a></li><li><a href="https://www.cnblogs.com/qingyunzong/p/9004509.html">Kafka学习之路（一）Kafka的简介</a></li><li><a href="https://blog.csdn.net/yuan_xw/article/details/51210954">Kafka教程(一)Kafka入门教程</a></li><li><a href="https://juejin.im/post/5d315daee51d4556bb4cd45a">Kafka基本架构和原理（学习点）</a></li><li><a href="https://www.jianshu.com/p/1f6387d18989">mac 安装kafka</a></li><li><a href="https://pykafka.readthedocs.io/en/latest/#">PyKafka官方文档</a><br><strong>[声明]</strong><br>资源源自网络，侵删！</li></ul>]]></content>
      
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Daily Tasks</title>
      <link href="/2019/10/19/daily-tasks/"/>
      <url>/2019/10/19/daily-tasks/</url>
      
        <content type="html"><![CDATA[<h2 id="25th-Oct"><a href="#25th-Oct" class="headerlink" title="25th Oct"></a>25th Oct</h2><blockquote><p><strong>You love me. I love you too! By RALX</strong></p></blockquote><ul><li><p><del>Memorying daily words, making sentence, speaking and recording it</del></p></li><li><p>Daily speaking practice, Respeaking and recording it, Summarising and writing down it</p></li><li><p><del>Reading a article, Speaking and recording it</del></p></li><li><p>Daily listening practice, with 40 minutes</p></li><li><p>Daily writing practice, task 1 or 2, write one or modify one</p></li></ul><h2 id="24th-Oct"><a href="#24th-Oct" class="headerlink" title="24th Oct"></a>24th Oct</h2><blockquote><p><strong>You love me. I love you too! By RALX</strong></p></blockquote><ul><li><p><del>Memorying daily words, making sentence, speaking and recording it</del></p></li><li><p>Daily speaking practice, Respeaking and recording it, Summarising and writing down it</p></li><li><p><del>Reading a article, Speaking and recording it</del></p></li><li><p>Daily listening practice, with 40 minutes</p></li><li><p>Daily writing practice, task 1 or 2, write one or modify one</p></li></ul><h2 id="20th-Oct"><a href="#20th-Oct" class="headerlink" title="20th Oct"></a>20th Oct</h2><blockquote><p><strong>You love me. I love you too! By RALX</strong></p></blockquote><ul><li><p><del>Memorying daily words, making sentence, speaking and recording it</del></p></li><li><p>Daily speaking practice, Respeaking and recording it, Summarising and writing down it</p></li><li><p><del>Reading a article, Speaking and recording it</del></p></li></ul><p><audio controls="controls" preload="auto"><br><source src="https://www.joy127.com/url/2611.mp3" type="audio/mpeg"><br></audio></p><ul><li><p><del>Daily listening practice, with 40 minutes</del></p></li><li><p>Daily writing practice, task 1 or 2, write one or modify one</p></li></ul><h2 id="19th-Oct"><a href="#19th-Oct" class="headerlink" title="19th Oct"></a>19th Oct</h2><blockquote><p><strong>You love me. I love you too! By RALX</strong></p></blockquote><ul><li><p>Memorying daily words, making sentence, speaking and recording it</p></li><li><p>Daily speaking practice, Respeaking and recording it, Summarising and writing down it</p></li><li><p>Reading a article, Speaking and recording it</p></li><li><p>Daily listening practice, with 40 minutes</p></li><li><p>~~ Daily writing practice, task 1 or 2, write one or modify one~~</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>IELTS Reading</title>
      <link href="/2019/10/18/ielts-reading/"/>
      <url>/2019/10/18/ielts-reading/</url>
      
        <content type="html"><![CDATA[<h3 id="The-Economist"><a href="#The-Economist" class="headerlink" title="The Economist"></a>The Economist</h3><ul><li><a href="https://psv4.userapi.com/c848328/u510634745/docs/d8/9d641e6a5169/The_Economist_Intelligence_Unit_-_Accelerated_Business_2019.pdf?extra=1FqBzqZI7bz3V3xxahidGhb2AjHHy0gSumzy1tFxi-dHesIUlF2BS3X2aOV2_IZ1LkutcZGM48I53XeUh-N-0VnsWWMMSH0STlbxkATs1TesuoZ23KysM-b_2hMtpRZ5x-V632VB-wtNVw">The Economist (Intelligence Unit) - Accelerated Business (2019)</a></li></ul><h3 id="New-Yorker"><a href="#New-Yorker" class="headerlink" title="New Yorker"></a>New Yorker</h3><ul><li><a href="https://vk.com/doc510634745_518288289?hash=0b53650d6c55984163&amp;dl=GQZDGNBSGQ2DGNQ:1570002493:4b93b24ea6c6d60edb&amp;api=1&amp;no_preview=1">The New Yorker – October 07, 2019</a></li></ul><h3 id="New-Scientists"><a href="#New-Scientists" class="headerlink" title="New Scientists"></a>New Scientists</h3><ul><li><a href="https://vk.com/doc16929061_437676087?hash=90287edb7f0180e330&amp;dl=147465556559d866636c9f2ad547&amp;api=1">New Developments in Science and Technology Education</a></li></ul><h3 id="Scientific-American"><a href="#Scientific-American" class="headerlink" title="Scientific American"></a>Scientific American</h3><ul><li><a href="https://vk.com/doc479697494_490734088?hash=5c5dfc02d75abdb37f&amp;dl=GQ4TONRUGAZTG:1549131162:26cea1dc0c51bf925e&amp;api=1&amp;no_preview=1">Scientific American – 02.2019</a></li></ul><h3 id="Time"><a href="#Time" class="headerlink" title="Time"></a>Time</h3><ul><li><a href="https://vk.com/doc510634745_519616996?hash=449643eca10f3d37c8&amp;dl=GQZDGNBSGQ2DGNQ:1571037765:0317b9ef06d1ac05e0&amp;api=1&amp;no_preview=1">Time USA – October 21, 2019</a></li></ul><h3 id="USA-today"><a href="#USA-today" class="headerlink" title="USA today"></a>USA today</h3><ul><li><a href="https://vk.com/doc479697494_490446043?hash=be7ea58ca22ebc197c&amp;dl=GQ4TONRUGAZTG:1549131345:00863bb57a38f44d5a&amp;api=1&amp;no_preview=1">USA Today – 25.01.2019 – 27.01.2019</a></li></ul><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul><li><a href="http://www.magazinelib.com/">http://www.magazinelib.com</a></li></ul><blockquote><p>声明：资源源自网络，侵删</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> English </tag>
            
            <tag> IELTS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Useful Articles</title>
      <link href="/2019/10/18/useful-articles/"/>
      <url>/2019/10/18/useful-articles/</url>
      
        <content type="html"><![CDATA[<h2 id="待学"><a href="#待学" class="headerlink" title="待学"></a>待学</h2><blockquote><p>无聊了就来学习学习吧！</p></blockquote><ul><li><p><a href="https://scrapy-chs.readthedocs.io/zh_CN/1.0/topics/shell.html">Scrapy终端(Scrapy shell)</a></p></li><li><p><a href="https://gywbd.github.io/posts/2014/8/50-linux-commands.html">50个最常用的Unix/Linux命令 2</a></p></li><li><p><a href="https://www.cnblogs.com/xrq730/p/6424471.html">Java回调机制解读</a></p></li><li><p><a href="https://www.baidu.com/link?url=chpWO1Npk0jfHwy5oxmK8CrCQlmNGCYQy7CjnZrt5iCcvUnQWm3NRFpWDfkXmiw_&amp;wd=&amp;eqid=ba9beadd002a0b5f000000035dad5d43">由浅入深剖析 go channel</a></p></li><li><p><a href="https://blog.csdn.net/K346K346/article/details/50487127">IEEE754 浮点数的表示方法</a></p></li><li><p><a href="https://www.cnblogs.com/liang1101/p/7285955.html">Golang 之协程详解</a></p></li><li><p><a href="https://www.baidu.com/link?url=y48M3MLmVWYkY2PTQSmdkbHjMcTce0B7QtET7PPrK5fHb0FucurVa2ZH8HTg2CiTbKxhAeFKojMokyBBm0msLK&amp;wd=&amp;eqid=c83b511500008094000000035dac2d04"> Linux操作系统Shell</a></p></li><li><p><a href="http://3iter.com/2015/10/14/Mathjax%E4%B8%8ELaTex%E5%85%AC%E5%BC%8F%E7%AE%80%E4%BB%8B/">Mathjax与LaTex公式简介</a></p></li><li><p><a href="https://www.cnblogs.com/chenpingzhao/p/5043746.html">【linux】spinlock 的实现</a></p></li><li><p><a href="https://charlesliuyx.github.io/2018/10/11/%E3%80%90%E7%9B%B4%E8%A7%82%E7%AE%97%E6%B3%95%E3%80%91Egg%20Puzzle%20%E9%B8%A1%E8%9B%8B%E9%9A%BE%E9%A2%98/">【直观算法】Egg Puzzle 鸡蛋难题</a></p></li><li><p><a href="https://charlesliuyx.github.io/2018/03/03/%E3%80%90%E5%8C%BA%E5%9D%97%E9%93%BE%E3%80%91%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E6%8B%9C%E5%8D%A0%E5%BA%AD%E5%B0%86%E5%86%9B%E9%97%AE%E9%A2%98/">共识算法与如何解决拜占庭将军问题</a></p></li></ul><h2 id="已学"><a href="#已学" class="headerlink" title="已学"></a>已学</h2><ul><li><p><del><a href="https://zed058.cn/code/dev/springboot-00%E8%AF%BE%E5%89%8D%E5%87%86%E5%A4%87.html#_1%E3%80%81spring-boot-%E7%AE%80%E4%BB%8B">Spring Boot 简介-稀客大大</a></del></p></li><li><p>~<a href="https://www.imooc.com/learn/945">SpringBoot+MyBatis搭建迷你小程序</a></p></li><li><p><del><a href="https://www.zhihu.com/question/28551135">为什么0.1+0.2=0.30000000000000004而1.1+2.2=3.3000000000000003？</a></del></p></li><li><p><del><a href="https://www.cnblogs.com/0201zcr/p/4694945.html">HTTP长连接和短连接</a></del></p></li><li><p><del><a href="https://blog.csdn.net/daniel_ice/article/details/6857019">数组名和数组名取地址的区别</a></del></p></li><li><p><del><a href="https://www.cnblogs.com/hongcha717/archive/2010/10/24/1859780.html">数组指针和指针数组的区别</a></del></p></li></ul><h2 id="爬虫"><a href="#爬虫" class="headerlink" title="爬虫"></a>爬虫</h2><ul><li><p><a href="https://blog.csdn.net/blueheart20/article/details/80215753">Scrapy中诡异xpath的匹配内容失效问题分析</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/34035463">scrapy中settings参数的使用详解</a></p></li></ul><h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><blockquote><p>Python是一种广泛使用的解释型、高级编程、通用型编程语言，由吉多·范罗苏姆创造，第一版发布于1991年。可以视之为一种改良的LISP。Python的设计哲学强调代码的可读性和简洁的语法。相比于C++或Java，Python让开发者能够用更少的代码表达想法。</p></blockquote><ul><li><p><a href="https://paste.ubuntu.com/p/gHdyYtfsJB/">安装python3.7时候，报错ModuleNotFoundError: No module named ‘_ctypes’</a></p></li><li><p><a href="http://einverne.github.io/post/2017/04/pyenv.html">使用 pyenv 管理 Python 版本</a></p></li><li><p><a href="https://www.cnblogs.com/yyds/p/6263957.html">Python之函数进阶</a></p></li><li><p><a href="https://www.cnblogs.com/yyds/p/6281453.html">Python之列表生成式、生成器、可迭代对象与迭代器</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/33896402">python有趣的解包用法</a></p></li><li><p><a href="https://foofish.net/python-decorator.html">理解 Python 装饰器看这一篇就够了</a></p></li><li><p><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017502538658208">Python 使用@property</a></p></li><li><p><a href="https://cloud.tencent.com/developer/article/1175298">python 软件目录结构规范</a></p></li><li><p><a href="https://blog.csdn.net/u012609509/article/details/72911564">Python 中 with用法及原理</a></p></li><li><p><a href="https://juejin.im/post/5bc2bd3a5188255c94465d31">Python日志库logging总结</a></p></li><li><p><a href="http://blog.xiayf.cn/2013/03/30/argparse/">argparse - 命令行选项与参数解析（译）</a></p></li></ul><h2 id="Spark"><a href="#Spark" class="headerlink" title="Spark"></a>Spark</h2><blockquote><p>Apache Spark是一个开源集群运算框架，最初是由加州大学柏克莱分校AMPLab所开发。相对于Hadoop的MapReduce会在运行完工作后将中介数据存放到磁盘中，Spark使用了存储器内运算技术，能在数据尚未写入硬盘时即在存储器内分析运算。</p></blockquote><ul><li><a href="https://spark.apache.org/docs/latest/configuration.html">Spark Configuration</a></li></ul><h2 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h2><blockquote><p>Hexo是一款基于Node.js的静态博客框架，依赖少易于安装使用，可以方便的生成静态网页托管在GitHub和Heroku上，是搭建博客的首选框架。</p></blockquote><ul><li><p><a href="https://novnan.github.io/Hexo/hexo-draft/">Hexo 文章保存为草稿</a></p></li><li><p><a href="https://www.zhihu.com/question/21193762">使用hexo，如果换了电脑怎么更新博客？</a></p></li></ul><h2 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h2><blockquote><p>Markdown是一种轻量级标记语言，创始人为约翰·格鲁伯。它允许人们“使用易读易写的纯文本格式编写文档，然后转换成有效的XHTML文档”。这种语言吸收了很多在电子邮件中已有的纯文本标记的特性。</p></blockquote><ul><li><a href="https://www.zybuluo.com/mdeditor">Markdown语法</a></li></ul><h2 id="分布式消息订阅系统Kafka"><a href="#分布式消息订阅系统Kafka" class="headerlink" title="分布式消息订阅系统Kafka"></a>分布式消息订阅系统Kafka</h2><blockquote><p>Kafka是由Apache软件基金会开发的一个开源流处理平台，由Scala和Java编写。该项目的目标是为处理实时数据提供一个统一、高吞吐、低延迟的平台。其持久化层本质上是一个“按照分布式事务日志架构的大规模发布/订阅消息队列”，这使它作为企业级基础设施来处理流式数据非常有价值。</p></blockquote><ul><li><a href="https://www.orchome.com/kafka/index">kafka中文教程</a></li></ul><h2 id="消息通信机制"><a href="#消息通信机制" class="headerlink" title="消息通信机制"></a>消息通信机制</h2><ul><li><a href="https://zhuanlan.zhihu.com/p/25638474">如何理解阻塞、非阻塞与同步、异步的区别？</a></li></ul><h2 id="regex-正则表达式"><a href="#regex-正则表达式" class="headerlink" title="regex 正则表达式"></a>regex 正则表达式</h2><blockquote><p>正则表达式，又称正则表示式、正则表示法、规则表达式、常规表示法，是计算机科学的一个概念。正则表达式使用单个字符串来描述、匹配一系列符合某个句法规则的字符串。在很多文本编辑器里，正则表达式通常被用来检索、替换那些符合某个模式的文本。 许多程序设计语言都支持利用正则表达式进行字符串操作</p></blockquote><ul><li><p><a href="https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md">learning regex</a></p></li><li><p><a href="https://www.zhihu.com/question/48219401/answer/126713858">你是如何学会正则表达式的？</a></p></li><li><p><a href="http://www.cppblog.com/vczh/archive/2008/05/22/50763.html">《构造正则表达式引擎》新鲜出炉啦！2 doc</a></p></li></ul><h2 id="htop"><a href="#htop" class="headerlink" title="htop"></a>htop</h2><blockquote><p>htop是一个基于ncurses的程序，用于查看运行Linux的系统中的进程。htop与top命令非常相似</p></blockquote><ul><li><a href="https://www.softprayog.in/tutorials/htop-command-in-linux">htop command in Linux</a></li><li><a href="https://www.cnblogs.com/lizhenghn/p/3728610.html">Linux下超级命令htop的学习使用</a></li><li><a href="https://www.jianshu.com/p/5629e331f58d">Htop在Centos7的安装</a></li></ul><h2 id="git"><a href="#git" class="headerlink" title="git"></a>git</h2><blockquote><p>git是一个分布式版本控制软件，最初由林纳斯·托瓦兹创作，于2005年以GPL发布。最初目的是为更好地管理Linux内核开发而设计。</p></blockquote><ul><li><a href="https://blog.csdn.net/weixin_39800144/article/details/78205617">git clone 指定分支 拉代码</a></li></ul><h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><blockquote><p>Vim（Vi[Improved]）编辑器是功能强大的跨平台文本文件编辑工具，继承自Unix系统的Vi编辑器，支持Linux/Mac OS X/Windows系统，利用它可以建立、修改文本文件</p></blockquote><ul><li><a href="https://www.jianshu.com/p/bcbe916f97e1">Vim入门基础</a></li><li><a href="https://my.oschina.net/joshuazhan/blog/122539">Vim粘贴代码时缩进混乱</a></li><li><a href="https://juejin.im/post/5a38c37f6fb9a0450909a151">vim进阶 | 使用插件打造实用vim工作环境, Vundle:目录树，补全，配色等</a></li><li><a href="https://vimjc.com/vim-color-schemes.html">15个著名的Vim配色方案整理-Vim入门教程(7)</a></li><li><a href="https://cloud.tencent.com/developer/article/1404057">设置vim 永久显示行号</a></li></ul><h2 id="multiprocessing"><a href="#multiprocessing" class="headerlink" title="multiprocessing"></a>multiprocessing</h2><blockquote><p>python3 multiprocessing (内置不需安装)是一个使用类似于该threading模块的API支持生成过程的软件包。该multiprocessing程序包提供了本地和远程并发性，通过使用子进程而不是线程来有效地避开了 全局解释器锁。因此，该multiprocessing模块允许程序员在给定机器上充分利用多个处理器。它可以在Unix和Windows上运行。</p></blockquote><ul><li><a href="https://docs.python.org/3.6/library/multiprocessing.html">官网</a></li><li><a href="https://www.cnblogs.com/kaituorensheng/p/4445418.html">Python多进程编程</a></li><li><a href="https://www.cnblogs.com/DarrenChan/p/7930878.html">聊聊Python中的多进程和多线程</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> htop </tag>
            
            <tag> vim </tag>
            
            <tag> multiprocessing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The ways to convert Jupyter(.ipynb) to Python(.py), HTML(.html), Markdown(.md) or PDF(.pdf)</title>
      <link href="/2019/10/18/the-ways-to-convert-jupyter-ipynb-to-python-py-html-html-markdown-md-or-pdf-pdf/"/>
      <url>/2019/10/18/the-ways-to-convert-jupyter-ipynb-to-python-py-html-html-markdown-md-or-pdf-pdf/</url>
      
        <content type="html"><![CDATA[<h2 id="nbconvert"><a href="#nbconvert" class="headerlink" title="nbconvert"></a>nbconvert</h2><blockquote><p>首先我们需要安装ipython 和 nbconvert 库</p></blockquote><ul><li>pip install ipython</li><li>pip install nbconvert</li></ul><h2 id="ipynb-gt-py"><a href="#ipynb-gt-py" class="headerlink" title="ipynb -> py"></a>ipynb -&gt; py</h2><p>single file:</p><ul><li>ipython nbconvert — to script test.ipynb</li></ul><p>multi files:</p><ul><li>ipython nbconvert — to script test1.ipynb test2.ipynb</li></ul><h2 id="ipynb-gt-html"><a href="#ipynb-gt-html" class="headerlink" title="ipynb -> html"></a>ipynb -&gt; html</h2><ul><li>jupyter nbconvert –to html notebook.ipynb<br>or</li><li>jupyter nbconvert –to html –template basic/full notebook.ipynb</li></ul><h2 id="ipynb-gt-md"><a href="#ipynb-gt-md" class="headerlink" title="ipynb -> md"></a>ipynb -&gt; md</h2><ul><li>jupyter nbconvert –to md notebook.ipynb</li></ul><h2 id="ipynb-gt-pdf"><a href="#ipynb-gt-pdf" class="headerlink" title="ipynb -> pdf"></a>ipynb -&gt; pdf</h2><ul><li>jupyter nbconvert –to pdf notebook.ipynb</li></ul><blockquote><p>如果错了可以试一试安装下面这个包，大小1G多，所以还是算了吧</p></blockquote><p>~~ + sudo apt-get install texlive-full ~~</p><h2 id="graphical-interface-operation"><a href="#graphical-interface-operation" class="headerlink" title="graphical interface operation"></a>graphical interface operation</h2><img src="https://i.loli.net/2019/10/18/zaBhRow1D7X4JgW.png" width="50%" height="50%"><!-- ![](https://i.loli.net/2019/10/18/zaBhRow1D7X4JgW.png) --><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><blockquote><ol><li><a href="https://medium.com/@researchplex/the-easiest-way-to-convert-jupyter-ipynb-to-python-py-912e39f16917">The easiest way to convert Jupyter(.ipynb) to Python(.py)</a></li><li><a href="https://blog.csdn.net/red_stone1/article/details/73380517">如何将ipynb转换为html，md，pdf等格式</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
            <tag> Jupyter Notebook </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Some websites for loading files to generate a link</title>
      <link href="/2019/10/16/some-websites-for-loading-files-to-generate-a-link/"/>
      <url>/2019/10/16/some-websites-for-loading-files-to-generate-a-link/</url>
      
        <content type="html"><![CDATA[<h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><ol><li>SM.MS<br><a href="https://sm.ms/">https://sm.ms/</a></li></ol><h2 id="音乐"><a href="#音乐" class="headerlink" title="音乐"></a>音乐</h2><ol><li><p>Gimhoy 音乐盘<br><a href="https://music.gimhoy.com/">https://music.gimhoy.com/</a></p></li><li><p>JOY127.com<br><a href="https://www.joy127.com/">https://www.joy127.com/</a></p></li></ol><h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><h2 id="pdf"><a href="#pdf" class="headerlink" title="pdf"></a>pdf</h2><ol><li>石墨文档<br><a href="https://shimo.im/welcome">https://shimo.im/welcome</a><br>需要注册然后建立一个文档，添加pdf文件，然后就可以复制显示的下载按钮的链接</li></ol><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p><a href="https://hao.su/1253/">https://hao.su/1253/</a></p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Image manipulation and processing using Python Modules and Packages</title>
      <link href="/2019/10/14/image-manipulation-and-processing-using-python-modules-and-packages/"/>
      <url>/2019/10/14/image-manipulation-and-processing-using-python-modules-and-packages/</url>
      
        <content type="html"><![CDATA[<h2 id="混杂知识点"><a href="#混杂知识点" class="headerlink" title="混杂知识点"></a>混杂知识点</h2><h3 id="1-包，模块，库的区分"><a href="#1-包，模块，库的区分" class="headerlink" title="1. 包，模块，库的区分"></a>1. 包，模块，库的区分</h3><ul><li><p>package：就是个带 <strong>init</strong>.py 的文件夹，并不在乎里面有什么，不过一般来讲会包含一些 packages/modules</p></li><li><p>module：一个 .py 文件就是个 module</p></li><li><p>lib：抽象概念，和另外两个不是一类，只要你喜欢，什么都是 lib，就算只有个 hello world, scrapy、flask、Django、numpy、scipy、NLTK、jieba，一般都被认为是 lib，因为关注点不是他们的代码是怎么组织的。</p></li></ul><h3 id="2-图片格式转换"><a href="#2-图片格式转换" class="headerlink" title="2. 图片格式转换"></a>2. 图片格式转换</h3><h4 id="Numpy-array-lt-x3D-gt-PIL-Image"><a href="#Numpy-array-lt-x3D-gt-PIL-Image" class="headerlink" title="Numpy.array <=> PIL.Image"></a>Numpy.array &lt;=&gt; PIL.Image</h4><p><a href="https://blog.csdn.net/liuweizj12/article/details/80221537">source</a></p><ul><li>Numpy.array =&gt; PIL.Image : img = Image.fromarray(img)</li><li>PIL.Image =&gt; Numpy.array : img = np.array(img)</li></ul><h4 id="PIL-Image-x3D-gt-Bytes"><a href="#PIL-Image-x3D-gt-Bytes" class="headerlink" title="PIL.Image => Bytes:"></a>PIL.Image =&gt; Bytes:</h4><p><a href="https://stackoverflow.com/a/56055505/12214101">source</a></p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">import</span> io<span class="token keyword">def</span> <span class="token function">image_to_byte_array</span><span class="token punctuation">(</span>image<span class="token punctuation">:</span>Image<span class="token punctuation">)</span><span class="token punctuation">:</span>  imgByteArr <span class="token operator">=</span> io<span class="token punctuation">.</span>BytesIO<span class="token punctuation">(</span><span class="token punctuation">)</span>  image<span class="token punctuation">.</span>save<span class="token punctuation">(</span>imgByteArr<span class="token punctuation">,</span> format<span class="token operator">=</span>image<span class="token punctuation">.</span>format<span class="token punctuation">)</span>  imgByteArr <span class="token operator">=</span> imgByteArr<span class="token punctuation">.</span>getvalue<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> imgByteArr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Bytes-x3D-gt-Numpy-array"><a href="#Bytes-x3D-gt-Numpy-array" class="headerlink" title="Bytes => Numpy.array"></a>Bytes =&gt; Numpy.array</h4><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> requests<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltimg <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>contentimg <span class="token operator">=</span> plt<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>BytesIO<span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"jpg"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="GIF-x3D-x3D-gt-PNG"><a href="#GIF-x3D-x3D-gt-PNG" class="headerlink" title="GIF ==> PNG"></a>GIF ==&gt; PNG</h4><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">iter_frames</span><span class="token punctuation">(</span>gif<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        i<span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>            gif<span class="token punctuation">.</span>seek<span class="token punctuation">(</span>i<span class="token punctuation">)</span>            imframe <span class="token operator">=</span> gif<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                palette <span class="token operator">=</span> imframe<span class="token punctuation">.</span>getpalette<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                imframe<span class="token punctuation">.</span>putpalette<span class="token punctuation">(</span>palette<span class="token punctuation">)</span>            <span class="token keyword">yield</span> imframe            i <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">except</span> EOFError<span class="token punctuation">:</span>        <span class="token keyword">pass</span><span class="token comment" spellcheck="true"># http://cn.voidcc.com/question/p-ecfkyjoi-bks.html</span><span class="token comment" spellcheck="true"># Bytes to GIF</span><span class="token comment" spellcheck="true"># url = 'xxx'</span><span class="token comment" spellcheck="true"># gif = Image.open(BytesIO(requests.get(url).content)))</span>gif <span class="token operator">=</span> Image<span class="token punctuation">.</span>open<span class="token punctuation">(</span><span class="token string">'captcha.gif'</span><span class="token punctuation">)</span><span class="token keyword">for</span> i<span class="token punctuation">,</span> frame <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>iter_frames<span class="token punctuation">(</span>gif<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-分离文件名与扩展名"><a href="#3-分离文件名与扩展名" class="headerlink" title="3. 分离文件名与扩展名"></a>3. 分离文件名与扩展名</h4><p><a href="https://blog.csdn.net/u011509971/article/details/70244688">source</a></p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> ospath_01<span class="token operator">=</span><span class="token string">'D:/User/wgy/workplace/data/notMNIST_large.tar.png'</span>path_02<span class="token operator">=</span><span class="token string">'D:/User/wgy/workplace/data/notMNIST_large'</span>root_01<span class="token operator">=</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>splitext<span class="token punctuation">(</span>path_01<span class="token punctuation">)</span>root_02<span class="token operator">=</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>splitext<span class="token punctuation">(</span>path_02<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>root_01<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>root_02<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>结果：</p><pre><code>('D:/User/wgy/workplace/data/notMNIST_large.tar', '.png')('D:/User/wgy/workplace/data/notMNIST_large', '')</code></pre><h2 id="Numpy"><a href="#Numpy" class="headerlink" title="Numpy"></a>Numpy</h2><h2 id="PIL"><a href="#PIL" class="headerlink" title="PIL"></a>PIL</h2><h2 id="Scipy"><a href="#Scipy" class="headerlink" title="Scipy"></a>Scipy</h2><h2 id="Open-cv"><a href="#Open-cv" class="headerlink" title="Open-cv"></a>Open-cv</h2>]]></content>
      
      
      <categories>
          
          <category> CV </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CV </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP response status codes</title>
      <link href="/2019/10/11/http-response-status-codes/"/>
      <url>/2019/10/11/http-response-status-codes/</url>
      
        <content type="html"><![CDATA[<p>HTTP 响应状态代码指示特定 HTTP 请求是否已成功完成。响应分为五类：信息响应(100–199)，成功响应(200–299)，重定向(300–399)，客户端错误(400–499)和服务器错误 (500–599)。状态代码由 <a href="https://tools.ietf.org/html/rfc2616#section-10">section 10 of RFC 2616</a>定义</p><hr><h2 id="信息响应-1XX"><a href="#信息响应-1XX" class="headerlink" title="信息响应 1XX"></a>信息响应 1XX</h2><h3 id="100-Continue"><a href="#100-Continue" class="headerlink" title="100 Continue"></a>100 Continue</h3><p>这个临时响应表明，迄今为止的所有内容都是可行的，客户端应该继续请求，如果已经完成，则忽略它。</p><h3 id="101-Switching-Protocol"><a href="#101-Switching-Protocol" class="headerlink" title="101 Switching Protocol"></a>101 Switching Protocol</h3><p>该代码是响应客户端的 Upgrade 标头发送的，并且指示服务器也正在切换的协议。</p><h3 id="102-Processing-WebDAV"><a href="#102-Processing-WebDAV" class="headerlink" title="102 Processing (WebDAV)"></a>102 Processing (WebDAV)</h3><p>此代码表示服务器已收到并正在处理该请求，但没有响应可用。</p><h3 id="103-Early-Hints"><a href="#103-Early-Hints" class="headerlink" title="103 Early Hints"></a>103 Early Hints</h3><p>此状态代码主要用于与Link 链接头一起使用，以允许用户代理在服务器仍在准备响应时开始预加载资源。</p><hr><h2 id="成功响应-2XX"><a href="#成功响应-2XX" class="headerlink" title="成功响应 2XX"></a>成功响应 2XX</h2><h3 id="200-OK"><a href="#200-OK" class="headerlink" title="200 OK"></a>200 OK</h3><p>请求成功。成功的含义取决于HTTP方法：</p><ul><li>GET：资源已被提取并在消息正文中传输。</li><li>HEAD：实体标头位于消息正文中。</li><li>POST：描述动作结果的资源在消息体中传输。</li><li>TRACE：消息正文包含服务器收到的请求消息</li></ul><h3 id="201-Created"><a href="#201-Created" class="headerlink" title="201 Created"></a>201 Created</h3><p>该请求已成功，并因此创建了一个新的资源。这通常是在POST请求，或是某些PUT请求之后返回的响应。</p><h3 id="202-Accepted"><a href="#202-Accepted" class="headerlink" title="202 Accepted"></a>202 Accepted</h3><p>请求已经接收到，但还未响应，没有结果。意味着不会有一个异步的响应去表明当前请求的结果，预期另外的进程和服务去处理请求，或者批处理。</p><h3 id="203-Non-Authoritative-Information"><a href="#203-Non-Authoritative-Information" class="headerlink" title="203 Non-Authoritative Information"></a>203 Non-Authoritative Information</h3><p>服务器已成功处理了请求，但返回的实体头部元信息不是在原始服务器上有效的确定集合，而是来自本地或者第三方的拷贝。当前的信息可能是原始版本的子集或者超集。例如，包含资源的元数据可能导致原始服务器知道元信息的超集。使用此状态码不是必须的，而且只有在响应不使用此状态码便会返回200 OK的情况下才是合适的。</p><h3 id="204-No-Content"><a href="#204-No-Content" class="headerlink" title="204 No Content"></a>204 No Content</h3><p>服务器成功处理了请求，但不需要返回任何实体内容，并且希望返回更新了的元信息。响应可能通过实体头部的形式，返回新的或更新后的元信息。如果存在这些头部信息，则应当与所请求的变量相呼应。如果客户端是浏览器的话，那么用户浏览器应保留发送了该请求的页面，而不产生任何文档视图上的变化，即使按照规范新的或更新后的元信息应当被应用到用户浏览器活动视图中的文档。由于204响应被禁止包含任何消息体，因此它始终以消息头后的第一个空行结尾。</p><h3 id="205-Reset-Content"><a href="#205-Reset-Content" class="headerlink" title="205 Reset Content"></a>205 Reset Content</h3><p>服务器成功处理了请求，且没有返回任何内容。但是与204响应不同，返回此状态码的响应要求请求者重置文档视图。该响应主要是被用于接受用户输入后，立即重置表单，以便用户能够轻松地开始另一次输入。与204响应一样，该响应也被禁止包含任何消息体，且以消息头后的第一个空行结束。</p><h3 id="206-Partial-Content"><a href="#206-Partial-Content" class="headerlink" title="206 Partial Content"></a>206 Partial Content</h3><p>服务器已经成功处理了部分 GET 请求。类似于 FlashGet 或者迅雷这类的 HTTP 下载工具都是使用此类响应实现断点续传或者将一个大文档分解为多个下载段同时下载。该请求必须包含 Range 头信息来指示客户端希望得到的内容范围，并且可能包含 If-Range 来作为请求条件。</p><h3 id="207-Multi-Status-WebDAV"><a href="#207-Multi-Status-WebDAV" class="headerlink" title="207 Multi-Status (WebDAV)"></a>207 Multi-Status (WebDAV)</h3><p>由WebDAV(RFC 2518)扩展的状态码，代表之后的消息体将是一个XML消息，并且可能依照之前子请求数量的不同，包含一系列独立的响应代码。</p><h3 id="208-Multi-Status-WebDAV"><a href="#208-Multi-Status-WebDAV" class="headerlink" title="208 Multi-Status (WebDAV)"></a>208 Multi-Status (WebDAV)</h3><p>在 DAV 里面使用: propstat 响应元素以避免重复枚举多个绑定的内部成员到同一个集合。</p><h3 id="226-IM-Used-HTTP-Delta-encoding"><a href="#226-IM-Used-HTTP-Delta-encoding" class="headerlink" title="226 IM Used (HTTP Delta encoding)"></a>226 IM Used (HTTP Delta encoding)</h3><p>服务器已经完成了对资源的 GET 请求，并且响应是对当前实例应用的一个或多个实例操作结果的表示。</p><hr><h2 id="重定向-3XX"><a href="#重定向-3XX" class="headerlink" title="重定向 3XX"></a>重定向 3XX</h2><h3 id="300-Multiple-Choice"><a href="#300-Multiple-Choice" class="headerlink" title="300 Multiple Choice"></a>300 Multiple Choice</h3><p>被请求的资源有一系列可供选择的回馈信息，每个都有自己特定的地址和浏览器驱动的商议信息。用户或浏览器能够自行选择一个首选的地址进行重定向。</p><h3 id="301-Moved-Permanently"><a href="#301-Moved-Permanently" class="headerlink" title="301 Moved Permanently"></a>301 Moved Permanently</h3><p>被请求的资源已永久移动到新位置，并且将来任何对此资源的引用都应该使用本响应返回的若干个 URI 之一。如果可能，拥有链接编辑功能的客户端应当自动把请求的地址修改为从服务器反馈回来的地址。除非额外指定，否则这个响应也是可缓存的。</p><h3 id="302-Found"><a href="#302-Found" class="headerlink" title="302 Found"></a>302 Found</h3><p>请求的资源现在临时从不同的 URI 响应请求。由于这样的重定向是临时的，客户端应当继续向原有地址发送以后的请求。只有在Cache-Control或Expires中进行了指定的情况下，这个响应才是可缓存的。</p><h3 id="303-See-Other"><a href="#303-See-Other" class="headerlink" title="303 See Other"></a>303 See Other</h3><p>对应当前请求的响应可以在另一个 URI 上被找到，而且客户端应当采用 GET 的方式访问那个资源。这个方法的存在主要是为了允许由脚本激活的POST请求输出重定向到一个新的资源。</p><h3 id="304-Not-Modified"><a href="#304-Not-Modified" class="headerlink" title="304 Not Modified"></a>304 Not Modified</h3><p>如果客户端发送了一个带条件的 GET 请求且该请求已被允许，而文档的内容（自上次访问以来或者根据请求的条件）并没有改变，则服务器应当返回这个状态码。304 响应禁止包含消息体，因此始终以消息头后的第一个空行结尾。</p><h3 id="305-Use-Proxy"><a href="#305-Use-Proxy" class="headerlink" title="305 Use Proxy"></a>305 Use Proxy</h3><p>被请求的资源必须通过指定的代理才能被访问。Location 域中将给出指定的代理所在的 URI 信息，接收者需要重复发送一个单独的请求，通过这个代理才能访问相应资源。只有原始服务器才能建立305响应。</p><h3 id="306-unused"><a href="#306-unused" class="headerlink" title="306 unused"></a>306 unused</h3><p>在最新版的规范中，306 状态码已经不再被使用。</p><h3 id="307-Temporary-Redirect"><a href="#307-Temporary-Redirect" class="headerlink" title="307 Temporary Redirect"></a>307 Temporary Redirect</h3><p>请求的资源现在临时从不同的URI 响应请求。由于这样的重定向是临时的，客户端应当继续向原有地址发送以后的请求。只有在Cache-Control或Expires中进行了指定的情况下，这个响应才是可缓存的。</p><h3 id="308-Permanent-Redirect"><a href="#308-Permanent-Redirect" class="headerlink" title="308 Permanent Redirect"></a>308 Permanent Redirect</h3><p>这意味着资源现在永久位于由 Location: HTTP Response 标头指定的另一个 URI。 这与 301 Moved Permanently HTTP 响应代码具有相同的语义，但用户代理不能更改所使用的 HTTP 方法：如果在第一个请求中使用 POST，则必须在第二个请求中使用 POST。</p><hr><h2 id="客户端响应-4XX"><a href="#客户端响应-4XX" class="headerlink" title="客户端响应 4XX"></a>客户端响应 4XX</h2><h3 id="400-Bad-Request"><a href="#400-Bad-Request" class="headerlink" title="400 Bad Request"></a>400 Bad Request</h3><p>1、语义有误，当前请求无法被服务器理解。除非进行修改，否则客户端不应该重复提交这个请求。<br>2、请求参数有误。</p><h3 id="401-Unauthorized"><a href="#401-Unauthorized" class="headerlink" title="401 Unauthorized"></a>401 Unauthorized</h3><p>当前请求需要用户验证。该响应必须包含一个适用于被请求资源的 WWW-Authenticate 信息头用以询问用户信息。客户端可以重复提交一个包含恰当的 Authorization 头信息的请求。如果当前请求已经包含了 Authorization 证书，那么401响应代表着服务器验证已经拒绝了那些证书。如果401响应包含了与前一个响应相同的身份验证询问，且浏览器已经至少尝试了一次验证，那么浏览器应当向用户展示响应中包含的实体信息，因为这个实体信息中可能包含了相关诊断信息。</p><h3 id="402-Payment-Required"><a href="#402-Payment-Required" class="headerlink" title="402 Payment Required"></a>402 Payment Required</h3><p>此响应码保留以便将来使用，创造此响应码的最初目的是用于数字支付系统，然而现在并未使用。</p><h3 id="403-Forbidden"><a href="#403-Forbidden" class="headerlink" title="403 Forbidden"></a>403 Forbidden</h3><p>服务器已经理解请求，但是拒绝执行它。与 401 响应不同的是，身份验证并不能提供任何帮助，而且这个请求也不应该被重复提交。如果这不是一个 HEAD 请求，而且服务器希望能够讲清楚为何请求不能被执行，那么就应该在实体内描述拒绝的原因。当然服务器也可以返回一个 404 响应，假如它不希望让客户端获得任何信息。</p><h3 id="404-Not-Found"><a href="#404-Not-Found" class="headerlink" title="404 Not Found"></a>404 Not Found</h3><p>请求失败，请求所希望得到的资源未被在服务器上发现。没有信息能够告诉用户这个状况到底是暂时的还是永久的。假如服务器知道情况的话，应当使用410状态码来告知旧资源因为某些内部的配置机制问题，已经永久的不可用，而且没有任何可以跳转的地址。404这个状态码被广泛应用于当服务器不想揭示到底为何请求被拒绝或者没有其他适合的响应可用的情况下。</p><h3 id="405-Method-Not-Allowed"><a href="#405-Method-Not-Allowed" class="headerlink" title="405 Method Not Allowed"></a>405 Method Not Allowed</h3><p>请求行中指定的请求方法不能被用于请求相应的资源。该响应必须返回一个Allow 头信息用以表示出当前资源能够接受的请求方法的列表。 鉴于 PUT，DELETE 方法会对服务器上的资源进行写操作，因而绝大部分的网页服务器都不支持或者在默认配置下不允许上述请求方法，对于此类请求均会返回405错误。</p><h3 id="406-Not-Acceptable"><a href="#406-Not-Acceptable" class="headerlink" title="406 Not Acceptable"></a>406 Not Acceptable</h3><p>请求的资源的内容特性无法满足请求头中的条件，因而无法生成响应实体。</p><h3 id="407-Proxy-Authentication-Required"><a href="#407-Proxy-Authentication-Required" class="headerlink" title="407 Proxy Authentication Required"></a>407 Proxy Authentication Required</h3><p>与401响应类似，只不过客户端必须在代理服务器上进行身份验证。代理服务器必须返回一个 Proxy-Authenticate 用以进行身份询问。客户端可以返回一个 Proxy-Authorization 信息头用以验证。</p><h3 id="408-Request-Timeout"><a href="#408-Request-Timeout" class="headerlink" title="408 Request Timeout"></a>408 Request Timeout</h3><p>请求超时。客户端没有在服务器预备等待的时间内完成一个请求的发送。客户端可以随时再次提交这一请求而无需进行任何更改。</p><h3 id="409-Conflict"><a href="#409-Conflict" class="headerlink" title="409 Conflict"></a>409 Conflict</h3><p>由于和被请求的资源的当前状态之间存在冲突，请求无法完成。这个代码只允许用在这样的情况下才能被使用：用户被认为能够解决冲突，并且会重新提交新的请求。该响应应当包含足够的信息以便用户发现冲突的源头。</p><h3 id="410-Gone"><a href="#410-Gone" class="headerlink" title="410 Gone"></a>410 Gone</h3><p>被请求的资源在服务器上已经不再可用，而且没有任何已知的转发地址。这样的状况应当被认为是永久性的。如果可能，拥有链接编辑功能的客户端应当在获得用户许可后删除所有指向这个地址的引用。如果服务器不知道或者无法确定这个状况是否是永久的，那么就应该使用 404 状态码。除非额外说明，否则这个响应是可缓存的。</p><h3 id="411-Length-Required"><a href="#411-Length-Required" class="headerlink" title="411 Length Required"></a>411 Length Required</h3><p>服务器拒绝在没有定义 Content-Length 头的情况下接受请求。在添加了表明请求消息体长度的有效 Content-Length 头之后，客户端可以再次提交该请求。</p><h3 id="412-Precondition-Failed"><a href="#412-Precondition-Failed" class="headerlink" title="412 Precondition Failed"></a>412 Precondition Failed</h3><p>服务器在验证在请求的头字段中给出先决条件时，没能满足其中的一个或多个。这个状态码允许客户端在获取资源时在请求的元信息（请求头字段数据）中设置先决条件，以此避免该请求方法被应用到其希望的内容以外的资源上。</p><h3 id="413-Payload-Too-Large"><a href="#413-Payload-Too-Large" class="headerlink" title="413 Payload Too Large"></a>413 Payload Too Large</h3><p>服务器拒绝处理当前请求，因为该请求提交的实体数据大小超过了服务器愿意或者能够处理的范围。此种情况下，服务器可以关闭连接以免客户端继续发送此请求。如果这个状况是临时的，服务器应当返回一个 Retry-After 的响应头，以告知客户端可以在多少时间以后重新尝试。</p><h3 id="414-URI-Too-Long"><a href="#414-URI-Too-Long" class="headerlink" title="414 URI Too Long"></a>414 URI Too Long</h3><p>请求的URI 长度超过了服务器能够解释的长度，因此服务器拒绝对该请求提供服务。这比较少见，通常的情况包括：本应使用POST方法的表单提交变成了GET方法，导致查询字符串（Query String）过长。</p><h3 id="415-Unsupported-Media-Type"><a href="#415-Unsupported-Media-Type" class="headerlink" title="415 Unsupported Media Type"></a>415 Unsupported Media Type</h3><p>对于当前请求的方法和所请求的资源，请求中提交的实体并不是服务器中所支持的格式，因此请求被拒绝。</p><h3 id="416-Requested-Range-Not-Satisfiable"><a href="#416-Requested-Range-Not-Satisfiable" class="headerlink" title="416 Requested Range Not Satisfiable"></a>416 Requested Range Not Satisfiable</h3><p>如果请求中包含了 Range 请求头，并且 Range 中指定的任何数据范围都与当前资源的可用范围不重合，同时请求中又没有定义 If-Range 请求头，那么服务器就应当返回416状态码。</p><h3 id="417-Expectation-Failed"><a href="#417-Expectation-Failed" class="headerlink" title="417 Expectation Failed"></a>417 Expectation Failed</h3><p>此响应代码意味着服务器无法满足 Expect 请求标头字段指示的期望值。</p><h3 id="418-I’m-a-teapot"><a href="#418-I’m-a-teapot" class="headerlink" title="418 I’m a teapot"></a>418 I’m a teapot</h3><p>服务器拒绝尝试用 “茶壶冲泡咖啡”。</p><h3 id="421-Misdirected-Request"><a href="#421-Misdirected-Request" class="headerlink" title="421 Misdirected Request"></a>421 Misdirected Request</h3><p>该请求针对的是无法产生响应的服务器。 这可以由服务器发送，该服务器未配置为针对包含在请求 URI 中的方案和权限的组合产生响应。</p><h3 id="422-Unprocessable-Entity-WebDAV"><a href="#422-Unprocessable-Entity-WebDAV" class="headerlink" title="422 Unprocessable Entity (WebDAV)"></a>422 Unprocessable Entity (WebDAV)</h3><p>请求格式良好，但由于语义错误而无法遵循。</p><h3 id="423-Locked-WebDAV"><a href="#423-Locked-WebDAV" class="headerlink" title="423 Locked (WebDAV)"></a>423 Locked (WebDAV)</h3><p>正在访问的资源被锁定。</p><h3 id="424-Failed-Dependency-WebDAV"><a href="#424-Failed-Dependency-WebDAV" class="headerlink" title="424 Failed Dependency (WebDAV)"></a>424 Failed Dependency (WebDAV)</h3><p>由于先前的请求失败，所以此次请求失败。</p><h3 id="425-Too-Early"><a href="#425-Too-Early" class="headerlink" title="425 Too Early"></a>425 Too Early</h3><p>服务器不愿意冒着风险去处理可能重播的请求。</p><h3 id="426-Upgrade-Required"><a href="#426-Upgrade-Required" class="headerlink" title="426 Upgrade Required"></a>426 Upgrade Required</h3><p>服务器拒绝使用当前协议执行请求，但可能在客户机升级到其他协议后愿意这样做。 服务器在 426 响应中发送 Upgrade 头以指示所需的协议。</p><h3 id="428-Precondition-Required"><a href="#428-Precondition-Required" class="headerlink" title="428 Precondition Required"></a>428 Precondition Required</h3><p>原始服务器要求该请求是有条件的。 旨在防止“丢失更新”问题，即客户端获取资源状态，修改该状态并将其返回服务器，同时第三方修改服务器上的状态，从而导致冲突。</p><h3 id="429-Too-Many-Requests"><a href="#429-Too-Many-Requests" class="headerlink" title="429 Too Many Requests"></a>429 Too Many Requests</h3><p>用户在给定的时间内发送了太多请求（“限制请求速率”）。</p><h3 id="431-Request-Header-Fields-Too-Large"><a href="#431-Request-Header-Fields-Too-Large" class="headerlink" title="431 Request Header Fields Too Large"></a>431 Request Header Fields Too Large</h3><p>服务器不愿意处理请求，因为它的 请求头字段太大（ Request Header Fields Too Large）。 请求可以在减小请求头字段的大小后重新提交。</p><h3 id="451-Unavailable-For-Legal-Reasons"><a href="#451-Unavailable-For-Legal-Reasons" class="headerlink" title="451 Unavailable For Legal Reasons"></a>451 Unavailable For Legal Reasons</h3><p>用户请求非法资源，例如：由政府审查的网页。</p><hr><h2 id="服务端响应-5XX"><a href="#服务端响应-5XX" class="headerlink" title="服务端响应 5XX"></a>服务端响应 5XX</h2><h3 id="500-Internal-Server-Error"><a href="#500-Internal-Server-Error" class="headerlink" title="500 Internal Server Error"></a>500 Internal Server Error</h3><p>服务器遇到了不知道如何处理的情况。</p><h3 id="501-Not-Implemented"><a href="#501-Not-Implemented" class="headerlink" title="501 Not Implemented"></a>501 Not Implemented</h3><p>此请求方法不被服务器支持且无法被处理。只有GET和HEAD是要求服务器支持的，它们必定不会返回此错误代码。</p><h3 id="502-Bad-Gateway"><a href="#502-Bad-Gateway" class="headerlink" title="502 Bad Gateway"></a>502 Bad Gateway</h3><p>此错误响应表明服务器作为网关需要得到一个处理这个请求的响应，但是得到一个错误的响应。</p><h3 id="503-Service-Unavailable"><a href="#503-Service-Unavailable" class="headerlink" title="503 Service Unavailable"></a>503 Service Unavailable</h3><p>服务器没有准备好处理请求。 常见原因是服务器因维护或重载而停机。 请注意，与此响应一起，应发送解释问题的用户友好页面。 这个响应应该用于临时条件和 Retry-After：如果可能的话，HTTP头应该包含恢复服务之前的估计时间。 网站管理员还必须注意与此响应一起发送的与缓存相关的标头，因为这些临时条件响应通常不应被缓存。</p><h3 id="504-Gateway-Timeout"><a href="#504-Gateway-Timeout" class="headerlink" title="504 Gateway Timeout"></a>504 Gateway Timeout</h3><p>当服务器作为网关，不能及时得到响应时返回此错误代码。</p><h3 id="505-HTTP-Version-Not-Supported"><a href="#505-HTTP-Version-Not-Supported" class="headerlink" title="505 HTTP Version Not Supported"></a>505 HTTP Version Not Supported</h3><p>服务器不支持请求中所使用的HTTP协议版本。</p><h3 id="506-Variant-Also-Negotiates"><a href="#506-Variant-Also-Negotiates" class="headerlink" title="506 Variant Also Negotiates"></a>506 Variant Also Negotiates</h3><p>服务器有一个内部配置错误：对请求的透明内容协商导致循环引用。</p><h3 id="507-Insufficient-Storage"><a href="#507-Insufficient-Storage" class="headerlink" title="507 Insufficient Storage"></a>507 Insufficient Storage</h3><p>服务器有内部配置错误：所选的变体资源被配置为参与透明内容协商本身，因此不是协商过程中的适当端点。</p><h3 id="508-Loop-Detected-WebDAV"><a href="#508-Loop-Detected-WebDAV" class="headerlink" title="508 Loop Detected (WebDAV)"></a>508 Loop Detected (WebDAV)</h3><p>服务器在处理请求时检测到无限循环。</p><h3 id="510-Not-Extended"><a href="#510-Not-Extended" class="headerlink" title="510 Not Extended"></a>510 Not Extended</h3><p>客户端需要对请求进一步扩展，服务器才能实现它。服务器会回复客户端发出扩展请求所需的所有信息。</p><h3 id="511-Network-Authentication-Required"><a href="#511-Network-Authentication-Required" class="headerlink" title="511 Network Authentication Required"></a>511 Network Authentication Required</h3><p>511 状态码指示客户端需要进行身份验证才能获得网络访问权限。</p><p>【声明】：该资源转载自<a href="https://developer.mozilla.org/">https://developer.mozilla.org</a> <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status">传送门</a></p>]]></content>
      
      
      <categories>
          
          <category> Web Crawler </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web Crawler </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IELTS Writing</title>
      <link href="/2019/10/11/ielts-writing/"/>
      <url>/2019/10/11/ielts-writing/</url>
      
        <content type="html"><![CDATA[<h2 id="小作文"><a href="#小作文" class="headerlink" title="小作文"></a>小作文</h2><h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><h4 id="题目"><a href="#题目" class="headerlink" title="题目"></a><strong>题目</strong></h4><ul><li>The first chart below shows how energy is used in an average Australian household. The second chart shows the greenhouse gas emissions which result from this energy use.</li></ul><p><img src="http://webms3.xhd.cn/u/cms/shanghai/201701/11172749qami.jpg"><br><img src="http://webms3.xhd.cn/u/cms/shanghai/201701/11172811j163.jpg"></p><h4 id="范文"><a href="#范文" class="headerlink" title="范文"></a><strong>范文</strong></h4><p>The two charts summarise the amount of energy used through various means in the average Australian household versus the amount of greenhouse gas emissions resulting from the same sources.</p><p>In the first chart, we see that the overwhelming percentage of energy is devoted to household heating, with 42% of total energy usage. The second biggest is water heating with 30%, but then the amounts drop precipitously, with other appliances, refrigeration, lighting and cooling all using 28%.</p><p>From the second chart, we learn that heating, despite being the greatest drain on energy, actually contributes relatively little to greenhouse gas emissions with 15% of the total. The greatest emitter is water heating with 32% and the smallest being cooling at 3%. The largest disparity belongs to both refrigeration and lighting, both generating twice the amount of gases from the energy they consume (7% of energy use to 14% of emissions and 4% energy use to 8% of emissions respectively).</p><p><img src="https://i.loli.net/2019/10/11/641yS8GCsTw3MDz.png" alt="思维流图"></p><p>The pie charts reveal the amounts of energy used for domestic needs in Australia along with the percents of the concomitant emissions yielded on account of using energy.</p><p>Taking a look at the first chart, heating is the integral source of energy usage, accounting for 42% of the energy use. Following that, water heating and other appliances are the chief matters for energy consumption with 30% and 15% energy usage respectively. Moreover, refrigeration, lighting, and cooling have the least shares of consumption with 7%, 4%, and 2% energy usage respectively.</p><p>Moving to the second chart, in terms of generating emissions, water heating is at the top of the list, constituting 32% of the emissions. Thence, other appliances and heating are responsible for 28% and 15% of the emissions, and they are followed by refrigeration (14%) and lighting (8%). Interestingly, not only does cooling have the least amount of energy usage, but also it causes the tiniest emission in contrast to its counterparts.</p><p>To sum up, warming up is the most prominent matter, in terms of both energy consumption and generating pollution.</p><h3 id="2"><a href="#2" class="headerlink" title="2"></a>2</h3><h4 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a><strong>题目</strong></h4><ul><li><p>The charts below show the proportions of British students at one university in England who were able to speak other languages in addition to English, in2000 and 2010.</p></li><li><p>Summarise the information by selecting and reporting the main features,and make comparisons where relevant.</p></li></ul><p><img src="https://essayforum.com/shared_files/uploaded/76910/305298_1_o.png"></p><h4 id="我的"><a href="#我的" class="headerlink" title="我的"></a><strong>我的</strong></h4><ul><li><p>The two charts illustrate the percetages of one British university students who had the ability of speaking foreign languages in 2000 versus the percentages in 2010.</p></li><li><p>From the first chart, we can see the percentages of students who can speak only mother language in 2000 is 30%, while the percentages of students who can speaking other languages occupys 70% of the total, which the details of is “French only” with %15, “German only” with %10, “Spanish only” with %20， “Another language” with 15, and “Two other languages” with 10.</p></li><li><p>Moving to the second chart, the percentage of students who can not speaking other language in 2010 had increased 5 percent compared with the percentage in 2000. Besides, the amouts of students who were able to speak German had droped from 20% in 2000 to 10% in 2010. However, there were both 5 percent increasement in the pecentages of “Another language” and “Two othe luanguage”.</p></li><li><p>To sum up, the amount of British students in this University who can speak foreign language had decreased in total, while the students who were able to speak more than one foreign language and the students who had the ability of speaking another languages other than English, French, German, and Spanish had became more and more.</p></li></ul><h4 id="建议"><a href="#建议" class="headerlink" title="建议"></a><strong>建议</strong></h4><blockquote><ol><li>尽量把图表的类型写出来</li><li>总体趋势, 再跟一句总体趋势 范文第二自然段 是不是有一个overall 英文和中文不一样 要直入主题 英文要总分形式 一般保分就是总分</li><li>表示第一个表格30 和70都说没有必要，一个是三十另一个不就是70 了嘛，而且没有体现表格的重要特征，只摆了数据</li><li>第二段思路还可以，语言要更加地道 多看范文 再写一篇 同样一篇 你的逻辑多写几遍就懂了</li><li>抓特征点我指的是你要点出来哪个是最大的那个是最小的</li><li>主要是你的语句还有进步空间 你看看范文 学习一下连词的正确用法<br>@by YJ</li></ol></blockquote><h4 id="修改后"><a href="#修改后" class="headerlink" title="修改后"></a><strong>修改后</strong></h4><ul><li><p>The two pie charts illustrate the percetages of one British university students who had the ability of speaking foreign languages in 2000 versus the percentages in 2010.</p></li><li><p>Overall, the amount of British students in this University who can speak foreign language had decreased in total, while the students who were able to speak more than one foreign language and the students who had the ability of speaking another languages other than English, French, German, and Spanish had became more and more.</p></li><li><p>From the first chart, we can see the percentages of students who can speak only mother tongue in 2000 is 30%. And the students were able to speak Spanish with 20%, followed by the numbles of students being able to speak French only and another language were similar with 15 percent. Similarly, there were 10% proportions occupied in the German only aspect and the two other language aspect.</p></li><li><p>Moving to the second chart, the percentage of students who can not speaking other language in 2010 had increased 5 percent compared with the percentage in 2000. Besides, the amounts of students who were able to speak German had dropped 10% from 2000 to 2010. However, there were similarly 5 percent increasement in both “Another language” and “Two othe luanguage”.</p></li></ul><h4 id="意见"><a href="#意见" class="headerlink" title="意见"></a><strong>意见</strong></h4><blockquote><ol><li>第二段用过去式</li><li>第二段表达趋势过长</li><li>第二段表达整体趋势，后面两端抓取特征进行描述</li><li>第二段要选趋势变化最大的，要选一个划分点， 例如这里就是一个only mother tongue 和 other language</li><li>统一表达，10% 和 10 percent</li><li>抓特征点：！！！！</li></ol></blockquote><h4 id="范文-1"><a href="#范文-1" class="headerlink" title="范文"></a><strong>范文</strong></h4><p>Given are the pie charts illustrating the percentages of British students knowing other languages apart from English in 2000 and 2010.</p><p>Overall, there was an increase in percentage of students who speak only English, while the percentage decreased significantly in the Spanish speakers group.</p><p>To begin with, in 2000, 30% of British students in one university were able to speak only their mother tongue, followed by students being able to speak Spanish with 20%. There were similar numbers in the figures of French only and another language with 15 percent. Similarly, 10% proportions were taken in the German only aspect and the two other languages aspect.</p><p>Despite the high percentage of respondents who were speaking Spanish in 2000, there was a drop of 10% in 2010, changing the Spanish only figure to be 10%, which was having an identical number with the German only figure and the French only figure. Conversely, there are a rise of 15% in the Another language figure and the percentage of trilingual group in 2010.</p>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> English </tag>
            
            <tag> IELTS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>雅思口语必备15种连接词</title>
      <link href="/2019/10/10/ya-si-kou-yu-bi-bei-15-chong-lian-jie-ci/"/>
      <url>/2019/10/10/ya-si-kou-yu-bi-bei-15-chong-lian-jie-ci/</url>
      
        <content type="html"><![CDATA[<h1 id="雅思口语必备15种连接词"><a href="#雅思口语必备15种连接词" class="headerlink" title="雅思口语必备15种连接词"></a>雅思口语必备15种连接词</h1><ul><li>雅思口语有四个评分标准： Fluency &amp;Coherence(流利度与连贯性)， Grammatical Range &amp; Accuracy(语法广度及准确度), Lexical Resources (词汇范围和准确度) 和Pronunciation(发音)。</li><li>根据笔者观察，学生们往往对怎样提升流利度与连贯性不知所措，即便在家里把准备好的材料背的滚瓜烂熟，到了考场也常由于紧张或者有明显背诵的痕迹，取得一个非常糟糕的分数。虽然在一个较短的时间内大幅提升自己语言的连贯与流利不是件容易的事，但我们却可以通过口语中的一些过渡词，帮助自己消除紧张情绪。更重要的是，善于运用口语中的过渡词，可以大大消除背诵痕迹，让自己的语言变得更加自然，更具有逻辑性。</li><li>在雅思口语中，有15种过渡词使用的频率极高，可以帮助大家迅速提升口语交流的流利度与连贯性。</li></ul><h2 id="1-Addition-递进"><a href="#1-Addition-递进" class="headerlink" title="1. Addition(递进)"></a>1. Addition(递进)</h2><p>　　moreover, what is more, furthermore, , let alone, additionally, not to mention (this), besides (this) , in addition (to this)<br>　　真题链接：<br>　　Q: Do you often use the dictionary?<br>　　A: I often refer to a dictionary for some new words. Additionally, browsing the dictionary can also enlarge my vocabulary and knowledge.  </p><h2 id="2-Reference-引用"><a href="#2-Reference-引用" class="headerlink" title="2. Reference(引用)"></a>2. Reference(引用)</h2><p>　　considering (this), regarding (this), as for (this), concerning (this), on the subject of (this)<br>　　真题链接：<br>　　Q: Is time important?<br>　　A: Well, speaking about the importance of time, there are a lot of old sayings, like ‘Time waits for no man.’; ‘Time never comes back when it is gone.’  </p><h2 id="3-Example-举例"><a href="#3-Example-举例" class="headerlink" title="3. Example (举例)"></a>3. Example (举例)</h2><p>　　such as, particularly, especially, for example, like, in particular, for one thing, notably<br>　　真题链接：<br>　　Q: Are there any colors that have a special meaning in your country?<br>　　A: Yea, different colors stands for different meanings. For example, the white color represents purity and dignity, and the red color is for joy and celebration.<br>　　真题链接：<br>　　A: What kinds of museum do you like?<br>　　Q: Well, I am really fond of some new museums with different movies, particularly, the 3D and 4D movies which give me a vivid picture of history and art.  </p><h2 id="4-Similarity-相似"><a href="#4-Similarity-相似" class="headerlink" title="4. Similarity(相似)"></a>4. Similarity(相似)</h2><p>　　similarly, in the same way, equally, likewise, as well as<br>　　真题链接：<br>　　Q: Do you think advertisement can help products to be sold?<br>　　A: Advertisements can help people to have a better understanding about products, in the same way, advertisements usually tell people the unique functions of the products.</p><h2 id="5-Clarification-澄清"><a href="#5-Clarification-澄清" class="headerlink" title="5. Clarification(澄清)"></a>5. Clarification(澄清)</h2><p>　　that is (to say), I mean, (to) put (it) another way, in other words, namely, specifically<br>　　真题链接：<br>　　Q: What housework do you least like doing?<br>　　A: Washing dishes has always been a pet hate (特别讨厌的东西) of mine. Specifically, I feel disgusted when I put my hands in the dirty water or wipe all the food off the dishes.  </p><h2 id="6-Conflict-转折"><a href="#6-Conflict-转折" class="headerlink" title="6. Conflict(转折)"></a>6. Conflict(转折)</h2><p>　　but, while, on the other hand, however, whereas, in contrast, conversely, still, instead<br>　　真题链接:<br>　　A: Do Chinese people love birds? Why?<br>　　Q: I suppose so, especially elderly people. They love to walk with their birds in the parks or gardens in the morning; on the other hand, I don’t think young guys really get a kick out of birds.</p><h2 id="7-Emphasis-强调"><a href="#7-Emphasis-强调" class="headerlink" title="7. Emphasis(强调)"></a>7. Emphasis(强调)</h2><p>　　even more, above all, indeed, more importantly, besides<br>　　真题链接：<br>　　A: Do you love studying English? Explain why.<br>　　Q: As an universal language, English enables me to travel around a lot of countries in the world. More importantly, I make a lot of foreign friends and become more confident than ever.</p><h2 id="8-Concession-让步"><a href="#8-Concession-让步" class="headerlink" title="8. Concession(让步)"></a>8. Concession(让步)</h2><p>　　but even so, even though, though, although, despite (this), in spite of (this), regardless (of this),<br>　　真题链接：<br>　　Q: Do you think land-lines would be replaced by cell phones one day?<br>　　A: Well, cell phones have received a huge popularity among young people, but even so, land-lines still have its irreplaceable strong points. Land lines have no radiation and are much cheaper than cell phones.</p><h2 id="9-Cause-x2F-Reason-原因"><a href="#9-Cause-x2F-Reason-原因" class="headerlink" title="9. Cause/Reason(原因)"></a>9. Cause/Reason(原因)</h2><p>　　since, as, in that, for the (simple) reason that, because (of the fact), seeing that, owing to (the fact), due to (the fact that)<br>　　真题链接：<br>　　Q: Do you like traveling by train?<br>　　A: Yes, I like traveling by train due to the fact that it’s very convenient and fast. Moreover, I find taking trains are much safer than taking buses.</p><h2 id="10-Effect-x2F-Result-影响或结果"><a href="#10-Effect-x2F-Result-影响或结果" class="headerlink" title="10. Effect/Result(影响或结果)"></a>10. Effect/Result(影响或结果)</h2><p>　　consequently, hence, thus, because (of this), as a result (of this), for this reason, so that, accordingly, as a consequence, so, therefore<br>　　真题链接：<br>　　Q：How to protect the wild animals?<br>　　A: I believe the most efficient way is to enact laws that will make the hunting of wild animals illegal; therefore, the equilibrium of ecosystem can be maintained.</p><h2 id="11-Condition-条件"><a href="#11-Condition-条件" class="headerlink" title="11. Condition(条件)"></a>11. Condition(条件)</h2><p>　　if, provided that, in the event that (万一), as/so long as, unless, given that, providing that, even if, on (the) condition (that)<br>　　真题链接：<br>　　Q: Have you ever participated in a cultural event?<br>　　A: Yes, of course. It’s one of my favorite cultural events around the year. In the past, I would go to such event if I didn’t have busy academic tasks.</p><h2 id="12-Purpose-目的"><a href="#12-Purpose-目的" class="headerlink" title="12. Purpose(目的)"></a>12. Purpose(目的)</h2><p>　　for the purpose of, in the hope that, for fear that, so that, in order to, lest, in order that, so as to<br>　　真题链接：<br>　　Q: How to protect the wild animals?<br>　　A: I believe the most efficient way is to enact laws that will make the hunting of wild animals illegal, so that the equilibrium of ecosystem can be maintained.</p><h2 id="13-Numerical-顺序性"><a href="#13-Numerical-顺序性" class="headerlink" title="13. Numerical(顺序性)"></a>13. Numerical(顺序性)</h2><p>　　initially, to start with, first of all, to begin with, at first, for a start, secondly, thirdly<br>　　真题链接：<br>　　Q: Do you like living there?<br>　　A: Of course. It’s a great place to live in. First of all, my flat is spacious and bright, with beautiful pictures and painting on the wall. In addition, the neighborhood is……..</p><h2 id="14-Continuation-延续性"><a href="#14-Continuation-延续性" class="headerlink" title="14. Continuation(延续性)"></a>14. Continuation(延续性)</h2><p>　　subsequently, previously, eventually, next, before (this), afterwards, after (this), then<br>　　真题链接：<br>　　Q: How did you learn how to use the Internet?<br>　　A: Friends kept telling me about different websites to check out, after this I tried them one by one and discovered that the web has unlimited uses. Eventually, I found I was using the Internet almost every day on my own.</p><h2 id="15-Conclusion-总结"><a href="#15-Conclusion-总结" class="headerlink" title="15. Conclusion(总结)"></a>15. Conclusion(总结)</h2><p>　　lastly, finally, to conclude (with), as a final point, in the end<br>　　真题链接：<br>　　Q: How exactly will you benefit from this experience?<br>　　A: Well, firstly I will meet new people and learn about their daily lives and learn to speak different languages. In addition to this, I will travel a lot of historical sites. At last, studying overseas is an amazing experience from a cultural point of view.</p><p>　　这15种过渡词，如果使用得当，相信会使你与雅思考官的交流更加自然，流畅，但也要提醒同学们不要滥用或者错用这些过渡词，比如表达原因时用了结果过渡词，或者表达让步时用了转折过渡词，会使自己的语言显得无序，没有任何说服力，起到事倍功半的效果。</p><p><strong>声明：资源源自网络，侵删</strong></p>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> English </tag>
            
            <tag> IELTS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>雅思口语替换句型</title>
      <link href="/2019/10/10/ya-si-kou-yu-ti-huan-ju-xing/"/>
      <url>/2019/10/10/ya-si-kou-yu-ti-huan-ju-xing/</url>
      
        <content type="html"><![CDATA[<h1 id="雅思口语替换句型"><a href="#雅思口语替换句型" class="headerlink" title="雅思口语替换句型"></a>雅思口语替换句型</h1><h2 id="1-Talking-About-Personal-Habits"><a href="#1-Talking-About-Personal-Habits" class="headerlink" title="1. Talking About Personal Habits"></a>1. Talking About Personal Habits</h2><p>　　Example question： What do you usually do in the evenings?<br>　　I usually……<br>　　I often……<br>　　While I’m studying I usually……<br>　　Sometimes I…….<br>　　As a rule，I……<br>　　Whenever I can I……    </p><h2 id="2-Expressing-Likes-and-Dislikes"><a href="#2-Expressing-Likes-and-Dislikes" class="headerlink" title="2. Expressing Likes and Dislikes"></a>2. Expressing Likes and Dislikes</h2><p>　　Example question： What kinds of music do you like?<br>　　My favourite …… is……<br>　　I like……<br>　　I enjoy……<br>　　I’m (quite/rather) keen on……<br>　　I just love……<br>　　I absolutely adore…….<br>　　I’m crazy about……<br>　　I’m addicted to……<br>　　I’m really into……<br>　　I don’t mind……<br>　　As far as……is concerned，I can take it or leave it.<br>　　I don’t care too much for…… = I’m not really into……<br>　　My least favourite……is……<br>　　I dislike……<br>　　I can’t stand……<br>　　I hate…… (extreme language)<br>　　I find……    </p><h2 id="3-Expressing-Reasons-for-Likes-and-Dislikes"><a href="#3-Expressing-Reasons-for-Likes-and-Dislikes" class="headerlink" title="3. Expressing Reasons for Likes and Dislikes"></a>3. Expressing Reasons for Likes and Dislikes</h2><p>　　……because……<br>　　……since……<br>　　The main reason I like……is that it’s……<br>　　What I like best about……is……<br>　　The thing I like best about……is……<br>　　The best/worst thing about…… is……<br>　　I don’t like that very much because it’s too……<br>　　That’s because I find it……    </p><h2 id="4-Expressing-a-Preference"><a href="#4-Expressing-a-Preference" class="headerlink" title="4. Expressing a Preference"></a>4. Expressing a Preference</h2><p>　　Example question： Do you (or，would you) prefer to travel alone or with others?   (e.g.a friend)<br>　　I prefer…… because<br>　　My preference is…… because……<br>　　I prefer A to B because……<br>　　If I had the choice，I’d + V…… because…… (假设的话)<br>　　If I had the choice，I’d rather + V……because…… (假设的话)<br>　　If I have the choice，I’ll + V……(a real possibility for the future)    </p><h2 id="5-Comparing"><a href="#5-Comparing" class="headerlink" title="5. Comparing"></a>5. Comparing</h2><p>　　Example question：What are the differences between modern art in China and traditional Chinese art?<br>　　A is bigger than B.<br>　　B is not as big as A.<br>　　You can also use some of these：<br>　　Use “much” as in，“A is much better / worse than B”.<br>　　“A is not nearly as good as B.”<br>　　“B is nowhere near as big as A”<br>　　“A is not quite as important as B.”<br>　　“A is almost as important as B，but not quite.”<br>　　“In comparison to B，A is quite big.” Or，“A is quite big in comparison to B”.<br>　　“Compared to B，A is a lot bigger.”    </p><h2 id="6-Talking-About-Recent-Changes-x3D-Comparing-the-recent-past-and-the-present"><a href="#6-Talking-About-Recent-Changes-x3D-Comparing-the-recent-past-and-the-present" class="headerlink" title="6. Talking About Recent Changes= Comparing the recent past and the present"></a>6. Talking About Recent Changes= Comparing the recent past and the present</h2><p>　　Example question：Has your hometown changed much in the past few years?<br>(e.g. 20 years)<br>　　Yes，it has. For example，……<br>　　Today there are many more cars on the roads than there were thirty years ago.<br>　　(…… there are/is more_____ than there were/was…….)<br>　　The air pollution is much worse/much better than it used to be.<br>　　( ______ is more _____ than it used to be.)<br>　　Compared to thirty years ago，the population of the city has increased by about two million.<br>　　(Compared to thirty years ago，_______ has + 过去分词)<br>　　The population of the city has increased by about two million people in the last thirty years.<br>　　(______ has + 过去分词 in the last thirty years)<br>　　More people today own a car than was the case thirty years ago.<br>　　(More _________ today + present tense than was the case thirty years ago.)<br>　　Today，more and more people are living in high-rise apartment buildings whereas thirty years ago，we had very few high-rise apartments buildings in our city.<br>　　(Today ______ are + 现在分词 whereas thirty years ago + past tense)<br>　　More and more large-scale supermarkets are being built nowadays but there were very few of them in my hometown thirty years ago<br>　　(More and more ________ are being + 过去分词 nowadays but + past tense thirty years ago.)    </p><h2 id="7-Contrasting"><a href="#7-Contrasting" class="headerlink" title="7. Contrasting"></a>7. Contrasting</h2><p>　　The question is usually ‘a compare question’. When you answer one of these questions，you can use a contrasting statement. However，since the grammar of the comparing answers (see above) is more difficult，you will impress the examiner more by mostly using that，rather than by using contrasting statements.<br>　　Example： “A is big but B is small.”<br>　　(____ is _____ but _____ is ____)    </p><h2 id="8-Suggesting"><a href="#8-Suggesting" class="headerlink" title="8. Suggesting"></a>8. Suggesting</h2><p>　　Example questions：What would you suggest a visitor to your country see and do?<br>　　What do you think the government could/should do?<br>　　I’d……(suggest，recommend，say，tell him/her/them)…….<br>　　Maybe/perhaps/possibly…… + could / should……<br>　　It might/may help if…….+ past tense form of verb<br>　　It would probably + (be a good idea，be useful，help) if + past tense form of verb<br>　　I……(suggest，recommend，say)…….    </p><h2 id="9-Expressing-Opinions"><a href="#9-Expressing-Opinions" class="headerlink" title="9. Expressing Opinions"></a>9. Expressing Opinions</h2><p>　　Example question：Do you think that children should always be offered an incentive (a reward of some kind) when parents ask their children to do something?<br>　　I think……<br>　　I believe……<br>　　I feel……<br>　　Personally，I (think，believe，feel)……<br>　　I tend to + (think，feel，believe) that……<br>　　In my opinion，……<br>　　In my view，……<br>　　I’ve always + (thought/believed/felt) that……<br>　　I maintain that……<br>　　I’ve always maintained that……<br>　　It seems to me that……<br>　　I’m convinced that……<br>　　As far as I’m concerned，……<br>　　My view is that……<br>　　From my point of view，……<br>　　To my mind，……<br>　　The way I see it，……<br>　　As I see it，……    </p><h2 id="10-Giving-Reasons-for-Opinions"><a href="#10-Giving-Reasons-for-Opinions" class="headerlink" title="10. Giving Reasons for Opinions"></a>10. Giving Reasons for Opinions</h2><p>　　……because……<br>　　……since……<br>　　The main reason I say that is because ……<br>　　One of the reasons I say that is because…… (One reason I say that is because…… )    </p><h2 id="11-Explaining"><a href="#11-Explaining" class="headerlink" title="11. Explaining"></a>11. Explaining</h2><p>　　Example question： Why are many older people reluctant to learn computer skills?<br>　　The reason why…… is because / is that……<br>　　The main reason why…… is because / is that……<br>　　One reason why…… is because / is that……<br>　　One possible explanation (for that) is……<br>　　To understand why……..，you first need to…….. (understand，know，be aware that)<br>　　Well，it’s like this： …….<br>　　You could look at it this way：……    </p><h2 id="12-Speculating-x3D-Guessing-When-You-Don’t-Know"><a href="#12-Speculating-x3D-Guessing-When-You-Don’t-Know" class="headerlink" title="12. Speculating ( = Guessing When You Don’t Know)"></a>12. Speculating ( = Guessing When You Don’t Know)</h2><p>　　(When talking about the present or the past)<br>　　Example question： Do old people in China have opportunities to attend any forms of classes?<br>　　Well，I’m not sure but……<br>　　Well，I’ve never thought about that before but……<br>　　I imagine……<br>　　I guess……<br>　　I suppose……<br>　　I’d say ..    </p><h2 id="13-Speculating-x3D-guessing-About-the-Future"><a href="#13-Speculating-x3D-guessing-About-the-Future" class="headerlink" title="13. Speculating ( = guessing) About the Future"></a>13. Speculating ( = guessing) About the Future</h2><p>　　(Most commonly，how the future will change，compared to now.)<br>　　Example question： How do you think the tourist industry (in China) will develop in the future?<br>　　I predict…… + a noun<br>　　I (can) foresee…… + [a noun + 现在分词] or + a noun<br>　　I imagine / suppose / guess ……<br>　　…… will + adverb (or，adverb + will)<br>　　…… be (present tense) likely to……<br>　　…… be (present tense) bound to……<br>　　…… be (present tense) + going to + V (原形动词) = “will” + V (原形动词)<br>　　There’ll probably / possibly be……<br>　　We might see / have……<br>　　…… will be + 现在分词……<br>　　…… might be + 现在分词……<br>　　I’d be surprised if + past tense/past continuous tense<br>　　I’ll be very surprised if + present tense/past continuous tense<br>　　I expect ..    </p><h2 id="14-Expressing-Plans，Intentions-and-Hopes-for-the-Future"><a href="#14-Expressing-Plans，Intentions-and-Hopes-for-the-Future" class="headerlink" title="14. Expressing Plans，Intentions and Hopes for the Future"></a>14. Expressing Plans，Intentions and Hopes for the Future</h2><p>　　Example question： What are your future work plans? (after you graduate)<br>　　I plan to……<br>　　My plan is to……<br>　　I plan on + Ving (动名词)<br>　　I intend to……<br>　　I hope to……<br>　　I’m going to……<br>　　My ambition is to……<br>　　My immediate goal is to……<br>　　My ultimate (= final) goal is to……<br>　　Ultimately，……<br>　　Hopefully，……<br>　　Ideally，……<br>　　I expect to……<br>　　I’d like to…… = I want to ..<br>　　As an alternative，I might……<br>　　If all goes well，I’ll / I should……<br>　　If everything goes according to plan，I’ll / I should……<br>　　My dream is to……<br>　　It’s always been my hope/plan/ambition/dream to……<br>　　My heart is set on + Ving (动名词)    </p><h2 id="15-Clarifying"><a href="#15-Clarifying" class="headerlink" title="15. Clarifying"></a>15. Clarifying</h2><p>　　What I mean is……<br>　　My meaning is……<br>　　In other words，<br>　　That is to say，……<br>　　Let me put that another way.<br>　　To put that another way，……<br>　　What I’m trying to say is……<br>　　My point is that……<br>　　More specifically，……<br>　　For example，……<br>　　For instance，……    </p><h2 id="16-Explaining-a-Word-When-you-have-Forgotten-or-don’t-know-the-Word"><a href="#16-Explaining-a-Word-When-you-have-Forgotten-or-don’t-know-the-Word" class="headerlink" title="16. Explaining a Word When you have Forgotten (or don’t know) the Word"></a>16. Explaining a Word When you have Forgotten (or don’t know) the Word</h2><p>　　“I can’t remember the word but……..<br>　　it’s a thing that……<br>　　it’s a type of……<br>　　it’s something you……<br>　　he’s a person who……<br>　　it’s something like……<br>　　it’s similar to……<br>　　it’s kind of like a……”<br>　　These sentences use the present tense because you are speaking in general. For example，”It’s a thing，a tool that you use to put air into your bicycle tyre - you use it like this” (Show the action). (a bicycle pump)  </p><h2 id="17-Speaking-in-General"><a href="#17-Speaking-in-General" class="headerlink" title="17. Speaking in General"></a>17. Speaking in General</h2><p>　　On the whole，……<br>　　As a rule，……<br>　　In general，<br>　　Generally，……<br>　　Generally speaking，……<br>　　For the most part，……<br>　　Typically，<br>　　Usually，    </p><h2 id="其他-amp-分类短句"><a href="#其他-amp-分类短句" class="headerlink" title="其他&amp;分类短句"></a>其他&amp;分类短句</h2><ol><li>表达喜好<br>I prefer A to B because…<br>If I have a choice, I will… (a real possibility)<br>If I had a choice, I would… (not a real possibility, just wishing)<br>For me, A is much more attractive / interesting / preferable than B because… I would much rather do / have / eat / listen to / blah blah blah A than B…  </li><li>叙述<br>When I was a high school student, I went to Guizhou to visit some friends. After I graduated from high school, I …<br>During my visit to Guizhou last year, I…<br>Last year during the Spring Festival, I went to Guizhou to visit some friends.<br>(Also use “Whenever” or “While”)  </li><li>比较和对比<br>A is much better / worse than B.<br>A is not nearly as good as B.<br>A is not quite as important as B.<br>A is almost as tall as B, but not quite.<br>When I compare these two items, it’s clear that…  </li><li>建议<br>Maybe, Perhaps, Possibly<br>One possibility that I can think of is…<br>Another idea to think about is…  </li><li>表达观点<br>It seems to me that…<br>This is only my opinion but…<br>After a lot of thought, I have come to the conclusion that…<br>I’ve never thought about this question much before, but it seems to me that… 6. 解释<br>The reason I believe this is…<br>The most important evidence supporting my belief is…  </li><li>推测<br>I’m not sure what might happen, but one possibility is…<br>It’s hard to predict the future, but I suppose it / we might…  </li><li>分析<br>There are several points to consider, first of which is…<br>We can break this question down into several parts. First…<br>Let’s look at this step by step. To begin with…  </li><li>总结<br>Altogether, there were…<br>In the end, they had to…<br>When we consider all the factors…<br>Considering all of these ideas, maybe the best thing would be to…  </li><li>修正<br>Maybe I’m not making myself clear. I want to say that… What I mean to say is…<br>What I’m trying to say is…<br>Another way to put it is.</li></ol><h2 id="其他-amp-考试套话"><a href="#其他-amp-考试套话" class="headerlink" title="其他&amp;考试套话"></a>其他&amp;考试套话</h2><ol><li>与考官见面语<br>Glad to meet you here.<br>How nice to see you.<br>Fancy seeing you.<br>How are you?<br>I’m glad to have had the opportunity to meet you here.<br>I’m glad to meet you.<br>I’m pleased to meet you.<br>It’s a pleasure to meet you.  </li><li>完全没听懂问题<br>Could you please rephrase that question/topic?<br>I’m not exactly sure what you mean…  </li><li>对问题似懂非懂<br>Do you mean…?<br>If I understand right…<br>I’m sorry if I’m being a little slow, but…?<br>I’m sorry, I’m not sure I understand. Do you mean (that )… ?<br>So am I right in saying … ?<br>If I’ve got the picture, then …<br>So what you mean is …, right?<br>Sorry, I don’t quite catch you. You mean …?<br>Can I get one thing clear?<br>Would I be correct in supposing …?  </li><li>对问题内容不熟悉<br>I’m not exactly sure how to answer that question, but (perhaps)…<br>That’s a rather difficult question, but (maybe) …<br>I’m sorry, but I don’t know much about …  </li><li>评价考官所提问题<br>That’s difficult to answer, but maybe …<br>I’m sorry, but I don’t know much about …, but perhaps…<br>Maybe I can answer your question by telling you about a personal experience I had. That’s an interesting question … let me see. Well, I suppose that …<br>Yes, that’s a big issue.  </li><li>连接词<br>Well, …<br>Actually …<br>In fact …<br>You see …<br>You know, …<br>How shall I put it…<br>Let me think for a second …<br>Give me a few seconds…  </li><li>接一种方式重述<br>In other words, I am …<br>And that means …<br>Let me put it another way , …<br>What I’m suggesting is …<br>All I ‘m trying to say is …<br>What I’m getting at is …<br>If I can rephrase that …<br>Perhaps I should make that clearer by saying<br>Perhaps it would be more accurate to say …<br>The point I’m making is that ..  </li><li>回答完毕,询问考官司是否还需补充其他信息<br>Have I given you enough information?<br>Would you like me to tell you more about …?<br>Is that all you’d like to know?<br>Is there anything else you wish to know?  </li><li>回答完毕,考生认为已无话可说了.<br>I’m afraid that’s about as much as I know.<br>I think that’s all.<br>I can’t think of anything else right now.  </li><li>最后结束语表达<br>That’s very kind of you. Thank you.<br>Thank you very much for giving me information.<br>Well, thanks for talking to me and I wish you all the best. Thank you, sir?<br>Nice talking to you.<br>I appreciate your talking with me. Goodbye.<br>I enjoyed talking to you.<br>It’s been very helpful talking to you.<br>口语常用表述  </li><li>回答考官居就某事征求你意见 As for as I’m concerned, I think … In my opinion …<br>It seems to me (that )…<br>From where I stand, it is… What I reckon is …<br>I’d like to point out that …<br>If I may say so, this is …<br>I’m convinced that …<br>Personally, I consider …  </li><li>表达对未来的找算和态度<br>Well … as you know, at the moment, I’m studying at …<br>I’m preparing right now to go to university, so my short-term plan is to …<br>If I’m not successful, that is, if something goes wrong, I think I will probably … In the future I would like to complete a master’s degree.<br>I do not know if I will … but I might be able to … I feel inclined to …<br>I’ll do all I can to …<br>I reckon I’ll …<br>I’m figuring on …<br>I have every intention of …  </li><li>表示喜欢某人或某事<br>I have a fancy for …<br>I don’t think I’ve seen anything I like better.<br>I’m very keen on outdoor sports.<br>I’ve always liked fishing.<br>… is a marvelous way of spending a day off .<br>There’s nothing I enjoy more than…<br>I’m crazy about …<br>I can’t find words to express how much I like it.<br>I have a particular fondness for pop song.<br>Walking is one of my favorite pastimes.  </li><li>描述事物<br>It’s made of silk.<br>It had many features.<br>It’s red colored with a steep roof.<br>It’s a 3-room apartment, and it’s about 80 square meters.  </li><li>回忆过去<br>I can still remember the time when I passed my entrance examinations.<br>I’ll never forget the time when I first went to primary school.<br>Once, when I was a college student, I went on a trip which I will never forget. 16. 表达感情<br>I felt so happy that I could jump for joy.<br>I felt like I was in heaven.<br>It impressed me deeply.<br>I felt so depressed.  </li><li>描述流程<br>The first thing you should do /need to do is to plug it in.<br>First, you need to take off the lid.<br>The first step is to get the ingredients prepared.<br>Next, you should select the function you want to use.<br>After that, you should press the button.<br>Finally, switch it off by pressing the red button.<br>The last thing you need to do is to turn off the stove.  </li><li>解释原因<br>In my opinion there are three way of looking at it: first of all … next … then…<br>Well, I think there are two (or three or more) reasons. First, I think it is part of our culture. Second, I think it’s good for our economy. Finally, it gives us time to recharge and be rested for the next working year.<br>The best reason I think the examination system should change is because it prevents too many people from pursuing their dreams.<br>I can come up with about three reasons for the change in people’s diets.  </li><li>谈论变化<br>More and more people in China are learning English.<br>The environmental problem is getting more serious.<br>There has been a rapid increase of farmers moving to the cities.<br>China’s population has remained about the same over the last few years.  </li><li>评价作用<br>Yes, computers play a big role in our lives.<br>Yes, I think it’s an important issue for us in China these days.<br>Friendship is something we all take seriously.<br>In China we consider the family to be key to our society.  </li><li>总结规律<br>In most cases, divorce is something that both parties realize is necessary.<br>Generally (speaking), Chinese people love sports.<br>By and large, Chinese people are very respectful of the elderly.<br>On the whole, Chinese students receive a good education in the basics.  </li><li>表达观点<br>Well, I know many people like it but I think it’s wrong.<br>Yes, these day it is quite popular to go on these chat lines, but I think it’s not very good. A lot of people think the environment is getting better but frankly I think it’s getting worse. 23. 驳斥观点<br>I’m afraid it’s wrong.<br>I don’t think so.<br>I’m afraid what you think about … is not quite right.<br>Sorry, that’s not at all right.<br>No, you’ve got it all wrong.<br>I think the information you have must be incorrect.<br>If I may say so, it’s not the case.<br>If I may say so, you are mistaken there.<br>I’m sorry, there are some misunderstandings here.<br>It doesn’t seem correct to say …<br>I can’t accept that.<br>I couldn’t agree with you less.<br>I don’t think you’re right there.<br>I’m not at all sure, actually …<br>That’s not the way I see it.<br>I can’t go along with your view.<br>On the contrary …<br>I can’t say that I share your view of …<br>I’m afraid I can’t accept your argument.<br>I’m not at all convinced by your explanation.  </li><li>举例说明<br>Let me give you an example.<br>Take … for instance …<br>An example of this would be …<br>And as evidence of that…<br>Let me cite a few instances…<br>To exemplify this theory…<br>To give you an example of this, take … for instance.<br>To illustrate my point…<br>To make it clearer to you …<br>…, such as …  </li><li>假设推理<br>If you allow your traditional customs to disappear, this will have a very bad effect on your culture. If everyone were to eat fast food, we would have a lot of health problems to deal with.<br>If animals were to disappear, we would indeed be showing our irresponsibility to the animal kingdom.  </li><li>表达区别<br>The biggest difference between construction about 20 years ago and today is that 20 years ago much construction was done manually.<br>One large way that big cities differ from small cities is the air.<br>Yes, there are quite a few differences between the way children and adults make friends. A good example is the way they just start using each other’s toys happily without needing permission.  </li><li>表达对比<br>Big cities have more opportunities than small cities.<br>University life is more interesting than middle school life.<br>Families in the past were more dependent on each other, but now they are more independent.<br>There were fewer cars on the roads 20 years ago, compared to now.  </li><li>列举优劣<br>There are two sides to this issue. On one hand, we need tourism to develop our economy. On the other hand, we shouldn’t let it destroy our natural beauty.<br>The main advantage of getting your news on the internet is that it is fast and you can choose what news you want to learn. The disadvantage is it may not be as reliable.<br>The strengths of a traditional family are in its close family support, but the weakness is that often the husband and wife feel trapped in the relationship.<br>The positive side of technology is its contribution to our convenience, but the dark side of it is that it may make us lazier.  </li><li>提出解决方法<br>I think what should be done is to give students more opportunities to demonstrate their creativity.<br>I think this problem could be solved by creating more job opportunities.<br>To solve this problem, I think we should try and set up more facilities for elderly people to meet each other and socialize.</li></ol><h2 id="其他-amp-常用短句"><a href="#其他-amp-常用短句" class="headerlink" title="其他&amp;常用短句"></a>其他&amp;常用短句</h2><p>  All I want is… 我想要的是……。<br>  All we can do is… 我们所能做的就是…… 。<br>  Do you by any chance know…? 你也许知道……吧?<br>  How do you like…? 你认为……怎么样?<br>  I didn’t realize… 我没意识到……。<br>  I find it hard to… 我发现……很难。<br>  I hate to say it, but… 我实在不想这么说，但是……。<br>  I really appreciate… 我真的很感激……。<br>  I was impressed by… 我被……打动。/ ……给我留下深刻印象。 I’ll try my best to… 我会尽全力……。<br>  I’m fed up with… 我厌倦了……。/我受够了……。<br>  I’m here to… 我是来这里…….。<br>  I’m thinking of… 我打算……。<br>  It is impossible to… ……不可能。<br>  It might be a good idea to… ……或许是个好主意。<br>  …is really something. ……真是了不起。<br>  It was kind of… 有一点……。<br>  Just tell me if… 如果……，尽管告诉我。<br>  …means a lot to me. ……对我来说很重要。<br>  Why don’t you…? 为何不……?  </p><h2 id="其他-amp-实用例句"><a href="#其他-amp-实用例句" class="headerlink" title="其他&amp;实用例句"></a>其他&amp;实用例句</h2><ol><li>I am a student studying in Wuhan University, and I major in Computer Science.<br>我是武汉大学的学生，我的专业是计算机科学  </li><li>I chose my major because I thought it was popular, so it will be easier for me to find a job after graduation. 我之所以选择这个专业，是因为我觉得它很热门，毕业以后我会比较容易找到一份好工作。  </li><li>I came from Hubei province.<br>我来自湖北省。  </li><li>I love my hometown because there are a lot of places of interest and delicious food here.<br>我喜欢我的家乡，因为这里有许多的名胜古迹，还有各种各样的美食。  </li><li>The most famous attraction is Yellow Crane Tower. It was built hundreds of years ago besides the Yangtze River.<br>最出名的旅游景点是黄鹤楼，几百年前它被建于长江边。  </li><li>Every year millions of tourists visit the tower coming from different parts of China.<br>每年都有几百万来自于全国各地的游客参观黄鹤楼。  </li><li>And the most welcomed snack is the hot dry noodle, even though some outlanders do not appreciate it at the beginning, they will love it finally. 最受欢迎的小吃是热干面，虽然有一些外地来的人刚开始并不喜欢吃，但是一段时间以后他 们一定会爱上热干面。  </li><li>My favourite season is definitely winter, because I was born in winter.<br>我最喜欢的季节是冬季，因为我是在冬季出生的。  </li><li>What’s more, I can enjoy the beautiful view after snow while all the buildings and trees are covered by white snow. 另外，在冬天，我可以欣赏雪后的美景，所有的房屋和树木都被皑皑白雪覆盖。  </li><li>The most important things is that I could enjoy the whole winter vacation and celebrate the Spring Festival with family. 最重要的是我可以好好享受整个寒假并且和家人一起庆祝春节。  </li><li>Blue is my favourite, as it has the same colour with sky and ocean. Both of those are enormous. 蓝色是我最钟爱的颜色，因为它和天空以及大海的颜色是一样的，而天空和大海都是同样的 广阔。  </li><li>When people are in bad mood, they can go to the wild field, lay down on the grass and look into the sky or drive a car to the beach to see the sea. 当人们的情绪不太好时，可以去野外躺在草地上仰望天空，或者驱车去海边看海。  </li><li>I believe they will feel much better when they are surrounded by the attractive natural beauty.我相信当人们被自然美景所环绕时，一定会忘记烦恼的。  </li><li>I watched a fantastic movie named “Brave Heart” when I was in the second year in college.<br>在大学二年级的时候，我看了一部电影《勇敢的心》。  </li><li>It presented a Scottish hero, “Wiliam Wallace” who led his people to fight for freedom.<br>它向人们讲述了一个苏格兰英雄威廉姆，他带领人们为自由而战。  </li><li>Unfortunately, he was set up by his partner and executed at the end.不 幸的是他被他的同伴出卖并最终被处死。  </li><li>However, his last screaming invoked Scottish people and encouraged them to pick up his sword to defend their homeland and protect their citizens from the invasion of England.<br>不过，他临终前的呐喊唤醒了苏格兰人们并且激励他们捡起他的剑保家卫国，保护人民免受 英格兰入侵之苦。  </li><li>In China, the most popular flower must be rose, as people believe that the rose stands for love.<br>在中国，最流行的鲜花莫过于玫瑰，因为人们相信玫瑰代表爱情。  </li><li>The youth always give roses to their lovers to show how much they love each other.<br>年轻人经常送玫瑰花给自己的心上人来向他们表达爱意。  </li><li>As for me, Lily is the most meaningful flower, not only because it is beautiful and smells good, but also because it has a similar pronunciation with “Love each other forever” in Chinese. 对我来说，我最喜欢的花是百合。不仅仅因为它的美丽和芳香，还因为百合的汉语发音和百 年好合很像。</li></ol><p><strong>声明：资源源自网络，侵删</strong>  </p>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> English </tag>
            
            <tag> IELTS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>雅思口语和写作的100个替换词</title>
      <link href="/2019/10/10/ya-si-kou-yu-he-xie-zuo-de-100-ge-ti-huan-ci/"/>
      <url>/2019/10/10/ya-si-kou-yu-he-xie-zuo-de-100-ge-ti-huan-ci/</url>
      
        <content type="html"><![CDATA[<h1 id="雅思口语和写作的100个替换词"><a href="#雅思口语和写作的100个替换词" class="headerlink" title="雅思口语和写作的100个替换词"></a>雅思口语和写作的100个替换词</h1><ol><li>important = crucial (extremely important),&nbsp;significant&nbsp;(amount or effects large enough to be important)</li><li>common = universal, ubiquitous (if something is ubiquitous, it seems to be every where)</li><li>abundant = ample (enough and usually extra), plentiful (enough for people’s needs and wants)</li><li>stick = adhere, cling (hold on something tightly)</li><li>neglect = ignore. (difference: neglect means someone has not paid enough attention to something; ignore means no attention.)</li><li>near = adjacent (two things next to each other), adjoin (the same as adjacent)</li><li>pursue = woo (man woos woman, old-fashioned), seek (if you seek sth, you try to obtain it. FORMAL)</li><li>accurate = precise (precise is exact and accurate in all details), exact (correct in every detail)</li><li>vague = obscure (unknown or known by only a few people)</li><li>top = peak, summit</li><li>competitor = rival, opponent (especially in sports and politics)</li><li>blame =&nbsp;condemn&nbsp;(if you&nbsp;condemn&nbsp;something, you say it is very bad and unacceptable)</li><li>opinion = perspective, standpoint (means looking at an event or situation in a particular way)</li><li>fame = prestige (describe those who are admired), reputation</li><li>build = erect (you can erect something as buildings, FORMAL),&nbsp;establish</li><li>insult = humiliate (do something or say something which makes people feel ashamed or stupid)</li><li>complain = grumble (complain something in a bad-tempered way)</li><li>primary = radical (very important and great in degree), fundamental</li><li>relieve = alleviate (alleviate means you make pain or sufferings less intense&nbsp;or severe)</li><li>force = coerce into (coerce means you make someone do something she/he does not want to), compel</li><li>enlarge = magnify (magnify means make something larger than it really is)</li><li>complex&nbsp;=&nbsp;intricate&nbsp;(if something is intricate, it often has many small parts and details)</li><li>Lonely = solitary (if someone is solitary, there is no one near him/her)</li><li>small = minuscule (very small), minute,</li><li>praise = extol (stronger than praise), compliment(polite and political)</li><li>hard-working = assiduous (someone who is assiduous works hard or does things very thoroughly)</li><li>difficult = arduous (if something is arduous, it is difficult and tiring, and involves a lot of&nbsp;efforts)</li><li>poor (soil) = barren, infertile (used to describe the soil is so poor that plants cannot be planted on it)</li><li>fragile = brittle, vulnerable (someone who is vulnerable is easily&nbsp;hurt&nbsp;emotionally or physically)</li><li>show = demonstrate (to demonstrate a fact means to make it clear to people.)</li><li>big = massive (large in size, quantity, or extent), colossal (use this word, you emphasize something’s large), tremendous (informal)</li><li>avoid = shun (if someone shuns something, she/he deliberately avoid that something or keep away from it.)</li><li>fair = impartial (someone who is impartial is able to give a fair opinion or decision on something.)</li><li>attack = assault (physically attack someone), assail (attack violently)</li><li>dislike = abhor (abhor means you hate something to a extreme extent for moral reasons), loathe (dislike very much)</li><li>ruin = devastate (it means damage something very badly, or utterly&nbsp;destroy&nbsp;it.)</li><li>always = invariably (the same as always, but better than always)</li><li>forever = perpetual (a perpetual state never changes), immutable (something immutable will never change or be changed)</li><li>surprise&nbsp;= startle (it means&nbsp;surprise&nbsp;you slightly), astound (surprise&nbsp;you to a large degree), astonish(the same as astound)</li><li>enthusiasm = zeal (a great enthusiasm), fervency (sincere and enthusiasm)</li><li>quiet = tranquil (calm&nbsp;and peaceful), serene (calm&nbsp;and quiet)</li><li>expensive = exorbitant (it means too expensive that it should be)</li><li>luxurious&nbsp;= lavish (impressive and very expensive), sumptuous (grand and very expensive)</li><li>boring = tedious (if you describe something tedious, you mean it is boring and frustrating)</li><li>respect = esteem (if you esteem someone, you respect and admire him/her. FORMAL)</li><li>worry = fret (if you fret about something, you worry about it)</li><li>cold = chilly (unpleasantly cold), icy (extremely cold)</li><li>hot = boiling (very hot)</li><li>dangerous = perilous (very dangerous, hazardous) (dangerous, especially to people’s safety and health)</li><li>only = unique (the only one of its kind), distinctive;</li><li>stop = cease (if something ceases, it stops happening or existing)</li><li>part = component (the components of something are the parts that it is made of)</li><li>result&nbsp;= consequence (the&nbsp;results or effects of something)</li><li>obvious = apparent, manifest</li><li>based on = derived from (can see or notice them very easily)</li><li>quite = fairly</li><li>pathetic = lamentable (very uncomfortable and disappointing)</li><li>field = domain (a particular field of thought, activities or interest)</li><li>appear = emerge (come into existence)</li><li>whole = entire (the whole of something)</li><li>wet = moist (slightly wet), damp (slightly wet), humid (very damp and hot)</li><li>wrong = erroneous (incorrect or partly correct)</li><li>difficult = formidable</li><li>change = convert (change into another form)</li><li>typical = quintessential (this word means represent&nbsp;a typical example of something)</li><li>careful = cautious (very careful in order to avoid danger), prudent(careful and sensible)</li><li>ability = capacity, capability (the same as ability)</li><li>strange = eccentric (if some one is eccentric, she/he behaves in a strange way, or his/her opinion is different from most people)</li><li>rich=&nbsp;affluent&nbsp;(if you are affluent, you have a lot of money)</li><li>use = utilize (the same as use)</li><li>dubious = skeptical (if you are skeptical about something, you have doubts on it.)</li><li>satisfy = gratify (if you are gratified by something, it gives you pleasure and satisfaction)</li><li>short =&nbsp;fleeting, ephemeral (if something is ephemeral, it lasts a short time)</li><li>Scholarship&nbsp;= fellowship</li><li>smelly = malodorous (used to describe an unpleasant smell)</li><li>ugly = hideous (if something is hideous, it is very ugly or unattractive)</li><li>attractive = appealing (pleasing and attractive), absorbing (something absorbing can attract you a great deal)</li><li>diverse = miscellaneous (a miscellaneous groups consists of many different kinds of things)</li><li>disorder = disarray, chaos</li><li>crazily = frantically (used to describe someone who behaves in a wild and uncontrolled way)</li><li>rapid = meteoric (ATTENTION: meteoric is only used to describe someone achievessuccess&nbsp;quickly)</li><li>ordinary = mundane (very ordinary and not at interesting or unusual)</li><li>despite = notwithstanding (FORMAL)</li><li>best =&nbsp;optimal&nbsp;(used to describe the best level something can achieve)</li><li>sharp = acute (severe and intense)</li><li>unbelievable = inconceivable (if you deem something inconceivable, you think it very unlike to happen )</li><li>puzzle = perplex (something perplex someone means it confuses and worries him/her because he/she does not&nbsp;understand&nbsp;it)</li><li>method = avenue (a way of getting something done)</li><li>famous = distinguished (used to describe people who are&nbsp;successful in their career)</li><li>ancient&nbsp;= archaic (extremely old and extremely old-fashioned)</li><li>decorate = embellish (embellish means make something look more attractive via decorating it with something else)</li><li>possible&nbsp;= feasible (if something is feasible, it can be done, made or achieved)</li><li>so = consequently, accordingly</li><li>rare = infrequent&nbsp;(doesn’t happen often)</li><li>greedy = rapacious (greedy and selfish)</li><li>individuals,characters, folks = people,persons</li><li>nowadays = currently</li><li>dreadful, unfavorable, poor, adverse, ill = be less impressive</li><li>reap huge fruits = get many benefits</li><li>for my part, from my own perspective = in my opinion</li></ol><p><strong>声明：资源源自网络，侵删</strong></p>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> English </tag>
            
            <tag> IELTS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Massive text de duplication based on simhash algorithm</title>
      <link href="/2019/10/10/massive-text-de-duplication-based-on-simhash-algorithm/"/>
      <url>/2019/10/10/massive-text-de-duplication-based-on-simhash-algorithm/</url>
      
        <content type="html"><![CDATA[<h2 id="一、参考资料"><a href="#一、参考资料" class="headerlink" title="一、参考资料"></a>一、参考资料</h2><p><a href="https://www.cnblogs.com/maybe2030/p/5203186.html">使用SimHash进行海量文本去重</a> by Poll的笔记</p><ol><li>simhash主要流程是：</li></ol><ul><li>分词</li><li>加权</li><li>合并</li><li>降维</li></ul><ol start="2"><li>去重的主要思想是：</li></ol><ul><li>仿照hashmap的思想重构一个适合simhash的数据结构</li><li>将64bit位hash分割成多段，例如4段16位，每段作为一个map_key,并使用链表作为map_value, 存储文本hash值</li></ul><p>接下来针对一个实例需求来具体实现。</p><h2 id="二、实例"><a href="#二、实例" class="headerlink" title="二、实例"></a>二、实例</h2><h3 id="实例场景"><a href="#实例场景" class="headerlink" title="实例场景"></a>实例场景</h3><ul><li><p>当前有五千万文本数据存储在mongoDB中，里面有许多重复或者大面积相似的文本，现在需要进行去重。（大面积相似的文本也需要去掉）</p></li><li><p>利用simhash解决这个问题刚好， 我主要使用了jieba分词和TF-IDF进行关键词提取并加权，然后利用dict和list自己构建一个符合simhash特点的hashmap.</p></li><li><p>jieba分词使用参考资料:<br>  <a href="https://blog.csdn.net/sinat_34022298/article/details/75943272">Python的jieba分词及TF-IDF和TextRank 算法提取关键字</a></p></li></ul><p>  优化tips：<br>    - 数据插入mongo可采用批量插入(insert_many)提高速度<br>    - 对于短文本的数据效果不太好，可能会导致map中key=0的链表长度过长，可以进行一下特判<br>    - 可以采用两个进程并发进行hash去重和数据持久化<br>    - 数据实在太大并且冗余度过高的情况下可以批量跑，等数据量降下来在全量</p><p>  一个不是很确定且暂未实现的优化：<br>    在将64位的hash值划分成4段时，建立四个hash_map, 然后依次对应存储由各自段对应所得的hash_value链表</p><h3 id="实例代码"><a href="#实例代码" class="headerlink" title="实例代码"></a>实例代码</h3><ul><li><strong>simhash</strong></li></ul><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> jieba <span class="token keyword">import</span> lcut<span class="token punctuation">,</span> analyse<span class="token keyword">def</span> <span class="token function">count_diff_str</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> str2<span class="token punctuation">)</span><span class="token punctuation">:</span>    res <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>min<span class="token punctuation">(</span>len<span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">,</span>len<span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> str1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> str2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>            res <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">return</span> res<span class="token keyword">def</span> <span class="token function">count_diff_int</span><span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">)</span><span class="token punctuation">:</span>    res <span class="token operator">=</span> <span class="token number">0</span>    value <span class="token operator">=</span> value1 <span class="token operator">^</span> value2    x <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> x <span class="token operator">&amp;</span> value <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>            res <span class="token operator">+=</span> <span class="token number">1</span>        x <span class="token operator">&lt;&lt;</span><span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">return</span> res<span class="token keyword">def</span> <span class="token function">simhash_</span><span class="token punctuation">(</span>sentence<span class="token punctuation">)</span><span class="token punctuation">:</span>    keywords <span class="token operator">=</span> analyse<span class="token punctuation">.</span>extract_tags<span class="token punctuation">(</span>sentence<span class="token punctuation">,</span> topK<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> withWeight<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    value_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> item <span class="token keyword">in</span> keywords<span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># print(item[0],item[1])</span>        value <span class="token operator">=</span> hash<span class="token punctuation">(</span>item<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        x <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> x <span class="token operator">&amp;</span> value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                value_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-=</span> item<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                value_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> item<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>            x <span class="token operator">&lt;&lt;</span><span class="token operator">=</span> <span class="token number">1</span>    value_str <span class="token operator">=</span> <span class="token string">''</span>    value_int <span class="token operator">=</span> <span class="token number">0</span>    x <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">for</span> item <span class="token keyword">in</span> value_list<span class="token punctuation">:</span>        <span class="token keyword">if</span> item <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>            value_str <span class="token operator">+=</span> <span class="token string">'1'</span>            value_int <span class="token operator">|</span><span class="token operator">=</span> x        <span class="token keyword">else</span><span class="token punctuation">:</span>            value_str <span class="token operator">+=</span> <span class="token string">'0'</span>        x <span class="token operator">&lt;&lt;</span><span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">return</span> value_str<span class="token punctuation">,</span> value_int<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>去重</strong></li></ul><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> pymongoMONGO_CONNECT <span class="token operator">=</span> <span class="token string">'xxx'</span> <span class="token comment" spellcheck="true"># mongo uri</span>MONGO_DBS <span class="token operator">=</span> <span class="token string">'xxx'</span> <span class="token comment" spellcheck="true"># mongo database name</span>MONGO_SOURCE_COLLECTION <span class="token operator">=</span> <span class="token string">'xxx'</span> <span class="token comment" spellcheck="true"># mongo source collectiton name</span>MONGO_TARGET_COLLECTION <span class="token operator">=</span> <span class="token string">'xxx'</span> <span class="token comment" spellcheck="true"># mongo target collectiton name</span>THRESHOLD <span class="token operator">=</span> <span class="token number">3</span>  <span class="token comment" spellcheck="true"># 局部敏感 hash 阈值， 小于这个值视为相同或者大面积重复</span><span class="token comment" spellcheck="true"># 初步清洗一下文本，不用清洗可以略过</span><span class="token keyword">def</span> <span class="token function">clean_ques</span><span class="token punctuation">(</span>ques_txt<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 初步清理从MongoDB上download的题目信息，主要是去掉一些css/html样式</span>    <span class="token comment" spellcheck="true"># txt = txt.decode('utf-8')</span>    tmp <span class="token operator">=</span> <span class="token number">0</span>    res <span class="token operator">=</span> <span class="token string">""</span>    <span class="token keyword">for</span> ch <span class="token keyword">in</span> ques_txt<span class="token punctuation">:</span>        <span class="token keyword">if</span> ch <span class="token operator">==</span> <span class="token string">'&lt;'</span><span class="token punctuation">:</span>            tmp <span class="token operator">=</span> tmp <span class="token operator">+</span> <span class="token number">1</span>            <span class="token keyword">continue</span>        <span class="token keyword">elif</span> ch <span class="token operator">==</span> <span class="token string">'>'</span><span class="token punctuation">:</span>            tmp <span class="token operator">=</span> tmp <span class="token operator">-</span> <span class="token number">1</span>            <span class="token keyword">continue</span>        <span class="token keyword">elif</span> tmp <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            res <span class="token operator">=</span> res <span class="token operator">+</span> ch    res <span class="token operator">=</span> res<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"&amp;nbsp;"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>    res <span class="token operator">=</span> res<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"\r\n"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>    res <span class="token operator">=</span> res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span> res<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">"收录："</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> res<span class="token comment" spellcheck="true"># 二进制的str转十进制的int</span><span class="token keyword">def</span> <span class="token function">str2int</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>    res <span class="token operator">=</span> <span class="token number">0</span>    x <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'1'</span><span class="token punctuation">:</span>            res <span class="token operator">|</span><span class="token operator">=</span> x        x <span class="token operator">&lt;&lt;</span><span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">return</span> res<span class="token comment" spellcheck="true"># 十进制的int转二进制的str</span><span class="token keyword">def</span> <span class="token function">int2str</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>    res <span class="token operator">=</span> <span class="token string">''</span>    x <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> x <span class="token operator">&amp;</span> data <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            res <span class="token operator">+=</span> <span class="token string">'0'</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            res <span class="token operator">+=</span> <span class="token string">'1'</span>        x <span class="token operator">&lt;&lt;</span><span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">return</span> reshash_map <span class="token operator">=</span> dict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    repeated_count <span class="token operator">=</span> <span class="token number">0</span>    count <span class="token operator">=</span> <span class="token number">0</span>    client <span class="token operator">=</span> pymongo<span class="token punctuation">.</span>MongoClient<span class="token punctuation">(</span>MONGO_CONNECT<span class="token punctuation">)</span>    db <span class="token operator">=</span> client<span class="token punctuation">[</span>MONGO_DBS<span class="token punctuation">]</span>    source_col <span class="token operator">=</span> db<span class="token punctuation">[</span>MONGO_SOURCE_COLLECTION<span class="token punctuation">]</span>    target_col <span class="token operator">=</span> db<span class="token punctuation">[</span>MONGO_TARGET_COLLECTION<span class="token punctuation">]</span>    sum_count <span class="token operator">=</span> source_col<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># 小规模测试时加limit, 正式时去掉limit</span>    source_cursor <span class="token operator">=</span> source_col<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>limit<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># print(source_col.count())</span>    <span class="token keyword">for</span> item <span class="token keyword">in</span> source_cursor<span class="token punctuation">:</span>        count <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">if</span> count <span class="token operator">%</span> <span class="token number">100000</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"count: "</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"rate of progress: "</span><span class="token punctuation">,</span> <span class="token string">"%.2f%%"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>count<span class="token operator">/</span>sum_count<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        ques <span class="token operator">=</span> clean_ques<span class="token punctuation">(</span>item<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># print(ques)</span>        old_id <span class="token operator">=</span> item<span class="token punctuation">[</span><span class="token string">'_id'</span><span class="token punctuation">]</span>        hash_value_str<span class="token punctuation">,</span> hash_value_int <span class="token operator">=</span> simhash_<span class="token punctuation">(</span>ques<span class="token punctuation">)</span>        flag <span class="token operator">=</span> <span class="token boolean">True</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            key <span class="token operator">=</span> str2int<span class="token punctuation">(</span>hash_value_str<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">16</span><span class="token punctuation">:</span>i<span class="token operator">*</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            content_list <span class="token operator">=</span> hash_map<span class="token punctuation">.</span>get<span class="token punctuation">(</span>key<span class="token punctuation">,</span> None<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token operator">not</span> content_list<span class="token punctuation">:</span>                new_list <span class="token operator">=</span> <span class="token punctuation">[</span>hash_value_int<span class="token punctuation">]</span>                hash_map<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> new_list            <span class="token keyword">elif</span> <span class="token operator">not</span> flag<span class="token punctuation">:</span>                content_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>hash_value_int<span class="token punctuation">)</span>                hash_map<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> content_list            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">for</span> item <span class="token keyword">in</span> content_list<span class="token punctuation">:</span>                    <span class="token keyword">if</span> count_diff_int<span class="token punctuation">(</span>item<span class="token punctuation">,</span> hash_value_int<span class="token punctuation">)</span> <span class="token operator">&lt;</span> THRESHOLD<span class="token punctuation">:</span>                        flag <span class="token operator">=</span> <span class="token boolean">False</span>                        <span class="token keyword">break</span>                <span class="token keyword">if</span> <span class="token operator">not</span> flag<span class="token punctuation">:</span>                    content_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>hash_value_int<span class="token punctuation">)</span>                    hash_map<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> content_list        <span class="token keyword">if</span> flag<span class="token punctuation">:</span>            data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'ques'</span><span class="token punctuation">:</span> ques<span class="token punctuation">,</span> <span class="token string">'old_id'</span><span class="token punctuation">:</span> old_id<span class="token punctuation">,</span> <span class="token string">'hash_value'</span><span class="token punctuation">:</span> str<span class="token punctuation">(</span>hash_value_int<span class="token punctuation">)</span><span class="token punctuation">}</span>            target_col<span class="token punctuation">.</span>insert<span class="token punctuation">(</span>data<span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            repeated_count <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"total documents: "</span><span class="token punctuation">,</span> sum_count<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"total count: "</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"repeated count: "</span><span class="token punctuation">,</span> repeated_count<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"valid count: "</span><span class="token punctuation">,</span> count <span class="token operator">-</span> repeated_count<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"valid rate: "</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">-</span> repeated_count<span class="token operator">/</span>count<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"repeated rate: "</span><span class="token punctuation">,</span> repeated_count<span class="token operator">/</span>count<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>simhash test</strong></li></ul><pre class="line-numbers language-python"><code class="language-python">sentence1 <span class="token operator">=</span> <span class="token string">"I don't like the first one．I like _________．（　　）A．twoB．secondC．the second "</span>sentence2 <span class="token operator">=</span> <span class="token string">'To stay awake， he coffee and ordered _______．（　　）A．．otherC．the othersD．another           '</span>str1<span class="token punctuation">,</span> _ <span class="token operator">=</span> simhash_<span class="token punctuation">(</span>sentence1<span class="token punctuation">)</span>str2<span class="token punctuation">,</span> _ <span class="token operator">=</span> simhash_<span class="token punctuation">(</span>sentence2<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>count_diff_str<span class="token punctuation">(</span>str1<span class="token punctuation">,</span> str2<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
          <category> NLP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> NLP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IELTS Speaking</title>
      <link href="/2019/10/09/ielts-speaking/"/>
      <url>/2019/10/09/ielts-speaking/</url>
      
        <content type="html"><![CDATA[<h2 id="2019年9月换题季口语题卡完整版"><a href="#2019年9月换题季口语题卡完整版" class="headerlink" title="2019年9月换题季口语题卡完整版"></a>2019年9月换题季口语题卡完整版</h2><p>题卡包括：  </p><ul><li>P1：10新+22旧（共32道）  </li><li>P2&amp;P3：22新+25旧（共47道）</li></ul><h3 id="Uncertainty"><a href="#Uncertainty" class="headerlink" title="Uncertainty"></a>Uncertainty</h3><h4 id="Name"><a href="#Name" class="headerlink" title="Name"></a>Name</h4><ol><li><strong>Who give you the name?</strong></li></ol><blockquote><p>When I was born, my parents discussed together to give me this name. They searched<br>for some good words from a Chinese dictionary, and chose the “Xiao” as my first name.  </p></blockquote><ol start="2"><li><strong>Any special meaning for your name?</strong></li></ol><blockquote><p>My name is LingXiao. Ling is my family name, and the literal meaning of ‘Xiao’ in Chinese meants the day-break, the beginning of a day, which implys that I am the hope of my family.  </p></blockquote><ol start="3"><li><strong>Are there any special meaning for your name?</strong></li></ol><blockquote><p>Yes, for instance, fuqiang, jianjun, jiangguo. these names are ralated to the prosperity of China.  </p></blockquote><ol start="4"><li><strong>Do people feel that their name is very important?</strong></li></ol><blockquote><p>It depends, some people may think their name is vital, since it carrys the expectation of the parents. However, others may think it does not matter whatever the name is and the name can’t affect their attitude to life.  </p></blockquote><ol start="5"><li><strong>Would you change your name?</strong></li></ol><blockquote><p>No, I won’t change my name. because my name has accompanied me since I was born. It affects me in every aspect of my life.  </p></blockquote><ol start="6"><li><strong>It is easy to change your name in your country?</strong></li></ol><blockquote><p>Yes, It’s easy to change name in our country. If people want to change his name, he just needs to carry materials like ID card and family register to departments concerned.  </p></blockquote><ol start="7"><li><strong>who usually names babies in your country?</strong></li></ol><blockquote><p>It varies. In some families, it is parents who usually name babies while in some other families, it is grandparents who often give babies names. But, there’s also a special situation in China that some families, those doing business in particular, would like a fortune teller to name their babies.  </p></blockquote><ol start="8"><li><strong>What names are most common in your hometown?</strong></li></ol><blockquote><p>In my hometown, names like wei, qiang, zhuang also are the most prevalant. And parents who give these names to their babies expect their babies can grow up healthily and become strong and outstanding.  </p></blockquote><ol start="9"><li><strong>Do Chinese people like changing their names? Why or why not?</strong></li></ol><blockquote><p>In my personal opinion, generally Chinese people don’t like changing their names, because to most people names are just symbols, though some people do believe names can affect the course of their life. In that case, if they are not content with who they are or what they have, they may change their names.  </p></blockquote><h3 id="P1-NEW"><a href="#P1-NEW" class="headerlink" title="P1 NEW"></a>P1 NEW</h3><h4 id="1-Haircut"><a href="#1-Haircut" class="headerlink" title="1.Haircut"></a>1.Haircut</h4><p>How often do you have a haircut?<br>How&nbsp;long have you had your current haircut?<br>Have you ever had an unhappy haircut experience?<br>Do you like to&nbsp;have your hair cut?  </p><blockquote><p>It depends. I usually have a haircut once a month. However, if I am depressed, sometimes I will change my haircut so that I can have a better mood.</p></blockquote><blockquote><p>I had my current haircut last week to welcome the new year.</p></blockquote><blockquote><p>Of course. I went to an unfamiliar barbershop in last year and they gave me an ugly crew haircut. Additionally, their charge is too expensive to be acceptable. Hence, I did not go there any more.</p></blockquote><blockquote><p>Absolutely. A new haircut can bring me a new feeling to life and make me pleasant all day. furthermore, sometimes,too long hair may make me uncomfortable.</p></blockquote><h4 id="2-Jeans"><a href="#2-Jeans" class="headerlink" title="2.Jeans"></a>2.Jeans</h4><p>Do you wear jeans？<br>How often do you wear jeans?<br>Do you like wearing jeans, why?<br>Why do you think jeans are popular?  </p><blockquote><p>Definitely. Jeans are my favorite clothes and I would wear they as long as the weather permits.</p></blockquote><blockquote><p>Actually, I don’t really count the times of wearing jeans. It’s about twice a week.<br>And I like to wear jeans because they wear well and comfortably  </p></blockquote><blockquote><p>Absolutely. I prefer jeans compared with other clothes. Not only are they fasionable, but also its materials are durable so that they can be worn for long time.</p></blockquote><blockquote><p>In my view, Firstly, jeans are cheaper and much more durable than other clothes. As a result, many people who are not rich like buying them. Besides, its various styles which can meet the need of different people make it prevalent.</p></blockquote><h4 id="3-Concentration"><a href="#3-Concentration" class="headerlink" title="3.Concentration"></a>3.Concentration</h4><p>When do you need to be focused?<br>What may distract you when you’re trying to stay focused?<br>What do you do to help you concentrate?<br>Is it difficult for you to stay focused on something?  </p><blockquote><p>There are several occations which I need to concentrate on, such as attending class,  having a exam, playing games.</p></blockquote><blockquote><p>Actually, social media may be the major element which can distract me seriously. I always check my phone from time to time.</p></blockquote><blockquote><p>Firstly, Stay away my phone and computer. and then I my try to forget other unrelated things when I need to be focused..</p></blockquote><blockquote><p>It depends whether the thing need to be focused is interesting or not. If it is really tedious, for instance, some dull and compulsory lectures, I will choose to some meaningful things like homework. By contrast, if it is interesting and attractive, it is natural for me to stay focused.</p></blockquote><h4 id="4-Voice"><a href="#4-Voice" class="headerlink" title="4.Voice"></a>4.Voice</h4><p>Has your voice ever changed?<br>Do you like your own voice?<br>Do you enjoy recording your voice and listening to it?<br>Does your voice sound similar to your parents’?  </p><blockquote><p>Yes, I have. When I was 15 yeas old, my voice have changed from sharp to deep slowly.</p></blockquote><blockquote><p>To be honest. I dislike my voice because it is not beautiful. And when I sing a song in KTV with friends, they always thinks my sounds is too terrible to listen.</p></blockquote><blockquote><p>My sounds is not beautiful especially in recording. So I don’t enjoy it. But sometimes, I have to record it and listen to it, such as to correct my English pronunciation.</p></blockquote><blockquote><p>I don’t think so, our voice are nothing alike. My month’s voice is sharper than mine since I have gone throngh the puberty. As for my father, He is much older than me. The muscle of his vocal cord has loosened up, which makes his voice sounds a little thicker than mine.</p></blockquote><h4 id="5-Walking"><a href="#5-Walking" class="headerlink" title="5.Walking"></a>5.Walking</h4><p>Do you walk a lot?<br>Do you walk more often than in the past?<br>Do you think people will walk more&nbsp;in the future?<br>Where do you usually take a walk?  </p><blockquote><p>No, compared with walking, I like cycling which is as green as walking, but faster than walking.</p></blockquote><blockquote><p>Actually, As the result of fast development of transports, like subway, bike sharing, I walk less often than in the past.</p></blockquote><blockquote><p>I think so. Because there are more and more transports for travel nowadays.  Even for short distance, like from dormitory to classes or hanging out in community, people prefer to use mobility scooter or ride a bike, let alone for long distance like going to work.</p></blockquote><blockquote><p>I usually walk on the road from my home to my company, which is not a long distance.  </p></blockquote><!-- <audio controls="controls" preload="auto"><br><source src="http://stor.cloudmusics.cn/mp3/2019/10/57cb3116cfd9747e27c259fef497c084.mp3" type="audio/mpeg"><br></audio>   --><h4 id="6-Languages"><a href="#6-Languages" class="headerlink" title="6.Languages"></a>6.Languages</h4><p>What languages can you speak?<br>Do you think it’s difficult to learn a new language?<br>Will you learn other languages in the future?<br>Why do you learn English?  </p><blockquote><p>Apart from my mother tongue Chinese, I also can speak English and a little bit of Japanese, which I learned during my exchange experience in Japan.  </p></blockquote><blockquote><p>Absolutely, in my opinion, learning a new language is a long and complex process.<br>You should study it’s vocabulary, pronunciation and grammar in the long term. Most importantly,<br>you need to communicate with others in real life, so that you can master how to use it.</p></blockquote><blockquote><p>Definitely. I may be studying Norwegian if I pass the IELTS and apply the master of Norway Universities successfuly.  </p></blockquote><blockquote><p>There are two reasons for this question. First of all, when I was a primary students, I started to learn English which is a compulsory subjects. Movever, I can communicate with more people and contact more information through English.  </p></blockquote><h4 id="7-Friends"><a href="#7-Friends" class="headerlink" title="7.Friends"></a>7.Friends</h4><p>What kinds of people do you like to make friends with?<br>Do you think you are a good friend for others?<br>What do you think makes good friends?<br>Do you keep in contact&nbsp;with&nbsp;friends from&nbsp;your childhood?  </p><blockquote><p>I prefer to make friends who have common interests as I have. Because we can have a conversation of some topics together.  </p></blockquote><blockquote><p>Of cause. whenever my fiends need for help, I will give him a hand without any hesitation.  </p></blockquote><blockquote><p>In my opinion, mutual understanding and respect are vital for being good friends, which can let friends get along well with each other.  </p></blockquote><blockquote><p>Absolutely. we still keep in contact and once time is permitted, we will have a party. Also, I usually send a greedy email to them at their birthday.  </p></blockquote><h4 id="8-Animals"><a href="#8-Animals" class="headerlink" title="8.Animals"></a>8.Animals</h4><p>What wild animal do you like most?<br>Have you ever seen any wild animals before?<br>dDo you like to go to the zoo?<br>Have you ever kept pets?  </p><blockquote><p>my favourite wild animal is tiger, which is also my sign of zodiac. And why I like them most is that I want to became as brave and strong as they are.  </p></blockquote><blockquote><p>Definitely. I have ever seen snakes in rural area vhich look like scary. And I am so scared of them.  </p></blockquote><blockquote><p>Absolutely. Zoo is one of my favourite places where there are various wild animals I have never seen.  I often go there from my childhood.  </p></blockquote><blockquote><p>Yes. I had ever a cute dag when I am a primary student. when I felt sad, he accompanied and played with me and then my feeling became well.  </p></blockquote><h4 id="9-Movies"><a href="#9-Movies" class="headerlink" title="9.Movies"></a>9.Movies</h4><p>What’s your favorite movie?<br>Do your friends like this movie?<br>Do you want to be a movie star?<br>What kinds of movies do you think young people like?  </p><blockquote><p>Speaking about movies, my favorite movie is <avatar>, which mainly tells us a story about that the human Jack puts on the body of avatar and flies to the distant planet Pandora to exploit resources, but finally fight against humanity for the protection of the planet Pandora. It’s been eight years, but I still remember the plot.</avatar></p></blockquote><blockquote><p>Yes, They do. We watched the film together. When it comes to film, we always mention it</p></blockquote><blockquote><p>Absolutely. Being a movie star was my childhood dream. Being a movie star means that it’s easier for you to earn both fame and fortune to improve your quality of life. What’s more, it’s fun for me to play different roles in different movies.</p></blockquote><blockquote><p>No need to think. For boys, they watch a lot of science fiction movies, especially those made by the Marvel Company. It sometimes confuses me how boys’ passion can be evoked so naturally, once they watch a science fiction movie. They stare at the screen absorbedly, like they are a part of it. And girls, you know, like romantic movies. Just like the boys, once sitting in front of the TV, they can’t be distracted by anything.</p></blockquote><h4 id="10-Countryside"><a href="#10-Countryside" class="headerlink" title="10.Countryside"></a>10.Countryside</h4><p>Have you ever lived in the countryside?<br>Do you enjoy living in the countryside?<br>What do you usually do in the countryside?<br>Will you live in the countryside in the future?  </p><blockquote><p>Yes. I lived in the countryside with my family in my childhood. And when I went to middle school, due to the distance between my home and school, I have to live in dormitory with my classmates.</p></blockquote><blockquote><p>Absolutely. Living in the countryside is my best time. There is fresh air, beautiful natural scenery and many small animals that are not seen in the city. What’s more, all my family live in the countryside. I enjoy living in the countryside.</p></blockquote><blockquote><p>When it comes the activities I usually do in the rural area, fishing in the fish pond next door and flying kites on the grass are my favorite.  Besides, I often climb mountains with my friends.</p></blockquote><blockquote><p>Yes, I think I will. When I experiences what I want and earns enough money, I will settle down in the countryside in the future.</p></blockquote><h3 id="P2-amp-P3-NEW"><a href="#P2-amp-P3-NEW" class="headerlink" title="P2&amp;P3 NEW"></a>P2&amp;P3 NEW</h3><h4 id="1-童年学校"><a href="#1-童年学校" class="headerlink" title="1. 童年学校"></a>1. 童年学校</h4><p>Describe a school you went to in your childhood<br>You should say<br>Where it was<br>What it was like<br>What you learned there<br>And how you felt about it  </p><blockquote><p> When I was a child, I studied in a countryside school. It was only about one square kilometer without playground, and was made of mud bricks and woods. However, there were several table tennis tables where I could play ping pong with my classmates. At beginning, I don’t know how to play ping pong, and I frequently was defeated by others. But, after my practice day and night, I improved a lot and mastered enormous tricks about table tennis. Then, I defeated other players easily. From the experiences of the school, not only did I learn many useful knowledge like mathematics, English, but also I learnt lots of life philosophy such as “Practice makes perfect!”. I felt fulfilling about my childhood in that countryside school.  </p></blockquote><p>Part 3<br>What’s the difference between current teachers and those in the past?<br>What’s the difference between being taught by teachers and by AI?<br>What’s the difference between private schools and public schools?<br>What’s the difference between international schools and other schools?  </p><h4 id="2-读写的地方"><a href="#2-读写的地方" class="headerlink" title="2. 读写的地方"></a>2. 读写的地方</h4><p>Describe a place (not your home) where you read and write<br>You should say:<br>Where it is<br>What it is like<br>How often you go there<br>And how you feel about this place  </p><p>Part 3<br>What do you think is more important? Reading or writing?<br>Who needs to have good writing skills?<br>Where can people get more information from, words or pictures?<br>At what age should children start to read?  &nbsp;  </p><h4 id="3-想与朋友分享的电影"><a href="#3-想与朋友分享的电影" class="headerlink" title="3. 想与朋友分享的电影"></a>3. 想与朋友分享的电影</h4><p>Describe a film you would like to share with your friends<br>You should say:<br>When you watched it<br>Where you watched it<br>Whether you like it or not<br>And why you want to share it with friends  </p><p>Part 3&nbsp;<br>What kind of film is popular?<br>What kind of film do young people like to watch?<br>Do fewer people choose to watch movies in cinema than people did in the past?<br>Do you think cinemas will disappear in the future?  </p><h4 id="4-庆祝自己的成就"><a href="#4-庆祝自己的成就" class="headerlink" title="4. 庆祝自己的成就"></a>4. 庆祝自己的成就</h4><p>Describe an occasion when you celebrated your achievement<br>You should say:<br>What you achieved<br>How you celebrated it<br>Who you celebrated it with<br>And how you felt about it  </p><p>Part 3<br>How do Chinese people celebrate their family events? Is there anything different from other countries?<br>Why is it important for sports fans to celebrate when their favorite team wins?<br>Do people prefer winning in a team or on their own?<br>How are birthday celebrations different between young and old?  &nbsp;  </p><h4 id="5-多彩的地方"><a href="#5-多彩的地方" class="headerlink" title="5. 多彩的地方"></a>5. 多彩的地方</h4><p>Describe a place you remember well that is full of colors<br>You should say:<br>Where it is<br>What it is like<br>What it is used for<br>And explain why you remember it well  </p><p>Part 3<br>Is color important for clothing?<br>Should coursebooks be colorful?<br>What color do you think people would choose when decorating their houses?<br>Do you think the color of a company’s uniform represents the image of the company?  </p><h4 id="6-童年喜欢的玩具"><a href="#6-童年喜欢的玩具" class="headerlink" title="6. 童年喜欢的玩具"></a>6. 童年喜欢的玩具</h4><p>Describe a toy you liked in your childhood<br>You should say:<br>What kind of toy it is<br>When you received it<br>How you played it<br>And how you felt about it  </p><p>Part 3<br>How do advertisements influence children?<br>Should advertising aimed at kids be prohibited?<br>Do you think parents should buy more toys for their kids or spend more time with them?<br>What’s the difference between the toys kids play now and those they played in the past?  </p><h4 id="7-选工作或专业建议"><a href="#7-选工作或专业建议" class="headerlink" title="7. 选工作或专业建议"></a>7. 选工作或专业建议</h4><p>Describe an advice you received on choosing your major or work<br>You should say:<br>What it was<br>When you received it<br>Who you received it from<br>And how you felt about it  </p><p>Part 3<br>Why do so many young people choose communication and media studies as their major?<br>Why do young people find it hard to make career choices?<br>What can affect the career choices of young people?<br>Can people have free choices of their jobs?  </p><h4 id="8-初见某人的时刻"><a href="#8-初见某人的时刻" class="headerlink" title="8. 初见某人的时刻"></a>8. 初见某人的时刻</h4><p>Describe an occasion when met someone for the first time<br>You should say:<br>Where you met him or her<br>When you met him or her<br>What you talked about<br>And how you felt about it  </p><p>Part 3<br>Do you think it’s strange to make friends online?<br>Why do some people have few friends?<br>Which is more important, new friendships or old ones?<br>How do companies welcome their new employees?  </p><h4 id="9-特别的一天"><a href="#9-特别的一天" class="headerlink" title="9. 特别的一天"></a>9. 特别的一天</h4><p>Describe a special day that you remember well<br>You should say:<br>Where you were<br>Who you were with<br>What you did<br>And explain why&nbsp;you remember it well  </p><p>Part 3<br>Do people spend too much money on their birthday parties or weddings?<br>How much do you think people should spend on their birthday parties or weddings?<br>Which is the better way to retain memories, by videos or photos?<br>How can forgetful people remember things better?  </p><h4 id="10-不用工作或学习的一天"><a href="#10-不用工作或学习的一天" class="headerlink" title="10. 不用工作或学习的一天"></a>10. 不用工作或学习的一天</h4><p>Describe a time you enjoyed a free day off work or school<br>You should say:<br>Where you were<br>What you did<br>Who you were with<br>And how you felt about it  </p><p>Part 3<br>Do people have more free time than those in the past?<br>What do people like to do when they are free in your country?<br>Do you think most people are able to manage their free time well?<br>What’s the difference between the things people did in their free time in the past and the things they do nowadays?  </p><h4 id="11-无聊经历"><a href="#11-无聊经历" class="headerlink" title="11. 无聊经历"></a>11. 无聊经历</h4><p>Describe an experience that you got bored when you were with others<br>You should say:<br>When it was<br>Who you were with<br>What you did<br>And explain why you were bored  </p><p>Part 3<br>Why do people get bored?<br>Why are people less interested in reading books nowadays?<br>Why do some people choose boring jobs?<br>Are all the boring jobs going to be done by robots in the future?  </p><h4 id="12-经常坐飞机的人"><a href="#12-经常坐飞机的人" class="headerlink" title="12. 经常坐飞机的人"></a>12. 经常坐飞机的人</h4><p>Describe a person who often travels by plane<br>You should say:<br>Who he or she is<br>Where he or she goes<br>Why he or she travels by plane<br>And how he or she feels about it  </p><p>Part 3<br>What are the advantages of traveling by plane?<br>Why do some people prefer to travel by train?<br>What are the disadvantages of living near an airport?<br>How is working at the airport different from working in other places?  </p><h4 id="13-擅长工作的人"><a href="#13-擅长工作的人" class="headerlink" title="13. 擅长工作的人"></a>13. 擅长工作的人</h4><p>Describe a person who is good at his or her job<br>You should say:<br>Who this person is<br>What his or her job is<br>How he or she likes the job<br>And explain why this person is good at the job  </p><p>Part 3<br>How should young people perform on their first jobs?<br>How can people improve their job performance?<br>What skill set should a manager have?<br>Do you think what you have learned in university is going to help in your future job?  </p><h4 id="14-美丽天空"><a href="#14-美丽天空" class="headerlink" title="14. 美丽天空"></a>14. 美丽天空</h4><p>Describe a beautiful sky you enjoyed seeing<br>You should say:<br>Where you saw it<br>Who you saw it with<br>What you saw<br>And how you felt about it  </p><p>Part 3<br>Should kids know more about stars and planets?<br>Is high technology helpful for star watching?<br>What kinds of people are interested in stars?<br>Why do some people like to watch movies about stars or planets?  </p><h4 id="15-精心准备的礼物"><a href="#15-精心准备的礼物" class="headerlink" title="15. 精心准备的礼物"></a>15. 精心准备的礼物</h4><p>Describe a gift that took you a lot of time to prepare<br>You should say:<br>What it was<br>Who you gave it to<br>How you prepared it<br>And explain why you spent a lot of time preparing it  </p><p>Part 3<br>How do people usually choose gifts?<br>Why do some people find it hard to choose gifts?<br>Do you think practical gifts are always better than other ones like cards and flowers?<br>Do people give the same gifts as they did in the past?  </p><h4 id="16-室内游戏"><a href="#16-室内游戏" class="headerlink" title="16. 室内游戏"></a>16. 室内游戏</h4><p>Describe an experience that you played an indoor game with others<br>You should say:<br>What you played<br>Who you played it with<br>Why you played it<br>And how you felt about it  </p><p>Part 3<br>What indoor games do children like to play nowadays?<br>What qualities should a team leader have?<br>Is teamwork important to individuals?<br>What do you think of people spending too much time playing computer games?  </p><h4 id="17-很累但要保持清醒"><a href="#17-很累但要保持清醒" class="headerlink" title="17. 很累但要保持清醒"></a>17. 很累但要保持清醒</h4><p>Describe a time you were sleepy but had to stay awake<br>You should say:<br>When it happened<br>Why you were sleepy<br>Why you had to stay awake<br>And how you stayed awake  </p><p>Part 3<br>On what occasions do people need to keep awake when they feel tired?<br>How do people keep awake when they are tired?<br>Why do people feel tired a lot nowadays?<br>What kind of people lack sleep?  </p><h4 id="18-地区特产"><a href="#18-地区特产" class="headerlink" title="18. 地区特产"></a>18. 地区特产</h4><p>Describe a popular product (e.g. food, handicraft…) made in your region<br>You should say:<br>What it is<br>What it is like<br>How it is made<br>And explain why it is popular  </p><p>Part 3<br>Why do people use imported products?<br>Do different places have their own popular products?<br>What food is popular throughout the world?<br>Why do people living in different regions like different food?  </p><h4 id="19-家庭休闲活动"><a href="#19-家庭休闲活动" class="headerlink" title="19. 家庭休闲活动"></a>19. 家庭休闲活动</h4><p>Describe a leisure activity you do with your family<br>You should say:<br>What it is<br>When you do it<br>How you do it<br>And how you feel about it  </p><p>Part 3<br>What leisure activities are popular in China?<br>What leisure activities do young people like?<br>Do leisure activities have to be educational?<br>Do men and women like different leisure activities?  </p><h4 id="20-借过的好用的东西"><a href="#20-借过的好用的东西" class="headerlink" title="20. 借过的好用的东西"></a>20. 借过的好用的东西</h4><p>Describe something useful you borrowed from others<br>You should say:<br>What it was<br>When you borrowed it<br>Who you borrowed it from<br>And explain why you borrowed it  </p><p>Part 3<br>What kinds of things do people borrow from each other?<br>What are the things that people don’t choose to lend to others?<br>What do you think of copying ideas from others?<br>Do we always need to get permissions from others before using something they have?  </p><h4 id="21-房间的照片"><a href="#21-房间的照片" class="headerlink" title="21. 房间的照片"></a>21. 房间的照片</h4><p>Describe a picture or photograph you like in your room<br>You should say:<br>What is in it<br>Where it is<br>How you got it<br>And explain why you like it  </p><p>Part 3<br>What are the advantages and disadvantages of taking photos with smartphones?<br>Do you think photographers are artists?<br>What are the benefits of learning painting for children?<br>Can anyone become a famous artist through hard work?  </p><h4 id="22-骗朋友的经历"><a href="#22-骗朋友的经历" class="headerlink" title="22. 骗朋友的经历"></a>22. 骗朋友的经历</h4><p>Describe a time when you did not tell a friend the truth<br>You should say:<br>When it was<br>Where it happend<br>Why you did not tell the truth<br>And how you felt about it  </p><p>Part 3<br>Do you think mutual trust between friends is important?<br>Do you think people need to tell the truth all the time?<br>Why do children tell lies?<br>What should parents do if their children tell lies?  </p><h3 id="P1-OLD"><a href="#P1-OLD" class="headerlink" title="P1 OLD"></a>P1 OLD</h3><h4 id="1-The-area-you-live-in"><a href="#1-The-area-you-live-in" class="headerlink" title="1. The area you live in"></a>1. The area you live in</h4><p>Do you like the area that you live in?<br>What are some changes in the area recently?<br>Do you know any famous people in your area?<br>Where do you like to go in that area?  </p><h4 id="2-tea-and-coffee"><a href="#2-tea-and-coffee" class="headerlink" title="2. tea and coffee"></a>2. tea and coffee</h4><p>Do Chinese people like to drink tea or coffee?<br>Do you prepare tea or coffee for the guests at home?<br>When was the last time you drank tea or coffee?  </p><h4 id="3-public-holiday"><a href="#3-public-holiday" class="headerlink" title="3. public holiday"></a>3. public holiday</h4><p>How many public holidays do you have in China?<br>Do you think people need more public holidays?<br>How do you usually spend your holidays?<br>Which holiday is your favorite?  </p><h4 id="4-Patience"><a href="#4-Patience" class="headerlink" title="4. Patience"></a>4. Patience</h4><p>Were you patient when you were young?<br>How do you feel when other people are not patient?<br>Were you less or more patient when you were angry?  </p><h4 id="5-Home-x2F-Accommodation"><a href="#5-Home-x2F-Accommodation" class="headerlink" title="5. Home/Accommodation"></a>5. Home/Accommodation</h4><p>Who do you live with?<br>What kinds of housing/accommodation do you live in?<br>Do you live in a house or a flat?<br>What’s the difference between where you are living now and where you have lived in the past?<br>Can you describe the place where you live?<br>What room does your family spend most of the time in?<br>How long have you lived there?<br>What do you usually do in your house/flat/room?<br>Do you plan to live there for a long time?<br>Are the transport facilities to your home very good?<br>Please describe the room you live in?<br>Do you prefer living in a house or a flat?<br>What part of your home do you like the most?  </p><h4 id="6-Weather"><a href="#6-Weather" class="headerlink" title="6. Weather"></a>6. Weather</h4><p>Do you prefer dry or wet weather?<br>What kind of weather do you like most?<br>What’s your favourite season?<br>What kind of weather is typical in your hometown?  </p><h4 id="7-Photos"><a href="#7-Photos" class="headerlink" title="7. Photos"></a>7. Photos</h4><p>Do you like to take photos?<br>Do you prefer to take photos yourself or to have other people take photos?<br>How often do you take photos?<br>In what situations do you take photos?<br>How do you keep your photos?  </p><h4 id="8-Travel"><a href="#8-Travel" class="headerlink" title="8.Travel"></a>8.Travel</h4><p>Do you like travelling?<br>Which cities have you travelled to?<br>What kind of cities do you like to travel to?<br>What is the place that left you the deepest impression when travelling?  </p><h4 id="9-Music"><a href="#9-Music" class="headerlink" title="9. Music"></a>9. Music</h4><p>When do you listen to music?<br>How much time do you spend listening to music every day?<br>What kinds of music do you like to listen to?<br>What’s your favorite kind of music?<br>Have you ever been to a concert before?  </p><h4 id="10-Work-or-study"><a href="#10-Work-or-study" class="headerlink" title="10. Work or study"></a>10. Work or study</h4><p>What work do you do?<br>Do you like your job?<br>Why did you choose to do that type of work (or, that job)?<br>Do you miss being a student?<br>Why did you choose to study that subject/ Why did you choose to study those subjects?<br>What subjects are you studying?<br>Do you prefer to study in the mornings or in the afternoons?<br>Are you looking forward to working?<br>Do you like your subject?(Why?/Why not?)  </p><blockquote><p>My work is programming, which also is relevant to my major in my University. And I work in Shanghai now.  </p></blockquote><blockquote><p>Absolutely yes. Because not only can I earn some programming experience for my job, but also there are many benefits in our company. for example, foods like dessert and snacks are provided for free in my company, and there is housing subsidies every month.  </p></blockquote><blockquote><p>There are two reasons for that. One of the reasons is that the job is closely ralated to my major Computer Science.<br>For another reason, in my view, IT industry will have a broad prospect in the future, and I am unlikely lose my job.  </p></blockquote><h4 id="11-Hometown"><a href="#11-Hometown" class="headerlink" title="11. Hometown"></a>11. Hometown</h4><p>What’s (the name of) your hometown (again)?<br>Is that a big city or a small place?<br>How long have you been living there?<br>Do you like your hometown?<br>Is there anything you dislike about it?<br>What do you like (most) about your hometown?<br>Do you like living there?<br>Please describe your hometown a little.<br>Do you think you will continue living there for a long time?  </p><h4 id="12-Perfume"><a href="#12-Perfume" class="headerlink" title="12. Perfume"></a>12. Perfume</h4><p>Do you use perfume?<br>What kind of perfume do you like?<br>What does perfume mean to you?<br>Do you give perfume as a gift?    </p><h4 id="13-Smile"><a href="#13-Smile" class="headerlink" title="13. Smile"></a>13. Smile</h4><p>Do you like to smile?<br>When do people smile at others?<br>Do you smile when people take pictures of you?<br>Can you recognise a fake smile?    </p><h4 id="14-Reading"><a href="#14-Reading" class="headerlink" title="14. Reading"></a>14. Reading</h4><p>Do you like reading?<br>What kind of books do you read?<br>Do you read electronic books?<br>Do you read books related to your profession?    </p><h4 id="15-Outdoor"><a href="#15-Outdoor" class="headerlink" title="15. Outdoor"></a>15. Outdoor</h4><p>Do you prefer to be indoors or outdoors?<br>Did you like to go outside when you were young?<br>Did you often go over to your friends’ house when you were young?<br>Is it important for children to play outdoors?  </p><h4 id="16-Math"><a href="#16-Math" class="headerlink" title="16. Math"></a>16. Math</h4><p>Do you think mathematics is important?<br>Do you think it’s difficult to learn mathematics well?<br>Are girls generally good at mathematics?<br>Do you often use a calculator?    </p><h4 id="17-Plan"><a href="#17-Plan" class="headerlink" title="17. Plan"></a>17. Plan</h4><p>Do you make plans every day?<br>Are you good at managing your time?<br>What is the latest plan you made?<br>What is the hardest part about making plans?    </p><h4 id="18-Garbage"><a href="#18-Garbage" class="headerlink" title="18. Garbage"></a>18. Garbage</h4><p>Why do some people throw garbage on the street?<br>What do you do with garbage when you are on the street?<br>How do you feel when you see people throw garbage on the street?<br>Do you think your city is clean or not?    </p><h4 id="19-Market"><a href="#19-Market" class="headerlink" title="19. Market"></a>19. Market</h4><p>What do street markets sell?<br>Are there many street markets in China?<br>What are the differences between street markets and supermarkets?<br>Do you often go to the supermarket?    </p><h4 id="20-Visit-relatives"><a href="#20-Visit-relatives" class="headerlink" title="20. Visit relatives"></a>20. Visit relatives</h4><p>Do you often visit your relatives?<br>What do you do when visiting relatives?<br>When was the last time you visited a relative?<br>Why do people visit their relatives?    </p><h4 id="21-Borrowing-x2F-lending"><a href="#21-Borrowing-x2F-lending" class="headerlink" title="21. Borrowing / lending"></a>21. Borrowing / lending</h4><p>Have you borrowed books from others?<br>Have you ever borrowed money from others?<br>Do you like to lend things to others?<br>How do you feel when people don’t return things they borrowed from you?  </p><h4 id="22-Social-network"><a href="#22-Social-network" class="headerlink" title="22. Social network"></a>22. Social network</h4><p>How often do you use social networking applications?<br>Why do you use social networking apps?<br>What are the disadvantages of social networking apps?<br>Do you think it is good to make friends online?  </p><h3 id="P2-amp-3-OLD"><a href="#P2-amp-3-OLD" class="headerlink" title="P2&amp;3 OLD"></a>P2&amp;3 OLD</h3><h4 id="1-历史建筑"><a href="#1-历史建筑" class="headerlink" title="1. 历史建筑"></a>1. 历史建筑</h4><p>Describe a historical building you have been to<br>You should say:<br>Where it is<br>What it looks like<br>What it is used for now<br>What you learned there<br>And how you felt about this historical building  </p><p>Part 3<br>Do Chinese people like to visit historical buildings?<br>Why do people visit historical buildings?<br>Is it necessary to protect historical buildings?<br>Do most people agree to the government’s funding to protect historical buildings?  </p><h4 id="2-邀请聚餐"><a href="#2-邀请聚餐" class="headerlink" title="2. 邀请聚餐"></a>2. 邀请聚餐</h4><p>Describe an occasion when you invite your family or friends to dinner<br>You should say:<br>When you invited them<br>Where you had the dinner (At home or at the restaurant?)<br>Why you invited them<br>And how you felt about this dinner  </p><p>Part 3<br>Where do Chinese people usually eat? At restaurants or at home?<br>Why do more and more people like to eat at restaurants rather than at home?<br>What are the advantages and disadvantages of eating at restaurants?<br>Do you think it is possible that everyone will eat at restaurants instead of at home in the future?  </p><h4 id="3-喜欢的歌手"><a href="#3-喜欢的歌手" class="headerlink" title="3. 喜欢的歌手"></a>3. 喜欢的歌手</h4><p>Describe your favorite singer or band<br>You should say:<br>Who your favorite singer is<br>What his/her personality is<br>What kind of style his/her music belongs to<br>And explain why he/she is your favorite singer  </p><p>Part 3<br>What kind of music do people like at different ages?<br>What kind of music is popular in China now and what kind will be in the future?<br>Do people learn to sing nowadays?<br>Do you think the most popular singer is the best one?  </p><h4 id="4-想法有趣的人"><a href="#4-想法有趣的人" class="headerlink" title="4.想法有趣的人"></a>4.想法有趣的人</h4><p>Describe a person who has interesting ideas or opinions<br>You should say:<br>Who this person is<br>What this person does<br>How you know him<br>And explain why you think his/her ideas and opinions are interesting  </p><p>Part 3<br>When do children begin to have their own ideas?<br>Why are there more and more differences between children and their parents?<br>What are the advantages and disadvantages of setting rules for children?<br>Is there someone with good ideas that has changed many people’s lives?  </p><h4 id="5-说外语的人"><a href="#5-说外语的人" class="headerlink" title="5.说外语的人"></a>5.说外语的人</h4><p>Describe someone who speaks a foreign language well<br>You should say:<br>Who this person is<br>What kind of foreign language he/she speaks<br>Why he/she learns this foreign language<br>And explain why you think he/she speaks this foreign language well  </p><p>Part 3<br>Is learning a foreign language important?<br>What benefits can a foreign language bring to one’s career?<br>Do you think English will be the mainstream language of the world in the future?<br>When learning a foreign language, which part is easier? Speaking or writing?  </p><h4 id="6-早起"><a href="#6-早起" class="headerlink" title="6.早起"></a>6.早起</h4><p>Describe an occasion when you got up early<br>You should say:<br>When you got up<br>What you did<br>Why you got up early<br>And how you felt about it  </p><p>Part 3<br>What kind of people usually get up early? And why?<br>Is it easier for older people to get up early than young people?<br>What are the benefits of getting up early?<br>What effect does sleeping in late have on a person’s life patterns?  </p><h4 id="7-助你实现目标的人"><a href="#7-助你实现目标的人" class="headerlink" title="7.助你实现目标的人"></a>7.助你实现目标的人</h4><p>Describe a person who encouraged and helped you to achieve a goal<br>You should say:<br>Who this person is<br>What this person encouraged you to do<br>How this person helped you<br>And explain why this encouragement helped you to achieve the goal  </p><p>Part 3<br>Why is it important for teenagers to set goals?<br>What will encourage children to learn more?<br>Do parents and teachers punish children physically nowadays?<br>Who do you think has the greater influence on the goal&gt;setting of children? Teachers or parents?  </p><h4 id="8-交通工具出故障"><a href="#8-交通工具出故障" class="headerlink" title="8.交通工具出故障"></a>8.交通工具出故障</h4><p>Describe an experience that the vehicle you took broke down in your travel<br>You should say:<br>Where it happened<br>When it happened<br>Who you were with at that time<br>And what impacts this breakdown had  </p><p>Part 3  </p><p>Who likes to travel more? Older people or younger people?<br>Are there fewer people using private cars because of improved public transport?<br>What do you think needs to be improved in public transport?<br>What are the advantages and disadvantages of private transport?  </p><h4 id="9-给别人建议"><a href="#9-给别人建议" class="headerlink" title="9.给别人建议"></a>9.给别人建议</h4><p>Describe a time that you gave advice to others<br>You should say:<br>Who you gave advice to<br>What the advice was<br>Why you gave advice<br>And how you felt about the advice  </p><p>Part 3<br>What kinds of advice do parents give to their children?<br>How do experts give advice to others? (e.g. a doctor gives advice to his patients)<br>What advice do parents give to teenagers about making friends?<br>Whose advice is more helpful? Parents’ or friends’?  </p><h4 id="10-让你笑的小孩"><a href="#10-让你笑的小孩" class="headerlink" title="10.让你笑的小孩"></a>10.让你笑的小孩</h4><p>Describe a time a child made you laugh<br>You should say:<br>When it was<br>Where you were<br>Who the child was<br>What the child did<br>And explain why you laughed  </p><p>Part 3<br>What can make children laugh?<br>What do you think is the best age for people to have children?<br>Do you think people should be trained before they become parents?<br>Do you think childhood is the most important in one’s development?  </p><h4 id="11-陌生人的电话"><a href="#11-陌生人的电话" class="headerlink" title="11.陌生人的电话"></a>11.陌生人的电话</h4><p>Describe a time you heard a stranger talking on the phone in the public place<br>You should say:<br>Where you were<br>When it was<br>What the stranger was talking about<br>And explain how you felt about it  </p><p>Part 3<br>Why do you think some people talk aloud on public transport?<br>Should people be banned from talking aloud in public places?<br>Is it bad to talk on the phone in public places?<br>Why do some people always break rules in public places?  </p><h4 id="12-外国名人"><a href="#12-外国名人" class="headerlink" title="12.外国名人"></a>12.外国名人</h4><p>Describe a foreign celebrity you want to meet in person<br>You should say:<br>Who this person is<br>How you knew about this person<br>What this person does<br>Why you want to meet this person  </p><p>Part 3<br>How can people become famous?<br>What are the advantages and disadvantages of becoming a celebrity?<br>What influences can famous people have on the society?<br>Why can some celebrities stay famous for a long time while some cannot?  </p><h4 id="13-水上运动"><a href="#13-水上运动" class="headerlink" title="13.水上运动"></a>13.水上运动</h4><p>What can people do with the Internet in the future? And how?  </p><p>How you found it was incorrect<br>Describe a water sport you would like to try in the future<br>You should say:<br>What it is<br>Where you would like to try it<br>How difficult it is<br>And why you would like to try it  </p><p>Part 3<br>What’s the difference between outdoor sports and indoor sports?<br>What kinds of water sports are popular nowadays?<br>Why should we develop water transport?<br>Do you think it is necessary for everyone to learn to swim?  </p><h4 id="14-利用网络解决问题"><a href="#14-利用网络解决问题" class="headerlink" title="14.利用网络解决问题"></a>14.利用网络解决问题</h4><p>Describe a time you solved a problem through the Internet<br>You should say:<br>What the problem was<br>How you solved this problem<br>How long it took to solve this problem<br>And how you felt about it  </p><p>Part 3<br>What do people do online in their free time?<br>What impacts does the Internet have on schools?<br>Do you think many people waste their time online?  </p><h4 id="15-广告"><a href="#15-广告" class="headerlink" title="15.广告"></a>15.广告</h4><p>Describe an advertisement you remember well<br>You should say:<br>Where you saw it<br>What it was about<br>What it was like<br>Why you remember it well  </p><p>Part 3<br>Why do some people hate advertisements?<br>Do people usually buy stuff after watching advertisements?<br>Is music useful in advertising?<br>What are the advantages of TV advertisements? How about internet advertisements?  </p><h4 id="16-获得错误信息"><a href="#16-获得错误信息" class="headerlink" title="16.获得错误信息"></a>16.获得错误信息</h4><p>Describe an occasion when you got incorrect information<br>You should say:<br>Why you got it<br>When you got it<br>How you got it<br>And how you felt about it  </p><p>Part 3<br>What kinds of professions are related to giving information to others?<br>What’s the difference between giving information by phone and by email?<br>How can people check whether a piece of information is correct or not?<br>Do people trust the information online?  </p><h4 id="17-游戏节目"><a href="#17-游戏节目" class="headerlink" title="17.游戏节目"></a>17.游戏节目</h4><p>Describe a game show or a quiz program you watched on TV or online<br>You should say:<br>Where you watched it<br>What it was like<br>How often you watched it<br>How you liked it<br>And explain why you liked/disliked it    </p><p>Part 3<br>Why do people like to watch TV shows?<br>What kinds of TV shows do people like to watch?<br>What is the difference between the games people play now and those people played in the past?<br>Why do some people watch TV shows online?  </p><h4 id="18-实用技能"><a href="#18-实用技能" class="headerlink" title="18.实用技能"></a>18.实用技能</h4><p>Describe a practical skill you learned<br>You should say:<br>What it was<br>When you learned it<br>Why you learned it<br>And how you felt about it  </p><p>Part 3<br>What is the most important practical skill in modern society?<br>What kinds of skills are difficult to learn?<br>What kinds of professions require practical skills?<br>What are some special skills that people can learn?  </p><h4 id="19-想获得的奖"><a href="#19-想获得的奖" class="headerlink" title="19.想获得的奖"></a>19.想获得的奖</h4><p>Describe a prize you want to win<br>You should say:<br>What this prize is<br>How you knew about it<br>What you will do to win it<br>And explain why you want to win it  </p><p>Part 3<br>What rewards can children get from school?<br>Should parents push their children to get prizes?<br>Is it good for children to compete for prizes at school?<br>What kinds of rewards can companies offer to their outstanding employees?  </p><h4 id="20-纪念品"><a href="#20-纪念品" class="headerlink" title="20.纪念品"></a>20.纪念品</h4><p>Describe something special you took home from a tourist attraction<br>You should say:<br>What it was<br>When you bought it<br>Where you bought it<br>What it was like<br>And explain why you think it was special  </p><p>Part 3<br>What souvenirs would people buy from tourist attractions?<br>Why do people like to take photos when travelling?<br>Is it good that the locals sell things to tourists?<br>What are the pros and cons of taking professional cameras when travelling?  </p><h4 id="21-旅游经历"><a href="#21-旅游经历" class="headerlink" title="21.旅游经历"></a>21.旅游经历</h4><p>Describe an unusual experience of traveling<br>You should say:<br>Where you went<br>When you went there<br>Who you were with<br>What you did there<br>And explain why it is unusual  </p><p>Part 3<br>What are some popular attractions that people like to visit?<br>Why do many people like to travel abroad?<br>What do people usually do during long holidays?<br>Do you think there will be more ecotourism in the future?  </p><h4 id="22-喜欢穿的衣服"><a href="#22-喜欢穿的衣服" class="headerlink" title="22.喜欢穿的衣服"></a>22.喜欢穿的衣服</h4><p>Describe a piece of clothing you enjoy wearing<br>You should say:<br>Where you bought it<br>How often you wear it<br>What it is like<br>And explain why you enjoy wearing it<br>Part 3<br>What’s the difference between the dressing style of young people and that of old people?<br>Do the people living in south China (warmer) wear different clothes from the people living in the north (colder)?<br>Do you think students like to wear uniforms?<br>Why he helps others<br>And how you feel about this person<br>When do people wear formal clothes?  </p><h4 id="23-公园"><a href="#23-公园" class="headerlink" title="23.公园"></a>23.公园</h4><p>Describe a park/garden you like visiting<br>You should say:<br>Where the park is<br>When you visit it<br>What the park is like<br>And explain why you like visiting it  </p><p>Part 3<br>What are the benefits that a park can bring to a city?<br>Should people help clean public gardens?<br>Do young people go to the park very often?<br>Why do some people plant flowers at home?  </p><h4 id="24-乐于助人的人"><a href="#24-乐于助人的人" class="headerlink" title="24.乐于助人的人"></a>24.乐于助人的人</h4><p>Describe a person who often helps others<br>You should say:<br>Who this person is<br>How often he helps others<br>How he helps others<br>Do science and technology improve the relationship between people?  </p><p>Part 3<br>Do people nowadays help others more than in the past?<br>Who should teach children to help others? Parents or teachers?<br>In what kinds of professions do people help others more?<br>Why are some people willing to help others?  </p><h4 id="25-和朋友出去"><a href="#25-和朋友出去" class="headerlink" title="25.和朋友出去"></a>25.和朋友出去</h4><p>Describe an experience that you went out with your friends and had a good time<br>You should say:<br>Where you went<br>When you went out<br>What you did<br>And explain why you had a good time  </p><p>Part 3<br>Who should people spend more time with? Family or friends?<br>What’s the difference between staying with friends and staying with family?<br>Do people prefer being with a large group of people or with a few friends?  </p>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> English </tag>
            
            <tag> IELTS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Text Convert to Pic</title>
      <link href="/2019/10/08/text-convert-to-pic/"/>
      <url>/2019/10/08/text-convert-to-pic/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image <span class="token punctuation">,</span> ImageDraw<span class="token punctuation">,</span> ImageFont<span class="token keyword">import</span> os<span class="token keyword">def</span> <span class="token function">ttp</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> fone_type_file<span class="token punctuation">,</span> font_size<span class="token punctuation">,</span> font_color<span class="token punctuation">,</span> position<span class="token punctuation">,</span> row_lens<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    :param text: 要插入的文字    :param fone_type_file: 文字类型文件名称    :param font_size: 文字大小    :param position: 要插入的位置    :param row_lens: 一行的字数    :return:    """</span>    im <span class="token operator">=</span> Image<span class="token punctuation">.</span>open<span class="token punctuation">(</span><span class="token string">'bg1.png'</span><span class="token punctuation">)</span>    datas <span class="token operator">=</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>    data <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">if</span> <span class="token operator">not</span> datas<span class="token punctuation">:</span>        datas <span class="token operator">=</span> <span class="token punctuation">[</span>text<span class="token punctuation">]</span>    <span class="token keyword">for</span> d <span class="token keyword">in</span> datas<span class="token punctuation">:</span>        tempd <span class="token operator">=</span> <span class="token string">''</span>        <span class="token keyword">if</span> <span class="token operator">not</span> d<span class="token punctuation">:</span>            tempd <span class="token operator">=</span> <span class="token string">' '</span>        lend <span class="token operator">=</span> len<span class="token punctuation">(</span>d<span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> lend<span class="token punctuation">,</span> row_lens<span class="token punctuation">)</span><span class="token punctuation">:</span>            tempd <span class="token operator">=</span> tempd <span class="token operator">+</span> d<span class="token punctuation">[</span>i<span class="token punctuation">:</span>i<span class="token operator">+</span>row_lens<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'\n\n'</span>        <span class="token comment" spellcheck="true"># elif len(d) > 60:</span>        <span class="token comment" spellcheck="true">#     d1 = d[:60] + '\n'</span>        <span class="token comment" spellcheck="true">#     d2 = d[60:]</span>        <span class="token comment" spellcheck="true">#     d = d1 + ' \n'+ d2</span>        data <span class="token operator">+=</span> <span class="token punctuation">(</span>tempd <span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">#data += ' \n'</span>    data <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    dr <span class="token operator">=</span> ImageDraw<span class="token punctuation">.</span>Draw<span class="token punctuation">(</span>im<span class="token punctuation">)</span>    font <span class="token operator">=</span> ImageFont<span class="token punctuation">.</span>truetype<span class="token punctuation">(</span>fone_type_file<span class="token punctuation">,</span> font_size<span class="token punctuation">)</span>    dr<span class="token punctuation">.</span>text<span class="token punctuation">(</span>position<span class="token punctuation">,</span> data<span class="token punctuation">,</span> font<span class="token operator">=</span>font<span class="token punctuation">,</span> fill<span class="token operator">=</span> font_color<span class="token punctuation">,</span> spacing<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> align<span class="token operator">=</span><span class="token string">'left'</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> im<span class="token keyword">if</span> __name__<span class="token operator">==</span><span class="token string">"__main__"</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true">#str = "fafafffffffff测试fafafafafafafafafafafafaf"</span>    <span class="token comment" spellcheck="true">#target_file = target_file.resize((1000, 600))</span>    <span class="token comment" spellcheck="true"># target_file.save("bg1.png",'PNG')</span>    str <span class="token operator">=</span> <span class="token string">''</span>    row_pos <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">for</span> line2 <span class="token keyword">in</span> open<span class="token punctuation">(</span><span class="token string">"question.txt"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        str <span class="token operator">=</span> str <span class="token operator">+</span> line2    <span class="token comment" spellcheck="true"># 字体文件需要先下好</span>    target_file <span class="token operator">=</span> ttp<span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">'./FangZhengHeiTiJianTi-1.ttf'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'#000000'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>    target_file<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>    target_file<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">"res.png"</span><span class="token punctuation">,</span><span class="token string">'PNG'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Scripts </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CV </tag>
            
            <tag> Scripts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Some operation for Aliyun oss</title>
      <link href="/2019/10/08/some-operation-for-aliyun-oss/"/>
      <url>/2019/10/08/some-operation-for-aliyun-oss/</url>
      
        <content type="html"><![CDATA[<h2 id="一、官方接口文档"><a href="#一、官方接口文档" class="headerlink" title="一、官方接口文档"></a>一、官方接口文档</h2><p><a href="https://help.aliyun.com/product/31815.html">aliyun oss</a></p><h2 id="二、实例操作"><a href="#二、实例操作" class="headerlink" title="二、实例操作"></a>二、实例操作</h2><h3 id="1-获取特定文件夹下的文件数量"><a href="#1-获取特定文件夹下的文件数量" class="headerlink" title="1. 获取特定文件夹下的文件数量"></a>1. 获取特定文件夹下的文件数量</h3><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> oss2<span class="token comment" spellcheck="true"># 阿里云主账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM账号进行API访问或日常运维，请登录 https://ram.console.aliyun.com 创建RAM账号。</span>auth <span class="token operator">=</span> oss2<span class="token punctuation">.</span>Auth<span class="token punctuation">(</span><span class="token string">'keyid'</span><span class="token punctuation">,</span> <span class="token string">'secret'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># Endpoint以杭州为例，其它Region请按实际情况填写。</span>bucket <span class="token operator">=</span> oss2<span class="token punctuation">.</span>Bucket<span class="token punctuation">(</span>auth<span class="token punctuation">,</span> <span class="token string">'endpoint'</span><span class="token punctuation">,</span> <span class="token string">'bucket名称'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 列举包含指定前缀的文件。默认列举100个文件。</span>res <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> obj <span class="token keyword">in</span> oss2<span class="token punctuation">.</span>ObjectIterator<span class="token punctuation">(</span>bucket<span class="token punctuation">,</span> prefix <span class="token operator">=</span> <span class="token string">'文件名'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true">#  print(obj.key)</span>    res <span class="token operator">+=</span> <span class="token number">1</span><span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-获取特定文件夹的大小，平均文件大小"><a href="#2-获取特定文件夹的大小，平均文件大小" class="headerlink" title="2. 获取特定文件夹的大小，平均文件大小"></a>2. 获取特定文件夹的大小，平均文件大小</h3><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> oss2<span class="token comment" spellcheck="true"># 阿里云主账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM账号进行API访问或日常运维，请登录 https://ram.console.aliyun.com 创建RAM账号。</span>auth <span class="token operator">=</span> oss2<span class="token punctuation">.</span>Auth<span class="token punctuation">(</span><span class="token string">'keyid'</span><span class="token punctuation">,</span> <span class="token string">'secret'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># Endpoint以杭州为例，其它Region请按实际情况填写。</span>bucket <span class="token operator">=</span> oss2<span class="token punctuation">.</span>Bucket<span class="token punctuation">(</span>auth<span class="token punctuation">,</span> <span class="token string">'endpoint'</span><span class="token punctuation">,</span> <span class="token string">'bucket名称'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># 列举包含指定前缀的文件。默认列举100个文件。</span>res <span class="token operator">=</span> <span class="token number">0</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> obj <span class="token keyword">in</span> oss2<span class="token punctuation">.</span>ObjectIterator<span class="token punctuation">(</span>bucket<span class="token punctuation">,</span> prefix <span class="token operator">=</span> <span class="token string">'文件名'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># print(obj.key)</span>    res <span class="token operator">+=</span> <span class="token number">1</span>    length <span class="token operator">+=</span> obj<span class="token punctuation">.</span>size<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'directory: 文件名'</span> <span class="token operator">+</span> <span class="token string">'  length:'</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>length <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"MB"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'the number of file: '</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'average length: '</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>length<span class="token operator">/</span>res<span class="token operator">/</span><span class="token number">1024</span><span class="token operator">/</span><span class="token number">1024</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"MB"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Scripts </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scripts </tag>
            
            <tag> oss </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Batch Gradient Descent in Linear Regression with Multiple Variable</title>
      <link href="/2019/10/07/batch-gradient-descent-in-linear-regression-with-multiple-variable/"/>
      <url>/2019/10/07/batch-gradient-descent-in-linear-regression-with-multiple-variable/</url>
      
        <content type="html"><![CDATA[<h2 id="一、参考资料"><a href="#一、参考资料" class="headerlink" title="一、参考资料"></a>一、参考资料</h2><ol><li><a href="https://www.cnblogs.com/ooon/p/4947688.html">深入梯度下降(Gradient Descent)算法</a></li><li><a href="https://www.cnblogs.com/pinard/p/5970503.html">梯度下降（Gradient Descent）小结(by 刘建平Pinard)</a></li></ol><h2 id="二、代码实现"><a href="#二、代码实现" class="headerlink" title="二、代码实现"></a>二、代码实现</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token comment" spellcheck="true">#读入训练数据与测试数据</span>df_train <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'train_data.txt'</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">'\t'</span><span class="token punctuation">,</span> header <span class="token operator">=</span> None<span class="token punctuation">)</span>df_test <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'test_data.txt'</span><span class="token punctuation">,</span>sep <span class="token operator">=</span> <span class="token string">'\t'</span><span class="token punctuation">,</span>header <span class="token operator">=</span> None<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#将测试数据与训练数据数组化</span>train_array <span class="token operator">=</span> df_train<span class="token punctuation">.</span>valuestest_array <span class="token operator">=</span> df_test<span class="token punctuation">.</span>values<span class="token comment" spellcheck="true">#记录训练数据每一列的的最大最小值</span>train_array_max <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>train_array_min <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">#归一化训练数据和测试数据</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>train_array<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    train_array_max<span class="token punctuation">.</span>append<span class="token punctuation">(</span>np<span class="token punctuation">.</span>max<span class="token punctuation">(</span>train_array<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    train_array_min<span class="token punctuation">.</span>append<span class="token punctuation">(</span>np<span class="token punctuation">.</span>min<span class="token punctuation">(</span>train_array<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">#print(train_array_max[i],train_array_min[i])</span>    train_array<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>train_array<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span><span class="token operator">-</span>train_array_min<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>train_array_max<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>train_array_min<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    test_array<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>test_array<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span><span class="token operator">-</span>train_array_min<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>train_array_max<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>train_array_min<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#拼接训练数据</span><span class="token comment" spellcheck="true">#n组训练数据，m个参数</span>n <span class="token operator">=</span> train_array<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>m <span class="token operator">=</span> train_array<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>hstack<span class="token punctuation">(</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">[</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>train_array<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span>m<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>n<span class="token punctuation">,</span>m<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>y <span class="token operator">=</span> train_array<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span>m<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#print(y.T.shape)</span><span class="token comment" spellcheck="true">#print(x)</span><span class="token comment" spellcheck="true">#print(y)</span><span class="token comment" spellcheck="true">#print(n)</span><span class="token comment" spellcheck="true">#存放系数矩阵</span>h0 <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span>h <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span>J <span class="token operator">=</span> np<span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>h0<span class="token punctuation">.</span>T<span class="token punctuation">)</span><span class="token operator">-</span>y<span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>n<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#print(h0)</span><span class="token comment" spellcheck="true">#print(h0.T)</span><span class="token comment" spellcheck="true">#print(J)</span><span class="token comment" spellcheck="true"># print(x.shape[0],x.shape[1])</span><span class="token comment" spellcheck="true"># print(y.shape[0],y.shape[1])</span><span class="token comment" spellcheck="true"># print((x.dot(h0.T)-y).shape[0],(x.dot(h0.T)-y).shape[1])</span><span class="token comment" spellcheck="true"># print((x[:,0].reshape(n,1)).shape[0],(x[:,0].reshape(n,1)).shape[1])</span><span class="token comment" spellcheck="true"># print(((x.dot(h0.T)-y)*x[:,j].reshape(n,1)).shape[0],((x.dot(h0.T)-y)*x[:,j].reshape(n,1)).shape[1])</span>J0 <span class="token operator">=</span> <span class="token number">0</span>a <span class="token operator">=</span> <span class="token number">0.01</span>loss <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">import</span> copy<span class="token comment" spellcheck="true">#BGD</span><span class="token keyword">while</span> np<span class="token punctuation">.</span>abs<span class="token punctuation">(</span>J<span class="token operator">-</span>J0<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1e</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">:</span>    loss<span class="token punctuation">.</span>append<span class="token punctuation">(</span>J<span class="token punctuation">)</span>    J0 <span class="token operator">=</span> J    <span class="token keyword">for</span> j <span class="token keyword">in</span> range<span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true">#print(np.sum((x.dot(h0.T)-y)*x[:,j].reshape(n,1))/n)</span>        h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> h0<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> a<span class="token operator">*</span>np<span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>h0<span class="token punctuation">.</span>T<span class="token punctuation">)</span><span class="token operator">-</span>y<span class="token punctuation">)</span><span class="token operator">*</span>x<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span>n    h0 <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>h<span class="token punctuation">)</span>    J <span class="token operator">=</span> np<span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>h0<span class="token punctuation">.</span>T<span class="token punctuation">)</span><span class="token operator">-</span>y<span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>n<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#梯度下降过程中损失的变化趋势</span><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltplt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>len<span class="token punctuation">(</span>loss<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> loss<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#训练数据预测值与真实值进行比较</span>pre_y <span class="token operator">=</span> x<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>h<span class="token punctuation">.</span>T<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>len<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>y<span class="token punctuation">,</span>pre_y<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#预测测试数据</span>tn <span class="token operator">=</span> test_array<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>test_x <span class="token operator">=</span> np<span class="token punctuation">.</span>hstack<span class="token punctuation">(</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">[</span>tn<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>test_array<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span>m<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>tn<span class="token punctuation">,</span>m<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>test_y <span class="token operator">=</span> test_array<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span>m<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>tn<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>pre_test_y <span class="token operator">=</span> test_x<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>h<span class="token punctuation">.</span>T<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#预测值与真实值进行比较</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>len<span class="token punctuation">(</span>test_y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> test_y<span class="token punctuation">,</span>pre_test_y<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="三、实验结果"><a href="#三、实验结果" class="headerlink" title="三、实验结果"></a>三、实验结果</h2><p><img src="https://img-blog.csdnimg.cn/20190415000903356.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1Rhd24wMDAw,size_16,color_FFFFFF,t_70" alt="梯度下降过程中损失的变化趋势"></p><p><img src="https://img-blog.csdnimg.cn/20190415002023426.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1Rhd24wMDAw,size_16,color_FFFFFF,t_70" alt="训练数据预测值与真实值进行比较"></p><p><img src="https://img-blog.csdnimg.cn/20190415000947956.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1Rhd24wMDAw,size_16,color_FFFFFF,t_70" alt="测试数据预测值与真实值进行比较"></p><h2 id="四、其他实例"><a href="#四、其他实例" class="headerlink" title="四、其他实例"></a>四、其他实例</h2><h3 id="1-题目"><a href="#1-题目" class="headerlink" title="1. 题目"></a>1. 题目</h3><center><object data="http://www.baige.me/v?i=SOH" type="application/pdf" width="800px&quot;" height="700px" view="FitH">    <embed src="http://www.baige.me/v?i=SOH">     <center>     This browser does not support PDFs. Please download the PDF to view it:     <a href="http://www.baige.me/v?i=SOH">Download PDF</a>.<p></p>     </center></object></center><!-- <div class="row">    <embed src="http://www.baige.me/v?i=SOH" width="100%" height="550" type="application/pdf"></div> --><h3 id="2-数据"><a href="#2-数据" class="headerlink" title="2. 数据"></a>2. 数据</h3><p>train_data: <a href="https://paste.ubuntu.com/p/XMZkb9Q5qt/">传送门</a></p><h3 id="3-代码"><a href="#3-代码" class="headerlink" title="3. 代码"></a>3. 代码</h3><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> numpy <span class="token keyword">as</span> npdata <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'data1a.txt'</span><span class="token punctuation">,</span> header<span class="token operator">=</span>None<span class="token punctuation">)</span>data <span class="token operator">=</span> data<span class="token punctuation">.</span>values<span class="token comment" spellcheck="true"># n 表示特征数，m 表示样本数</span><span class="token comment" spellcheck="true"># print(data_x.shape)</span>n <span class="token operator">=</span> data<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span>m <span class="token operator">=</span> data<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># data_x 为输入特征, data_y 为目标结果</span>data_x <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>m<span class="token punctuation">,</span> n<span class="token punctuation">)</span>data_x <span class="token operator">=</span> np<span class="token punctuation">.</span>concatenate<span class="token punctuation">(</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">[</span>m<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_x<span class="token punctuation">)</span><span class="token punctuation">,</span> axis <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>data_y <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># print(data)</span><span class="token comment" spellcheck="true"># print(data_x)</span><span class="token comment" spellcheck="true"># print(data_y)</span>theta <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># print(theta)</span><span class="token comment" spellcheck="true"># 计算假设函数</span>h <span class="token operator">=</span> data_x<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#计算损失函数</span>J <span class="token operator">=</span> np<span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">(</span>h<span class="token operator">-</span>data_y<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>h<span class="token operator">-</span>data_y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>m<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># print(J)</span>alpha <span class="token operator">=</span> <span class="token number">0.01</span>J0 <span class="token operator">=</span> <span class="token number">0</span>loss <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Initial Loss: "</span><span class="token punctuation">,</span> J<span class="token punctuation">)</span><span class="token keyword">while</span> abs<span class="token punctuation">(</span>J<span class="token operator">-</span>J0<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0.00001</span><span class="token punctuation">:</span>    loss<span class="token punctuation">.</span>append<span class="token punctuation">(</span>J<span class="token punctuation">)</span>    J0 <span class="token operator">=</span> J    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        delta <span class="token operator">=</span> alpha<span class="token operator">*</span>np<span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">(</span>h<span class="token operator">-</span>data_y<span class="token punctuation">)</span><span class="token operator">*</span>data_x<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> i<span class="token punctuation">]</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>m<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span>m        theta<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> theta<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> delta    h <span class="token operator">=</span> data_x<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>theta<span class="token punctuation">)</span>    J <span class="token operator">=</span> np<span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">(</span>h<span class="token operator">-</span>data_y<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>h<span class="token operator">-</span>data_y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>m<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#     print(J)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Fianl Loss: "</span><span class="token punctuation">,</span> J<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Fianl theta: "</span><span class="token punctuation">,</span> theta<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> theta<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#梯度下降过程中损失的变化趋势</span><span class="token operator">%</span>matplotlib inline<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltplt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>len<span class="token punctuation">(</span>loss<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> loss<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Trend of loss during gradient descent"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>test_x <span class="token operator">=</span> np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>test_x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3.5</span>test_x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">7</span>test_y <span class="token operator">=</span> test_x<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"A, B 的利润分别为: "</span><span class="token punctuation">,</span> test_y<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> test_y<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>Initial Loss:  32.072733877455676Fianl Loss:  4.479729514503939Fianl theta:  -3.7217231514189435 1.175547657550631</code></pre><p><img src="https://i.loli.net/2019/10/07/DtCMIb6rqfxmH5u.png" alt="result.png"></p><pre><code>A, B 的利润分别为:  0.39269365000826495 4.507110451435473</code></pre>]]></content>
      
      
      <categories>
          
          <category> ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ML </tag>
            
            <tag> Linear Regression </tag>
            
            <tag> Gradient Descent </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Binary Index Tree</title>
      <link href="/2019/10/03/binary-index-tree/"/>
      <url>/2019/10/03/binary-index-tree/</url>
      
        <content type="html"><![CDATA[<p>一直感觉树状数组用处比较小而且局限、因为最基本的用法就是单点更新和区间求和、但是线段树也能做，只不过代码长一点，但是仔细的去了解了一下树状数组以后发现有很多很赞的地方值得学习。</p><h2 id="代码模板"><a href="#代码模板" class="headerlink" title="代码模板"></a>代码模板</h2><h3 id="单点更新、区间求和"><a href="#单点更新、区间求和" class="headerlink" title="单点更新、区间求和"></a>单点更新、区间求和</h3><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> i<span class="token punctuation">;</span> x <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//a[i]单点更新加一</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> r<span class="token punctuation">;</span> x <span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> res <span class="token operator">+</span><span class="token operator">=</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//求前缀[0,r]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="区间更新、单点查询"><a href="#区间更新、单点查询" class="headerlink" title="区间更新、单点查询"></a>区间更新、单点查询</h3><ul><li>对于操作C L R t&nbsp;：在区间L-R上每个值增加t</li></ul><p>&nbsp;</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> L<span class="token punctuation">;</span> x <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> t<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> R<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> x <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> t<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>对于操作Q i&nbsp; &nbsp;:查询当前a[i]的值</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> res <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> i<span class="token punctuation">;</span> x <span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span>  res <span class="token operator">+</span><span class="token operator">=</span> b<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="区间更新、区间查询"><a href="#区间更新、区间查询" class="headerlink" title="区间更新、区间查询"></a>区间更新、区间查询</h3><ul><li>对于操作 C L R t&nbsp; &nbsp; : 对于数组a[n] 区间L-R都增加 t</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> L<span class="token punctuation">;</span> x <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> t<span class="token punctuation">,</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> L<span class="token operator">*</span>t<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> R<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> x <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> t<span class="token punctuation">,</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> <span class="token punctuation">(</span>R<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>对于操作 Q L R : 查询数组a[n] 区间L-R的和</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> res <span class="token operator">=</span> s<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">-</span> s<span class="token punctuation">[</span>l<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> R<span class="token punctuation">;</span> x <span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> res <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">(</span>R<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>b<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">-</span>c<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> L<span class="token number">-1</span><span class="token punctuation">;</span> x <span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> res <span class="token operator">-</span><span class="token operator">=</span> L<span class="token operator">*</span>b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="算法原理"><a href="#算法原理" class="headerlink" title="算法原理"></a>算法原理</h2><p><a href="http://www.cnblogs.com/zybgmzl/p/6894426.html?utm_source=itdadao&amp;utm_medium=referral">树状数组基础详解入口</a></p><p>下图中:</p><p>红色表示树状数组c[i]所覆盖a[n]中的范围 ,其中树状的某一项所覆盖的长度为lowbit(x) = x&amp;-x ,<br>即 c[x] = a[x-(x&amp;-x)+1]+…+a[x]</p><p>蓝色表示当a[i] 需要增加 t 时， 树状数组中哪些项需要做出改变</p><p>绿色表示当需要查询某一个区间和时，需要求的两个前缀和及其各自需要通过树状数组的哪些项来进行a[n]的前缀和求和</p><p><img src="https://img-blog.csdnimg.cn/20190507222001213.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1Rhd24wMDAw,size_16,color_FFFFFF,t_70" alt="树状数组结构图"></p><h3 id="单点修改、区间查询"><a href="#单点修改、区间查询" class="headerlink" title="单点修改、区间查询"></a>单点修改、区间查询</h3><p>a[n]: 表示原来的数组，即我们题目中需要修改需要查询的数组&nbsp;<br>c[n]: 用来维护a[x]的后缀和(长度为lowbit(x) = x&amp;-x)的树状数组</p><p>C i t &nbsp;—&gt; &nbsp;a[i] 增加t&nbsp; —&gt;&nbsp; 在c[n]上操作</p><p>for(int x = i; x &lt;= n; x += x&amp;-x) c[x] += t;</p><p>Q L R&nbsp;—&gt; 求a[L] + a[L+1] + … + a[R] —&gt; 在c[n]上操作</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> R<span class="token punctuation">;</span> x<span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> res <span class="token operator">+</span><span class="token operator">=</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> L<span class="token number">-1</span><span class="token punctuation">;</span> x<span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> res <span class="token operator">-</span><span class="token operator">=</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="区间修改、单点查询"><a href="#区间修改、单点查询" class="headerlink" title="区间修改、单点查询"></a>区间修改、单点查询</h3><ul><li><p>a[n]: 原来的数组&nbsp; 设a[0] = 0</p></li><li><p>d[n]: 差分数组 &nbsp;d[i] = a[i]-a[i-1] :&nbsp; &nbsp;d[1] = a[1]-a[0], d[2] = a[2]-a[1]&nbsp;</p></li><li><p>b[n]: &nbsp;用来维护d[x]的后缀和(长度为lowbit(x) = x&amp;-x)的树状数组</p></li></ul><pre><code>Sd[n] = d[1] + d[2] + d[3] + ...+ d[n]&nbsp; &nbsp; &nbsp; &nbsp; = a[1]-a[0] + a[2]-a[1] + a[3]-a[2]+...+a[n-1]-a[n-2] + a[n]-a[n-1]&nbsp; &nbsp; &nbsp; &nbsp; = a[n] - a[0]&nbsp; &nbsp; &nbsp; &nbsp; = a[n]</code></pre><p>即&nbsp;&nbsp;$ a_{n} = \sum_{i=1}^{n} d_{i} $</p><ul><li>区间修改</li></ul><p>L R&nbsp;t —&gt; a[L] - a[R] 每一项都加t&nbsp; —&gt;&nbsp; &nbsp;因为 d[i] = a[i] - a[i-1]，所以我们使用d[n]的变化来存储a[n]的变化&nbsp; &nbsp;<br>—&gt; &nbsp;d[R+1] = a[R+1] - a[R] : d[n]数组变化为 ： d[R+1] = d[R+1] - t;<br>—&gt; &nbsp;对于 L &lt; k &lt;= R ： d[k] = a[k] - a[k-1]: 因为a[k] 和 a[k-1] 都加了t,所以d[k] 不变<br>—&gt; &nbsp;d[L] &nbsp;&nbsp;= a[L] - a[L-1] : d[n]数组变化为 ：d[L] = d[L] + t</p><p>&nbsp;—&gt; d[R+1] &nbsp;减少t —&gt; 在b[n]上操作<br>&nbsp;—&gt; d[L]&nbsp; &nbsp; &nbsp; &nbsp;增加t —&gt; 在b[n]上操作</p><p>即在b[n]上进行两个单点更新操作</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> R<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> x <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> t<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> L<span class="token punctuation">;</span> x <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x <span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span> b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> t<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>单点查询</li></ul><p>i&nbsp; —&gt; 求 a[i] = d[1] + d[2] + … d[n] —&gt; 在b[n]上求和操作</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> res <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> i<span class="token punctuation">;</span> x <span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x <span class="token operator">&amp;</span> <span class="token operator">-</span>x<span class="token punctuation">)</span> res <span class="token operator">+</span><span class="token operator">=</span> b<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="区间修改、区间查询"><a href="#区间修改、区间查询" class="headerlink" title="区间修改、区间查询"></a>区间修改、区间查询</h3><ul><li><p>a[n]: 原来的数组 &nbsp;设a[0] = 0</p></li><li><p>d[n]: 差分数组 &nbsp;d[i] = a[i]-a[i-1] : d[1] = a[1]-a[0], d[2] = a[2]-a[1]&nbsp;</p></li><li><p>b[n]: &nbsp;用来维护d[x]的后缀和(长度为lowbit(x) = x&amp;-x)</p></li><li><p>c[n]: &nbsp;用来维护e[x] = x*d[x]的后缀和(长度为lowbit(x) = x&amp;-x)</p></li></ul><p>求 a[1] + a[2] + a[3] +…+ a[n] =?</p><pre><code>原式 = sd[1] + sd[2] + sd[3] + sd[4] + ... + sd[n]  &nbsp; &nbsp;  = d[1] &nbsp;+ d[1]+d[2] + ... +(d[1] + d[2] + d[3] + ... d[n])  &nbsp; &nbsp;  = n * d[1] + (n-1) * d[2] +...+ 1 * d[n]  &nbsp; &nbsp;  = (n+1)(d[1]+d[2]+..+d[n]) - (1*d[1] + 2*d[2] + ... + n*d[n])&nbsp;  </code></pre><p>即在b[n]上进行一个区间求和操作和在c[n]上进行一个区间求和操作即可</p><p>即：<br>$ \because a[i] = \sum_{j=1}^{i}d[j] $<br>$ \therefore \sum_{i=1}^{n}a[i] = \sum_{i=1}^{n}\sum_{j=1}^{i}d[j] = \sum_{i=1}^{n}(n-i+1) * d[i] = n * \sum_{i=1}^{n} d[i] - \sum_{i=1}^{n}i*d[i] $</p><ul><li>区间修改</li></ul><p>C L R t&nbsp;</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> L<span class="token punctuation">;</span> x <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> t<span class="token punctuation">,</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> L<span class="token operator">*</span>t<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//为什么这里是L*t ?而不是x*t ? 因为我们是在维护e[L]增加L*t,即T=L*t</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> R<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> x <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> t<span class="token punctuation">,</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> <span class="token punctuation">(</span>R<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>区间查询</li></ul><p>Q L R</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> res <span class="token operator">=</span> s<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">-</span> s<span class="token punctuation">[</span>l<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> R<span class="token punctuation">;</span> x <span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> res <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">(</span>R<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>b<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">-</span>c<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> L<span class="token number">-1</span><span class="token punctuation">;</span> x <span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> res <span class="token operator">-</span><span class="token operator">=</span> L<span class="token operator">*</span>b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span> <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><p>例题： <a href="http://poj.org/problem?id=3468">POJ 3468 A Simple Problem with Intergers</a></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;cstdio></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;cstring></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1e5</span><span class="token operator">+</span><span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span><span class="token keyword">typedef</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> P<span class="token punctuation">;</span><span class="token macro property">#<span class="token directive keyword">define</span> PI 3.1415926</span><span class="token macro property">#<span class="token directive keyword">define</span> sc(x)  scanf("%d",&amp;x)</span><span class="token macro property">#<span class="token directive keyword">define</span> pf(x)  printf("%d",x)</span><span class="token macro property">#<span class="token directive keyword">define</span> pfn(x) printf("%d\n",x)</span><span class="token macro property">#<span class="token directive keyword">define</span> pfs(x) printf("%d ",x)</span><span class="token macro property">#<span class="token directive keyword">define</span> rep(n) for(int i = 0; i &lt; n; i++)</span><span class="token macro property">#<span class="token directive keyword">define</span> per(n) for(int i = n-1; i >= 0; i--)</span><span class="token macro property">#<span class="token directive keyword">define</span> mem(a,x) memset(a,x,sizeof(a))</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>q<span class="token punctuation">;</span>LL b<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>c<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>s<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">sc</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">sc</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">mem</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span><span class="token number">0LL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">rep</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">sc</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>s<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token function">mem</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span><span class="token number">0LL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">mem</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span><span class="token number">0LL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">rep</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">char</span> key<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> l<span class="token punctuation">,</span>r<span class="token punctuation">,</span>d<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s%d%d"</span><span class="token punctuation">,</span>key<span class="token punctuation">,</span><span class="token operator">&amp;</span>l<span class="token punctuation">,</span><span class="token operator">&amp;</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'C'</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token function">sc</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> l<span class="token punctuation">;</span>x <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">;</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> l <span class="token operator">*</span> d<span class="token punctuation">;</span><span class="token punctuation">}</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> r<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>x <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> d<span class="token punctuation">;</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> <span class="token punctuation">(</span>r<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> d<span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">else</span>    <span class="token punctuation">{</span>      LL res <span class="token operator">=</span> s<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">-</span>s<span class="token punctuation">[</span>l<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//res = sum(r) - sum(l-1)   </span>      <span class="token comment" spellcheck="true">//s[x] = ssb[i] = (x+1)sb[i] - isb[i] = (x+1)sb[i] - sc[i];</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> r<span class="token punctuation">;</span> x <span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span>  res <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> l<span class="token number">-1</span><span class="token punctuation">;</span> x <span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x<span class="token punctuation">)</span> res <span class="token operator">-</span><span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">*</span> b<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span> c<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%lld\n"</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Binary Index Tree </tag>
            
            <tag> Data Structure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Graphic Theory Problem Set</title>
      <link href="/2019/10/03/graphic-theory-problem-set/"/>
      <url>/2019/10/03/graphic-theory-problem-set/</url>
      
        <content type="html"><![CDATA[<h1 id="图论"><a href="#图论" class="headerlink" title="图论"></a>图论</h1><h2 id="Template"><a href="#Template" class="headerlink" title="Template"></a><a href="https://tawn0000.github.io/2019/09/27/graph-theory-template/">Template</a></h2><h2 id="DFS"><a href="#DFS" class="headerlink" title="DFS"></a>DFS</h2><p><a href="http://blog.csdn.net/tawn0000/article/details/79080072">CF——Codeforces 592 D. Super M</a>（树的直径）<br><a href="http://blog.csdn.net/tawn0000/article/details/77254693">CF——Codeforces Round #428 (Div. 2)C. Journey</a>(dfs+期望）<br><a href="https://blog.csdn.net/Tawn0000/article/details/82424182">HDU 5877 Weak Pair</a>(dfs +树状数组 、 树上逆元思想)</p><h2 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h2><p><a href="http://blog.csdn.net/tawn0000/article/details/65960089">BFS</a><br><a href="http://blog.csdn.net/tawn0000/article/details/69791153">BFS （图）——Codeforces 788 C. The Great Mixing</a><br><a href="http://blog.csdn.net/tawn0000/article/details/65628537">BFS——Poj 3669 Meteor Shower</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/80232164">BFS_set优化扩展边</a>(set优化）<br><a href="https://blog.csdn.net/Tawn0000/article/details/82453574">补图求最短路 bfs + 双set优化，用上面的那个TLE了，这个写法比较保险</a></p><h2 id="Tarjan"><a href="#Tarjan" class="headerlink" title="Tarjan"></a>Tarjan</h2><p><a href="https://blog.csdn.net/Tawn0000/article/details/79911215">Poj 2117 Electricity</a>(求割点）<br><a href="https://blog.csdn.net/Tawn0000/article/details/79911455">Poj1144 Network</a>(求割点）</p><h2 id="强连通分量分解"><a href="#强连通分量分解" class="headerlink" title="强连通分量分解"></a>强连通分量分解</h2><ul><li>两遍dfs O(VE)</li></ul><p><a href="https://blog.csdn.net/Tawn0000/article/details/83018079">强连通分量分解模板及例题</a></p><h2 id="最短路"><a href="#最短路" class="headerlink" title="最短路"></a>最短路</h2><p><a href="http://blog.csdn.net/tawn0000/article/details/79506507">HDU2224The shortest path</a>(BTSP)</p><h2 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h2><p><a href="http://blog.csdn.net/tawn0000/article/details/69791207">并查集——模板</a></p><h2 id="生成树"><a href="#生成树" class="headerlink" title="生成树"></a>生成树</h2><h3 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h3><p><a href="http://blog.csdn.net/tawn0000/article/details/69791221">Kruskal——模板</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/80057371">Prime——模板</a></p><p><a href="http://blog.csdn.net/tawn0000/article/details/78613045">Codeforces 891 C Envy</a></p><h3 id="次小生成树"><a href="#次小生成树" class="headerlink" title="次小生成树"></a>次小生成树</h3><p><a href="https://blog.csdn.net/Tawn0000/article/details/82980339">Poj 1679 The Unique MST 次小生成树</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82980416">HDU 4081 Qin Shi Huang’s National Road System 次小生成树</a></p><h3 id="最小树形图"><a href="#最小树形图" class="headerlink" title="最小树形图"></a>最小树形图</h3><p><a href="https://blog.csdn.net/Tawn0000/article/details/82980486">Poj 3467 Command Network 最小树形图</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82980509">HDU 2121 Ice_cream’s world II 无根最小树形图</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82980544">HDU 4049 Transfer water 多根最小树形图</a></p><h3 id="生成树计数"><a href="#生成树计数" class="headerlink" title="生成树计数"></a>生成树计数</h3><p><a href="https://blog.csdn.net/Tawn0000/article/details/82987162">UVA - 10766 Organising the Organisation (生成树计数-补图） 基尔霍夫矩阵</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82988044">URAL - 1627 Join 生成树计数模板题</a></p><h2 id="树"><a href="#树" class="headerlink" title="树"></a>树</h2><p><a href="https://blog.csdn.net/Tawn0000/article/details/80071653">洛谷P1268树的重量</a>(LCA、树的的构造)</p><h2 id="网络流"><a href="#网络流" class="headerlink" title="网络流"></a>网络流</h2><h3 id="最大流最小割"><a href="#最大流最小割" class="headerlink" title="最大流最小割"></a>最大流最小割</h3><p><a href="https://blog.csdn.net/Tawn0000/article/details/82825290">EK、Dinic、SAP三种算法模板</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/80251495">HDU 3572 Task Schedule</a>(建图)<br><a href="https://blog.csdn.net/Tawn0000/article/details/82251438">HDU 5889 Barricade</a>(最短路径上跑最小割 spfa + dicnic(当前弧优化）<br><a href="https://blog.csdn.net/Tawn0000/article/details/82526594">HDU 1532 Drainage Ditches(入门) [最大流]</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82526730">HDU 3549 Flow Problem(入门) [最大流]</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/83239620">洛谷 P2763 试题库问题  最大流</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82594984">HDU 3572 Task Schedule 网络流 判断满流 建图</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82597626">HDU 2732 Leapin’ Lizards 最大流拆点+建图</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82669658">HDU 3338 Kakuro Extension 最大流 行进列出</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82685263">HDU 2883 kebab 离散化 + 最大流 判断满流</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82695465">HDU 3605 Escape 最大流 二进制并点建图</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82696169">HDU 4240 Route Redundancy 求一条（流最大）的路径</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82824716">HDU 3081 Marriage Match II 最大流 之 二分图匹配 + 二分</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82824716">HDU 3277 Marriage Match III 最大流 + 二分 + 并查集 + 拆点建图</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82830586">HDU 3416 Marriage Match IV 最短路跑路径 + 最大流</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/83218185">洛谷 P2765 魔术球问题 最大流 解决最小路径覆盖问题</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/83268203">洛谷  P2774 方格取数问题  建图  最大取和= 最大和-最小舍弃和 =  最小割  = 最大流</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/83268107">洛谷 P2766 最长不下降子序列问题 最大流 分层建图</a></p><h3 id="最小费用最大流"><a href="#最小费用最大流" class="headerlink" title="最小费用最大流"></a>最小费用最大流</h3><p><a href="https://blog.csdn.net/Tawn0000/article/details/82840655">mcf-spfa 模板</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82841352">HDU 1533 Going Home 最小费用最大流基础题</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82851868">HDU 3488 Tour 有向环最小权值覆盖 最小费用最大流</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82862739">HDU 3667 Transportation 最小费用最大流 平方扩边</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82918539">HDU 4411 Arrest 费用流之可行流</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82975392">青岛区域赛 Finding Hotels 最小费用流概率建图</a></p><h3 id="上下界网络流"><a href="#上下界网络流" class="headerlink" title="上下界网络流"></a>上下界网络流</h3><p><a href="https://blog.csdn.net/Tawn0000/article/details/82945305">ZOJ  2314 Reactor Cooling (上下界无源汇可行流)</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82945326">POJ 2396 Budget (上下界有源汇可行流)</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82944818">ZOJ 3229 Shoot the Bullet (上下界有源汇最大流)</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/82947746">HDU 3157 Crazy Circuits （上下界有源汇最小流）</a></p><h3 id="最大权闭合子图"><a href="#最大权闭合子图" class="headerlink" title="最大权闭合子图"></a>最大权闭合子图</h3><p><a href="https://blog.csdn.net/Tawn0000/article/details/83304384">洛谷 P2805 [NOI2009]植物大战僵尸 网络流 - 最大权闭合子图</a></p><h2 id="二分图"><a href="#二分图" class="headerlink" title="二分图"></a>二分图</h2><h3 id="Template-1"><a href="#Template-1" class="headerlink" title="Template"></a>Template</h3><p><a href="http://blog.csdn.net/tawn0000/article/details/78239077">二分图匹配 判断是否为二分图 —— 模板</a><br><a href="http://blog.csdn.net/tawn0000/article/details/78239165">二分图匹配 Hopcroft-Carp算法——模板</a><br><a href="http://blog.csdn.net/tawn0000/article/details/78239110">二分图匹配匈牙利算法——模板</a></p><h3 id="二分图-1"><a href="#二分图-1" class="headerlink" title="二分图"></a>二分图</h3><p><a href="http://blog.csdn.net/tawn0000/article/details/78278997">HDU5737 Necklace</a><br><a href="http://blog.csdn.net/tawn0000/article/details/78239322">HDU2389 Rain on your Parade</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/80147587">洛谷P1525 关押罪犯</a>(二分+二分图染色)</p><h3 id="最小路径覆盖"><a href="#最小路径覆盖" class="headerlink" title="最小路径覆盖"></a>最小路径覆盖</h3><p><a href="https://blog.csdn.net/Tawn0000/article/details/83218185">洛谷 P2765 魔术球问题 最大流 解决最小路径覆盖问题</a><br><a href="https://blog.csdn.net/Tawn0000/article/details/83239096">洛谷 P2764 最小路径覆盖问题</a></p>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Graph Theory </tag>
            
            <tag> Algorithm </tag>
            
            <tag> Problem Set </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Scrapy Introduction</title>
      <link href="/2019/10/03/scrapy-introduction/"/>
      <url>/2019/10/03/scrapy-introduction/</url>
      
        <content type="html"><![CDATA[<p>Scrapy（/ˈskreɪpi/) 是一个Python编写的开源网络爬虫框架。它是一个被设计用于爬取网络数据、提取结构性数据的程序框架。</p><p>使用Scrapy框架可以很方便地爬取网站。</p><h2 id="一、Scrapy入门"><a href="#一、Scrapy入门" class="headerlink" title="一、Scrapy入门"></a>一、Scrapy入门</h2><p><a href="https://www.runoob.com/w3cnote/scrapy-detail.html">菜鸟教程Scrapy入门</a><br><a href="http://kaito-kidd.com/2016/11/01/scrapy-code-analyze-architecture/">Scrapy官网入门教程</a></p><ol><li>使用pip安装Scrapy。</li><li>使用 <code>scrapy startproject xxx</code> 新建一个Scrapy 项目。</li><li>创建一个Item类，继承scrapy.Item，明确抓取的目标。</li><li>使用 <code>scrapy genspider xxx "url"</code> 新建一个spider.</li><li>完善各个代码文件内容，详细见上方教程</li><li>使用 <code>scrapy crawl xxx</code> 开始爬取</li></ol><p>文件目录如下图：<br><img src="https://img-blog.csdnimg.cn/20190924150315205.png" alt="scrpy实例文件目录"></p><h2 id="二、Scrapy架构图"><a href="#二、Scrapy架构图" class="headerlink" title="二、Scrapy架构图"></a>二、Scrapy架构图</h2><p><img src="https://img-blog.csdnimg.cn/20190924143708393.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1Rhd24wMDAw,size_10,color_FFFFFF,t_70" alt="Scrapy架构图"></p><h2 id="三、Scrapy核心组件"><a href="#三、Scrapy核心组件" class="headerlink" title="三、Scrapy核心组件"></a>三、Scrapy核心组件</h2><p>如架构图中所示，Scrapy 总共有五个重要的组件和两个中间件组件：</p><ul><li><strong>Scrapy Engine(引擎)：</strong> 负责各个组件之间的通讯，信号、数据传递等。</li><li><strong>Scheduler(调度器)：</strong> 接收从引擎发送过来的Requests请求并整理暂存请求，当引擎需要时交还给引擎。</li><li><strong>Downloader（下载器）：</strong> 负责下载Scrapy 引擎发送的所有Requests请求，并将其获取到的Responses交还给Scrapy Engine(引擎)，由引擎交给Spider来处理。</li><li><strong>Spider（爬虫）:</strong> 负责处理所有Responses,从中分析提取数据，获取Item字段需要的数据，并提交Requests给引擎。</li><li><strong>Item Pipeline(管道)：</strong> 负责处理Spider中获取到的Item，并进行进行后期处理（详细分析、过滤、存储等）的地方。</li></ul><p><em><strong>中间件的功能如架构图所示</strong></em></p><ul><li><strong>Downloader Middlewares（下载中间件）：</strong> 自定义扩展下载功能的组件。</li><li><strong>Spider Middlewares（Spider中间件）：</strong> 自定扩展和操作引擎和Spider中间通信的功能组件（比如进入Spider的Responses;和从Spider出去的Requests）</li></ul><h2 id="四、Scrapy-运行流程"><a href="#四、Scrapy-运行流程" class="headerlink" title="四、Scrapy 运行流程"></a>四、Scrapy 运行流程</h2><p>Scrapy 数据流转流程，结合架构图。</p><ol><li><strong>Spider</strong> 生成 Requests 发送到 Engine, 中间经过 SpiderMiddleware处理。</li><li><strong>Engine</strong> 将从 Spider 处获得的 Requests 发送给 Schedule, 并向其获取待下载请求（异步）。Schedule 将Requests 整理，按一定顺序入队。</li><li><strong>Schedule</strong>  将处理好的需要下载的请求发送给Engine。</li><li><strong>Engine</strong> 得到需下载的请求后，将其发送到Downloader，中间经过DownloadMiddleware, 例如代理中间件，UA中间件等。</li><li><strong>Downloader</strong> 将请求下载后，生成响应Responses, 送到Engine, 中间经过DownloadMiddleware。</li><li><strong>Engine</strong> 将Responses 返回到Spider进行处理。中间经过一系列SpiderMiddleware。</li><li><strong>Spider</strong> 提取Responses 中信息构造Item 和生成新的Requests, 送到Engine，中间经过一系列SpiderMiddleware。</li><li><strong>Engine</strong> 将Item 送到Item Pipelines进行处理，将Requests 送到Schedule进行处理。</li><li>循环往复，直至结束。</li></ol><p> 【声明】：本文部分内容源自Scrapy<a href="https://scrapy-chs.readthedocs.io/zh_CN/0.24/intro/tutorial.html">官网</a> 和<a href="https://www.runoob.com/w3cnote/scrapy-detail.html">菜鸟教程</a>，侵删。</p>]]></content>
      
      
      <categories>
          
          <category> Web Crawler </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web Crawler </tag>
            
            <tag> Scrapy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Synonymous Transformation in IELTS</title>
      <link href="/2019/10/03/synonymous-transformation-in-ielts/"/>
      <url>/2019/10/03/synonymous-transformation-in-ielts/</url>
      
        <content type="html"><![CDATA[<h2 id="Listening"><a href="#Listening" class="headerlink" title="Listening"></a>Listening</h2><p><audio controls="controls" preload="auto"><br><source src="https://dn-shimo-attachment.qbox.me/rE83hacQzf8yWB8r/Test_4_Section_3.mp3" type="audio/mpeg"><br></audio></p><p>topic, concept</p><p>accessible, straightforward</p><p>obsolete, out of data</p><p>concentrate, not to get distracted, focus on</p><p>original study to guide, reference</p><p>collaborate, find way to share and suport another person</p><h2 id="Speaking"><a href="#Speaking" class="headerlink" title="Speaking"></a>Speaking</h2><h2 id="Reading"><a href="#Reading" class="headerlink" title="Reading"></a>Reading</h2><p>preceive, sense</p><p>tendency, inclination</p><p>satisfying, rewarding</p><p>emotions, feelings</p><p>depend on, adapted on</p><p>further vertification, the hypothesis will need to be thoroughly tested</p><p>motifs, images</p><p>intricacy, complexity,</p><p>meticulously composed, more carefully put together</p><p>demise, death, decease, departure, termination</p><p>formulate, frame, verbalise, voice, articulate</p><p>concord, harmony, accord, unity</p><p>regarding, concerning, about, as regards, on the topic of</p><p>manifestation, exhibition, expression, indication, demonstration</p><p>superior, better, greater, higher</p><p>schedule, timetable, arrangement</p><p>apparatus, equipment, device, outfit</p><p>invert, reverse, turn around, upside downside</p><p>modify, adjust, alter, change, vary, shift, adapt, amend, revise</p><p>authenticate, verify, distinguish, certify, prove</p><p>veteran, experienced, practiced, sophisticated</p><p>damp, wet, moist, humid</p><p>ascribe, attribute, assign, contribute</p><p>circumstance, condition, situation, case, scenario, environment, surrounding</p><p>therapy, treatment, medical care</p><p>label, mark, tag, classify</p><p>symbol, sign, icon, representation</p><p>sponsor, back up, fund, promote, support</p><p>exotic, foreign, strange, colourful</p><p>curve, bend, curl, turn, twist</p><p>demand, want, require, need</p><p>susceptible, vulnerable, fragile, subject</p><p>transmit, send, deliver, transfer</p><p>curb, control, restrain, check</p><p>rival, competitor, opponent</p><p>fulfill, carry out, complete, perform, execute</p><p>fundamental, basic, elementary, primary, underlying, preliminary</p><p>marvelous, exceptional, extraordinary, glorious, magnificent, miraculous</p><p>pick out, choose, select, sort out</p><p>replenish, complement, furnish, provide, supply</p><p>flatten, level, smooth</p><p>steep, sharp, dramatic, noticeable</p><p>enhance, better, enrich, improve, uplift</p><p>harsh, coarse, rough, tough, rude</p><p>boom, flourish, prosper, thrive</p><p>legacy, heritage, heredity</p><p>rigorous, hard, harsh, relentless, severe, strict</p><p>adept, apt, expert, proficient, skillful, good at</p><p>camouflage, disguise, masquerade, mask, pretence</p><p>manufacture, make, build, construct, create, devise  </p><p>edge, fringe, border, advantage  </p><p>split, bisect, separate, halve, divide  </p><p>crack, crevice, gap, rift  </p><p>wary, careful, cautious, guarded, suspicious  </p><p>novice, beginner, freshman, greenhorn</p><p>principle, doctrine, dogma, law, rule</p><p>pattem  design, example, illustration, model</p><p>victory, success, triumph, win</p><p>complex, complicated, confused, sophisticated</p><p>soak, saturate, sop, steep, wet</p><p>evaporate, disappear, fade away, vanish</p><p>concrete, cement, solid, substantial, tangible</p><p>flora, plant, foliage, vegetable, botany</p><p>spice, flavour, season, taste</p><p>account, story, record, statement, description</p><p>search, seek, find, look for, explore, hunt</p><p>enlighten, educate, explain, illuminate, inform, instruct, teach</p><p>practical, useful, functional, helpful, feasible</p><p>genre, type, sort, kind, classification, group</p><p>reshuffle, reorganise, reconstruct, reform</p><p>astounding, amazing, astonishing, surprising, shocking, stunning</p><p>rotate, revolve, spin, swivel, turn</p><p>resemblance, semblance, similarity, likeness, sameness</p><p>drawback, disadvantage, downside, weakness, minus</p><p>convert, change, adapt, transform, transfer</p><p>breakthrough, advance, step forward, revolution, development</p><p>rapid, quick, swif, speedy, fast</p><p>mark, manifest, indicate, sign</p><p>agriculture, farming, cultivation, husbandry</p><p>deem, believe, consider, judge, regard, suppose, think</p><p>distribute, scatter, dispense, disperse, spread, allot, allocate</p><p>cultvate, develop, improve, prepare, train, nurture</p><h2 id="Writing"><a href="#Writing" class="headerlink" title="Writing"></a>Writing</h2>]]></content>
      
      
      <categories>
          
          <category> English </category>
          
      </categories>
      
      
        <tags>
            
            <tag> English </tag>
            
            <tag> IELTS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Math Template</title>
      <link href="/2019/09/27/math-template/"/>
      <url>/2019/09/27/math-template/</url>
      
        <content type="html"><![CDATA[<h1 id="数学"><a href="#数学" class="headerlink" title="数学"></a>数学</h1><h2 id="行列式求值"><a href="#行列式求值" class="headerlink" title="行列式求值"></a>行列式求值</h2><ul><li>高斯消元</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">define</span> type long long</span>type <span class="token function">det</span><span class="token punctuation">(</span>type a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>  type ret<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">while</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        type t<span class="token operator">=</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">/</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span>i<span class="token punctuation">;</span>k<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span>            a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">-</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">*</span>t<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span>i<span class="token punctuation">;</span>k<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ret<span class="token operator">=</span><span class="token operator">-</span>ret<span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    ret<span class="token operator">=</span>ret<span class="token operator">*</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>ret<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span>   ret<span class="token operator">=</span><span class="token operator">-</span>ret<span class="token punctuation">;</span>  <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> template </tag>
            
            <tag> Math </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Summary of Sorting Algorithms</title>
      <link href="/2019/09/27/summary-of-sorting-algorithms/"/>
      <url>/2019/09/27/summary-of-sorting-algorithms/</url>
      
        <content type="html"><![CDATA[<h1 id="内部排序算法总结"><a href="#内部排序算法总结" class="headerlink" title="内部排序算法总结"></a><center>内部排序算法总结</center></h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>排序算法主要可以分为内部排序和外部排序，其中内部排序由可以分为非线性时间比较排序和线性时间非比较排序，前者主要通过比较来决定元素之间的相对次序，都有关键字的比较和记录的移动，其时间复杂度不能突破O(nlogn),后者不需要通过比较来进行,可以以线性时间运行。</p><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><p>非线性时间比较排序：<br>      &amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;插入排序：简单插入排序、折半插入排序、希尔排序<br>      &amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;交换排序：冒泡排序、快速排序<br>      &amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;选择排序：直接选择排序、堆排序<br>      &amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;归并排序：二路归并排序、多路归并排序(下文未介绍)<br>线性时间非比较排序：<br>      基数排序、计数排序、桶排序</p><p>不稳定排序：希尔排序、快速排序、直接选择排序、堆排序<br>其余为稳定排序</p><h2 id="复杂度-amp-amp-稳定性"><a href="#复杂度-amp-amp-稳定性" class="headerlink" title="复杂度&amp;&amp;稳定性"></a>复杂度&amp;&amp;稳定性</h2><table><thead><tr><th>排序算法</th><th>平均时间复杂度</th><th>最好时间复杂度</th><th>最坏时间复杂度</th><th>空间复杂度</th><th>稳定性</th></tr></thead><tbody><tr><td>简单插入排序</td><td>O(n^2)</td><td>O(n)</td><td>O(n^2)</td><td>O(1)</td><td>稳定</td></tr><tr><td>折半插入排序</td><td>O(n^2)</td><td>O(n)</td><td>O(n^2)</td><td>O(1)</td><td>稳定</td></tr><tr><td>希尔排序</td><td>O(n^(1.3))</td><td>O(n)</td><td>O(n^2)</td><td>O(1)</td><td>不稳定</td></tr><tr><td>冒泡排序</td><td>O(n^2)</td><td>O(n)</td><td>O(n^2)</td><td>O(1)</td><td>稳定</td></tr><tr><td>快速排序</td><td>O(nlogn)</td><td>O(nlogn)</td><td>O(n^2)</td><td>O(logn)</td><td>不稳定</td></tr><tr><td>直接选择排序</td><td>O(n^2)</td><td>O(n^2)</td><td>O(n^2)</td><td>O(n^2)</td><td>不稳定</td></tr><tr><td>堆排序</td><td>O(nlogn)</td><td>O(nlogn)</td><td>O(nlogn)</td><td>O(1)</td><td>不稳定</td></tr><tr><td>二路归并排序</td><td>O(nlogn)</td><td>O(nlogn)</td><td>O(nlogn)</td><td>O(n)</td><td>稳定</td></tr><tr><td>基数排序</td><td>O(d(n+r))</td><td>O(d(n+r))</td><td>O(d(n+r))</td><td>O(rd)</td><td>稳定</td></tr><tr><td>计数排序</td><td>O(n+k)</td><td>O(n+k)</td><td>O(n+k)</td><td>O(n+k)</td><td>稳定</td></tr><tr><td>桶排序</td><td>O(n+k)</td><td>O(n+k)</td><td>O(n^2)</td><td>O(k)</td><td>稳定</td></tr></tbody></table><h2 id="讲解-amp-代码"><a href="#讲解-amp-代码" class="headerlink" title="讲解&amp;代码"></a>讲解&amp;代码</h2><h3 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h3><ol><li><p>数组中的元素默认放在从a[1]开始</p></li><li><p>以下排序都是基于顺序存储实现，非链式，有些算法可以修改成链式</p></li><li><p>总共有以下几类排序</p></li><li><p>直接插入排序</p></li><li><p>折半插入排序</p></li><li><p>希尔排序<br>   <strong>1-3属于插入排序</strong></p></li><li><p>冒泡排序</p></li><li><p>快速排序<br>   <strong>4-5属于交换排序</strong></p></li><li><p>直接选择排序</p></li><li><p>堆排序<br>   <strong>6-7属于选择排序</strong></p></li><li><p>二路归并排序<br>   <strong>8属于归并排序</strong><br>   <strong>1-8属于非线性时间比较排序</strong></p></li><li><p>基数排序</p></li><li><p>计数排序</p></li><li><p>桶排序<br>  <strong>9-11属于线性时间非比较排序</strong></p></li><li><p>代码默认环境</p></li></ol><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="直接插入排序"><a href="#直接插入排序" class="headerlink" title="直接插入排序"></a>直接插入排序</h3><ul><li>直接插入排序</li><li>平均时间复杂度：O(n^2)</li><li>最好时间复杂度：O(n)   初始序列为正序</li><li>最坏时间复杂度：O(n^2) 初始序列为逆序</li><li>空间复杂度：O(1)</li><li>稳定性：稳定</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">Straight_Insert_Sort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        <span class="token keyword">int</span> j<span class="token punctuation">;</span>        a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//设置哨兵</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>j <span class="token operator">=</span> i<span class="token number">-1</span><span class="token punctuation">;</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>           a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="折半插入排序"><a href="#折半插入排序" class="headerlink" title="折半插入排序"></a>折半插入排序</h3><ul><li>平均时间复杂度：O(n^2)</li><li>最好时间复杂度：O(n)   初始序列为正序</li><li>最坏时间复杂度：O(n^2)</li><li>空间复杂度：O(1)</li><li>稳定性：稳定<br>注：折半插入排序是插入排序的一个优化算法，主要是减少了寻找插入位置时的比较次数，但是元素的移动次数仍然不变，所以总的时间复杂度仍然是O(n^2)</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">Binary_Insert_Sort</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span>       a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> r <span class="token operator">=</span> i<span class="token number">-1</span><span class="token punctuation">;</span>       <span class="token keyword">while</span><span class="token punctuation">(</span>l <span class="token operator">&lt;=</span> r<span class="token punctuation">)</span>       <span class="token punctuation">{</span>         <span class="token keyword">int</span> m <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token punctuation">(</span>r<span class="token operator">-</span>l<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>         <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> l <span class="token operator">=</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>         <span class="token keyword">else</span> r <span class="token operator">=</span> m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>       <span class="token keyword">int</span> j<span class="token punctuation">;</span>       <span class="token keyword">for</span><span class="token punctuation">(</span>j <span class="token operator">=</span> i<span class="token number">-1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> l<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>           a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>       a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h3><ul><li>平均时间复杂度：O(n^(1.3—2))</li><li>最好时间复杂度：O(n)   初始序列为正序</li><li>最坏时间复杂度：O(n^2)</li><li>空间复杂度：O(1)</li><li>稳定性：不稳定<br>注：</li></ul><ol><li>希尔排序也属于插入排序的一种，又称“缩小增量排序”(Deminishing Increment Sort)<br>基本思想是将数列等步长分成若干组，组内进行插入排序，步长不断减小，直至1，这样就可以减少参与直接插入排序的数据量，有利于减小比较和移动的次数，从而缩减时间复杂度。<br>其时间复杂度和选取得增量序列有关<br>希尔增量: ht = N / 2, h[k] = h[k+1] / 2，即{N/2, (N / 2)/2, …, 1}<br>Hibbard：{1, 3, …, 2^k-1};<br>Sedgewick：{1, 5, 19, 41, 109…}该序列中的项或者是9<em>4^i - 9</em>2^i + 1或者是4^i - 3*2^i + 1。</li><li>以下代码非使用监视哨算法，使用监视哨算法可以缩减一定的测试查找循环时间，解决边界问题。但是估计会需要使用O(inc)的代价。</li></ol><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">Shell_Sort</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">int</span> inc <span class="token operator">=</span> n<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token punctuation">{</span>   inc <span class="token operator">=</span> inc<span class="token operator">/</span><span class="token number">3</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">+</span>inc<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>i<span class="token operator">-</span>inc<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">int</span> j<span class="token punctuation">;</span>      a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span>j <span class="token operator">=</span> i<span class="token operator">-</span>inc<span class="token punctuation">;</span> j <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">-</span><span class="token operator">=</span> inc<span class="token punctuation">)</span>            a<span class="token punctuation">[</span>j<span class="token operator">+</span>inc<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>      a<span class="token punctuation">[</span>j<span class="token operator">+</span>inc<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token punctuation">}</span> <span class="token keyword">while</span><span class="token punctuation">(</span>inc <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h3><ul><li>平均时间复杂度：O(n^2)</li><li>最好时间复杂度：O(n)   初始序列为正序</li><li>最坏时间复杂度：O(n^2)</li><li>空间复杂度：O(1)</li><li>稳定性：稳定</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// 最简单的交换排序，严格上不算冒泡排序，不满足“两两比较相邻记录”</span><span class="token keyword">void</span> <span class="token function">Bubble_Sort_A</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//冒泡排序</span><span class="token keyword">void</span> <span class="token function">Bubble_Sort_B</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> n<span class="token number">-1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> i<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>         <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//优化后的冒泡排序</span><span class="token keyword">void</span> <span class="token function">Bubble_Sort_C</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">bool</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> flag<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>    flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> n<span class="token number">-1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> i<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token punctuation">{</span>         <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><ul><li>平均时间复杂度：O(nlogn)</li><li>最好时间复杂度：O(nlogn)</li><li>最坏时间复杂度：O(n^2) 初始序列为正序</li><li>空间复杂度：O(logn)</li><li>稳定性：稳定<br>注：</li></ul><ol><li><p>快速排序是通过一趟排序将序列分为两部分，一部分均比关键字小，一部分均比关键字大，<br>然后再对这两部分分别进行快速排序。</p></li><li><p>时间复杂度分析<br>我们来利用Master主定理分析<br>Master 主定理:  对于T[n] = aT[n/b] + f(n) 并且f(n) 是一个渐进正函数，则有一下三种情况：</p></li><li><p>如果f(n) = O(n^(logb(a-c))) 对于某个常量c&gt;0成立,那么T[n] = O(n^(logb(a)))</p></li><li><p>如果f(n) = O(n^(logb(a))), 那么T[n] = O(n^(logb(a)) * logn)</p></li><li><p>如果f(n) = O(n^(logb(a+c))) 对于某个常量c&gt;0成立,并且af(n/b) &lt;= cf(n) 对于某个常量c &lt; 1 (n足够大) 成立， 那么T[n] = O(f(n))</p></li></ol><p>  对于快速排序，T[n] = 2T[n/2] + f(n)<br>  a = 2, b = 2 , logb(a) = 1; 所以 f(n) =  O(n^(logb(a))) = n; 所以T(n) = n*logn</p><p>  最坏情况时， 在原序列有序时，T[n] = T[n-1] + T[1] + O(n)<br>  对于这种情况，主观分析：因为每次只排出一个，相当于没做，所以复杂度为O(n^2))</p><ol start="3"><li>快速排序的空间复杂度O(logn)主要是因为递归调用需要保持一些数据</li><li>优化：</li><li>枢轴的选取方式的优化：枢轴的选取方式有：(1) 固定位置选取；(2) 随机位置选取； (3) 三值取中法 等</li><li>优化小数组时的排序方案：当局部排序数组长度较小时，采用插入排序，而非快速排序，因为长度分割到够小后，继续分割的效率要低于直接插入排序。</li><li>略去不必要的交换：略去不必要的交换，将交换操作改为替换操作。因为交换操作需要进行3次赋值操作，而替换操作只需要进行1次赋值操作。</li></ol><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// 0,l,r 相互配合组成哨兵</span><span class="token keyword">void</span> <span class="token function">Quick_Sort</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> L<span class="token punctuation">,</span> <span class="token keyword">int</span> R<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>L <span class="token operator">>=</span> R<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">;</span>  a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>L<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> l <span class="token operator">=</span> L<span class="token punctuation">,</span> r <span class="token operator">=</span> R<span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>l <span class="token operator">&lt;</span> r<span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>l <span class="token operator">&lt;</span> r <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">>=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> r<span class="token operator">--</span><span class="token punctuation">;</span>    a<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>l <span class="token operator">&lt;</span> r <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> l<span class="token operator">++</span><span class="token punctuation">;</span>    a<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  a<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token function">Quick_Sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> L<span class="token punctuation">,</span> l<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">Quick_Sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> l<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> R<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="直接选择排序"><a href="#直接选择排序" class="headerlink" title="直接选择排序"></a>直接选择排序</h3><ul><li>平均时间复杂度：O(n^2)</li><li>最好时间复杂度：O(n^2)</li><li>最坏时间复杂度：O(n^2)</li><li>空间复杂度：O(1)</li><li>稳定性：不稳定</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">Selec_Sort</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">int</span> tag <span class="token operator">=</span> i<span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>tag<span class="token punctuation">]</span><span class="token punctuation">)</span> tag <span class="token operator">=</span> j<span class="token punctuation">;</span>      <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>tag<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h3><ul><li>平均时间复杂度：O(nlogn)</li><li>最好时间复杂度：O(nlogn)</li><li>最坏时间复杂度：O(nlogn)</li><li>空间复杂度：O(1)</li><li>稳定性：不稳定</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//s 是子堆的起点，m 是堆的数据量</span><span class="token keyword">void</span> <span class="token function">Heap_Adjust</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">)</span><span class="token punctuation">{</span>  a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>s<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i <span class="token operator">&lt;&lt;=</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//比较左右节点的大小</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> m <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">></span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>      i<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> a<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>    a<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    s <span class="token operator">=</span> i<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  a<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">Heap_Sort</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token function">Heap_Adjust</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>i<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">Heap_Adjust</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>i<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="归并排序-二路"><a href="#归并排序-二路" class="headerlink" title="归并排序(二路)"></a>归并排序(二路)</h3><ul><li>平均时间复杂度：O(nlogn)</li><li>最好时间复杂度：O(nlogn)</li><li>最坏时间复杂度：O(nlogn)</li><li>空间复杂度：O(n)</li><li>稳定性：稳定</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">Merge_Sort</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> L<span class="token punctuation">,</span> <span class="token keyword">int</span> R<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>L <span class="token operator">>=</span> R<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">;</span>  <span class="token keyword">int</span> m <span class="token operator">=</span> L <span class="token operator">+</span> <span class="token punctuation">(</span>R<span class="token operator">-</span>L<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> n1 <span class="token operator">=</span> m<span class="token operator">-</span>L<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> n2 <span class="token operator">=</span> R<span class="token operator">-</span>m<span class="token punctuation">;</span>  <span class="token function">Merge_Sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>L<span class="token punctuation">,</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">Merge_Sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>R<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> <span class="token operator">*</span>l <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> <span class="token operator">*</span>r <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n1<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    l<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>L<span class="token operator">+</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n2<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    r<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>m<span class="token operator">+</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>k <span class="token operator">=</span> L<span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> n1 <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> n2<span class="token punctuation">)</span>      a<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> l<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> r<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">?</span> l<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">:</span> r<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> n1<span class="token punctuation">)</span>      a<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> l<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">&lt;</span> n2<span class="token punctuation">)</span>      a<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> r<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token function">free</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">free</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="基数排序"><a href="#基数排序" class="headerlink" title="基数排序"></a>基数排序</h3><ul><li>平均时间复杂度：O(d(n+r))</li><li>最好时间复杂度：O(d(n+r))</li><li>最坏时间复杂度：O(d(n+r))</li><li>空间复杂度：O(rd)</li><li>稳定性：稳定<br>注：不能对负数进行处理，如果要处理负数可以统一先加一个大整数，最后再统一减去。<br>d个关键码，关键码的范围是0-r</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">Radix_Sort</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> maxa <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>d <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>exp <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> <span class="token operator">*</span>count <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     maxa <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>maxa<span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>maxa<span class="token punctuation">)</span> maxa <span class="token operator">/</span><span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>d<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> d<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">,</span> exp <span class="token operator">*</span><span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">int</span> range<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        range<span class="token punctuation">[</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">/</span>exp<span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">9</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        range<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> range<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>        count<span class="token punctuation">[</span>range<span class="token punctuation">[</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">/</span>exp<span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> count<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> count<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="计数排序"><a href="#计数排序" class="headerlink" title="计数排序"></a>计数排序</h3><ul><li>平均时间复杂度：O(n+k)</li><li>最好时间复杂度：O(n+k)</li><li>最坏时间复杂度：O(n+k)</li><li>空间复杂度：O(n+k)</li><li>稳定性：稳定<br>注：计数排序是一个非基于比较的算法，前面的算法中，除了基数排序，其他排序都是基于比较的算法，都有关键字的比较和记录的移动,基于比较的的排序算法的时间复杂度是O(nlogn),如堆排序和归并排序。计数排序的时间复杂度是O(n+k)，k是数据的范围，其快于任何一种基于比较的算法，其是牺牲空间换取时间的做法，当O(k) &gt; O(nlogn)时反而慢于基于比较的排序算法。<br>前面的基数排序也是基于基数排序实现的，只不过其k &lt;= 9。<br>计数排序的稳定性：range[i] 表示小于等于i的元素个数，所以倒着遍历保证稳定性。</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">Count_Sort</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> k <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     k <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> <span class="token operator">*</span>range <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> <span class="token operator">*</span>count <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    range<span class="token punctuation">[</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    range<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> range<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>    count<span class="token punctuation">[</span>range<span class="token punctuation">[</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> count<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> range<span class="token punctuation">;</span>  <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> count<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="桶排序"><a href="#桶排序" class="headerlink" title="桶排序"></a>桶排序</h3><ul><li>平均时间复杂度：O(n+k)</li><li>最好时间复杂度：O(n+k)</li><li>最坏时间复杂度：O(n^2)</li><li>空间复杂度：O(k)</li><li>稳定性：稳定</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">Bucket_Sort</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> k <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    k <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> <span class="token operator">*</span>range <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    range<span class="token punctuation">[</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> idx <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>range<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">)</span>      a<span class="token punctuation">[</span>idx<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>  <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> range<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="End"><a href="#End" class="headerlink" title="End"></a>End</h3><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  cin <span class="token operator">>></span> n<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     cin <span class="token operator">>></span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//插入排序</span>  <span class="token comment" spellcheck="true">//Straight_Insert_Sort(a,n);</span>  <span class="token comment" spellcheck="true">//Binary_Insert_Sort(a,n);</span>  <span class="token comment" spellcheck="true">//Shell_Sort(a,n);</span>  <span class="token comment" spellcheck="true">//交换排序</span>  <span class="token comment" spellcheck="true">//Bubble_Sort_A(a,n);</span>  <span class="token comment" spellcheck="true">//Bubble_Sort_B(a,n);</span>  <span class="token comment" spellcheck="true">//Bubble_Sort_C(a,n);</span>  <span class="token comment" spellcheck="true">//Quick_Sort(a,1,n);</span>  <span class="token comment" spellcheck="true">//选择排序</span>  <span class="token comment" spellcheck="true">//Selec_Sort(a,n);</span>  <span class="token comment" spellcheck="true">//Heap_Sort(a,n);</span>  <span class="token comment" spellcheck="true">//归并排序</span>  <span class="token comment" spellcheck="true">//Merge_Sort(a,1,n);</span>  <span class="token comment" spellcheck="true">//基数排序</span>  <span class="token comment" spellcheck="true">//Radix_Sort(a,n);</span>  <span class="token comment" spellcheck="true">//计数排序</span>  <span class="token comment" spellcheck="true">//Count_Sort(a,n);</span>  <span class="token comment" spellcheck="true">//桶排序</span>  <span class="token comment" spellcheck="true">//Bucket_Sort(a,n);</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>  cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> template </tag>
            
            <tag> Sorting </tag>
            
            <tag> Summary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Graph Theory Template</title>
      <link href="/2019/09/27/graph-theory-template/"/>
      <url>/2019/09/27/graph-theory-template/</url>
      
        <content type="html"><![CDATA[<h2 id="拓扑排序"><a href="#拓扑排序" class="headerlink" title="拓扑排序"></a>拓扑排序</h2><pre class="line-numbers language-cpp"><code class="language-cpp">  queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Q<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>cmp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>Q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">int</span> v <span class="token operator">=</span> Q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        d<span class="token punctuation">[</span>G<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>d<span class="token punctuation">[</span>G<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>          cmp<span class="token punctuation">[</span>G<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> cmp<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>          Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>G<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-sat-amp-强联通分量分解"><a href="#2-sat-amp-强联通分量分解" class="headerlink" title="2-sat &amp; 强联通分量分解"></a>2-sat &amp; 强联通分量分解</h2><h3 id="kosaraju"><a href="#kosaraju" class="headerlink" title="kosaraju"></a>kosaraju</h3><p>两遍 dfs  kosaraju 比tarjan慢</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//vector存边比较慢，可以考虑用链式前向星</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span>vector <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> G<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//正向邻接表</span>vector <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> rG<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//反向邻接表</span>vector <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> vs<span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">//拓扑序存点</span><span class="token keyword">int</span> cmp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//标号</span><span class="token keyword">bool</span> used<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>  used<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>used<span class="token punctuation">[</span>G<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token function">dfs</span><span class="token punctuation">(</span>G<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  vs<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">rdfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token punctuation">{</span>  used<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  cmp<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rG<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>used<span class="token punctuation">[</span>rG<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">rdfs</span><span class="token punctuation">(</span>rG<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">scc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">memset</span><span class="token punctuation">(</span>used<span class="token punctuation">,</span> <span class="token boolean">false</span> <span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>used<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  vs<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>used<span class="token punctuation">,</span> <span class="token boolean">false</span> <span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>used<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> vs<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>     <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>used<span class="token punctuation">[</span>vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token function">rdfs</span><span class="token punctuation">(</span>vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">++</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> k<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Tarjan"><a href="#Tarjan" class="headerlink" title="Tarjan"></a>Tarjan</h3><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">,</span>tot<span class="token punctuation">,</span>top<span class="token punctuation">,</span>cnt<span class="token punctuation">,</span>cnts<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// top 栈顶 cnts 强连通分量数量 cnt 时间戳</span><span class="token keyword">int</span> sta<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>h<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>dfn<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>low<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>cmp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//sta[] 堆栈， h[] 链式前向星  dfn[]dfs次序数组 cmp[]强连通分量标号</span><span class="token comment" spellcheck="true">//low[] u结点或者u的子树结点所能追溯到的最早栈中结点的次序号</span><span class="token keyword">bool</span> ins<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//判断是否在栈中</span><span class="token keyword">struct</span> edge<span class="token punctuation">{</span>  <span class="token keyword">int</span> to<span class="token punctuation">,</span>next<span class="token punctuation">;</span>  <span class="token function">edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">to</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">next</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>es<span class="token punctuation">[</span>maxm<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">add_edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span><span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token punctuation">{</span>  es<span class="token punctuation">[</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  h<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> tot<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  tot <span class="token operator">=</span> top <span class="token operator">=</span> cnts <span class="token operator">=</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>ins<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>ins<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>dfn<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>dfn<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">Tarjan</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>  dfn<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> low<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>cnt<span class="token punctuation">;</span>  ins<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  sta<span class="token punctuation">[</span>top<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token operator">~</span>i <span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">int</span> v <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dfn<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token function">Tarjan</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>low<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">></span> low<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>  low<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> low<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>ins<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> dfn<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&lt;</span> low<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span>     low<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> dfn<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>dfn<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">==</span> low<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    cnts<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    <span class="token keyword">do</span><span class="token punctuation">{</span>      t <span class="token operator">=</span> sta<span class="token punctuation">[</span><span class="token operator">--</span>top<span class="token punctuation">]</span><span class="token punctuation">;</span>      ins<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>      cmp<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> cnts<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span>t <span class="token operator">!=</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">scc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dfn<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">Tarjan</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="有序输出"><a href="#有序输出" class="headerlink" title="有序输出"></a>有序输出</h3><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">8000</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span>vector <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> G<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> used<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">,</span>top<span class="token punctuation">;</span><span class="token keyword">int</span> sta<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>used<span class="token punctuation">[</span>x<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>used<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    used<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    sta<span class="token punctuation">[</span>top<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">dfs</span><span class="token punctuation">(</span>G<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">judge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">memset</span><span class="token punctuation">(</span>used<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>used<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token operator">*</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>used<span class="token punctuation">[</span>i<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> top<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>                   used<span class="token punctuation">[</span>sta<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">judge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token operator">*</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token keyword">else</span> <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"NIE"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="LCA"><a href="#LCA" class="headerlink" title="LCA"></a>LCA</h2><h3 id="倍增"><a href="#倍增" class="headerlink" title="倍增"></a>倍增</h3><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> fa<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> depth<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//depth[root] = 1, dfs(root)</span><span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">18</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>depth<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>i<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>        fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> fa<span class="token punctuation">[</span>fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">int</span> v <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>depth<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>       fa<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>       depth<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> depth<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>       <span class="token function">dfs</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">lca</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>depth<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">&lt;</span> depth<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> d <span class="token operator">=</span> depth<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span> depth<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">18</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>d <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> x <span class="token operator">=</span> fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> y<span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> fa<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> x <span class="token operator">=</span> fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> y <span class="token operator">=</span> fa<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="求树的直径"><a href="#求树的直径" class="headerlink" title="求树的直径"></a>求树的直径</h2><ul><li>两遍dfs</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//Codeforces 592 D. Super M</span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++/h></span></span><span class="token macro property">#<span class="token directive keyword">define</span> r(a) scanf("%d",&amp;a)</span><span class="token macro property">#<span class="token directive keyword">define</span> p(a) printf("%d",a)</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">123456</span> <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>vector <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> g<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> b<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> vis<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>set <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> cnt<span class="token punctuation">;</span><span class="token keyword">int</span> st<span class="token punctuation">;</span><span class="token keyword">int</span> ed<span class="token punctuation">;</span><span class="token keyword">int</span> len_max<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">dfs_1</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> num<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> rt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> t <span class="token operator">=</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>cnt<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> vis<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>                vis<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token function">dfs_1</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>num<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                rt<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>rt <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> num <span class="token operator">>=</span> len_max<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>len_max <span class="token operator">==</span> num<span class="token punctuation">)</span> st <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>st<span class="token punctuation">,</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> st <span class="token operator">=</span> x<span class="token punctuation">;</span>            len_max <span class="token operator">=</span> num<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> f<span class="token punctuation">,</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">bool</span> rt <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> t <span class="token operator">=</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>t <span class="token operator">==</span> f<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token function">dfs</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token operator">||</span>cnt<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span> vis<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> rt <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token comment" spellcheck="true">//  if(rt) cout &lt;&lt; "##" &lt;&lt; x&lt;&lt;endl;</span>    <span class="token keyword">return</span> rt<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">get_tree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">memset</span><span class="token punctuation">(</span>vis<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>vis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  vis<span class="token punctuation">[</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// cout &lt;&lt; "##"&lt;&lt;a[0]&lt;&lt;endl;</span>    <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span>        <span class="token function">r</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">r</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> v<span class="token punctuation">,</span>u<span class="token punctuation">;</span>        <span class="token function">r</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">r</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>        g<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>        g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>  <span class="token function">r</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  cnt<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token function">get_tree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>vis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>b<span class="token punctuation">[</span><span class="token operator">++</span>len<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span> cnt<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//  cout &lt;&lt; endl;</span>       <span class="token function">memset</span><span class="token punctuation">(</span>vis<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>vis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       st <span class="token operator">=</span> INF<span class="token punctuation">;</span>       vis<span class="token punctuation">[</span>b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>       len_max <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token function">dfs_1</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token function">memset</span><span class="token punctuation">(</span>vis<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>vis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       ed <span class="token operator">=</span> st<span class="token punctuation">;</span>       st <span class="token operator">=</span> INF<span class="token punctuation">;</span>       vis<span class="token punctuation">[</span>ed<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>       len_max <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token function">dfs_1</span><span class="token punctuation">(</span>ed<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d %d\n"</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>st<span class="token punctuation">,</span>ed<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span><span class="token punctuation">(</span>len<span class="token number">-1</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">(</span>len_max<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="生成树"><a href="#生成树" class="headerlink" title="生成树"></a>生成树</h2><h3 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h3><ul><li>Kruskal / 并查集  O(ElgE)</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1e6</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">1e6</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">int</span> f<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">struct</span> edge<span class="token punctuation">{</span>    <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>c<span class="token punctuation">;</span>    <span class="token function">edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">u</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">v</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">c</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>es<span class="token punctuation">[</span>maxm<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> <span class="token function">cmp</span><span class="token punctuation">(</span><span class="token keyword">const</span> edge <span class="token operator">&amp;</span>a<span class="token punctuation">,</span><span class="token keyword">const</span> edge <span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token punctuation">{</span>     <span class="token keyword">return</span> a<span class="token punctuation">.</span>c <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>c<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">==</span> x <span class="token operator">?</span> x <span class="token operator">:</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">unit</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>    x <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    y <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>    f<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">same</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>     <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>c<span class="token punctuation">;</span>     <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span><span class="token operator">&amp;</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>     es<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token function">sort</span><span class="token punctuation">(</span>es<span class="token punctuation">,</span>es<span class="token operator">+</span>m<span class="token punctuation">,</span>cmp<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>     <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">same</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>u<span class="token punctuation">,</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span>       <span class="token function">unit</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>u<span class="token punctuation">,</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>       ans <span class="token operator">+</span><span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">++</span>cnt <span class="token operator">==</span> n<span class="token number">-1</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="次小生成树"><a href="#次小生成树" class="headerlink" title="次小生成树"></a>次小生成树</h3><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//O(VElogE)</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">int</span> g<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> in<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//标记其是否是最小生成树上的边</span><span class="token keyword">int</span> md<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录最小生成树的u-v之间的最大边权</span><span class="token comment" spellcheck="true">//省略并查集模板</span><span class="token keyword">int</span> vis<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//构造最大边权</span><span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> dis<span class="token punctuation">)</span><span class="token punctuation">{</span>   vis<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>vis<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> in<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>             md<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dis<span class="token punctuation">,</span>g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token function">dfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>i<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>dis<span class="token punctuation">,</span>g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">Unique_MST</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>      <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>c<span class="token punctuation">;</span>      <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span><span class="token operator">&amp;</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>      es<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>      g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>   <span class="token punctuation">}</span> <span class="token function">sort</span><span class="token punctuation">(</span>es<span class="token punctuation">,</span>es<span class="token operator">+</span>m<span class="token punctuation">,</span>cmp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>     <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">same</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>u<span class="token punctuation">,</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token punctuation">{</span>          res <span class="token operator">+</span><span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">;</span>          <span class="token function">unit</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>u<span class="token punctuation">,</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>          in<span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> in<span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>          <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">++</span>cnt <span class="token operator">==</span> n<span class="token number">-1</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>  <span class="token punctuation">}</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>       <span class="token function">memset</span><span class="token punctuation">(</span>vis<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>vis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>i<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//cout &lt;&lt; res &lt;&lt; endl;</span> <span class="token keyword">int</span> ans <span class="token operator">=</span> INF<span class="token punctuation">;</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>       <span class="token punctuation">{</span>          <span class="token keyword">if</span><span class="token punctuation">(</span>in<span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>          ans <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span>res<span class="token operator">-</span>md<span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">]</span> <span class="token operator">+</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//cout &lt;&lt; es[i].u &lt;&lt; " " &lt;&lt; es[i].v &lt;&lt; " " &lt;&lt; md[es[i].u][es[i].v] &lt;&lt; endl;</span>       <span class="token punctuation">}</span> <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="最小树形图"><a href="#最小树形图" class="headerlink" title="最小树形图"></a>最小树形图</h3><ul><li>朱刘算法 O(VM)</li></ul><p>不定根最小树形图就再加一个超级源点，源点与所有节点连边，边权 = sum + 1(sum = c1 + ..cm)即可。<br>然后最后与原点相连的就是root.主要修改下面两个地方</p><pre class="line-numbers language-cpp"><code class="language-cpp">   <span class="token keyword">if</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">&lt;</span> in<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> u <span class="token operator">!=</span> v<span class="token punctuation">)</span>       <span class="token punctuation">{</span>         in<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">,</span>pre<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>         <span class="token keyword">if</span><span class="token punctuation">(</span>u <span class="token operator">==</span> root<span class="token punctuation">)</span> rt <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//利用边m - m+n-1 与点1-n的映射关系</span>       <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        es<span class="token punctuation">[</span>m<span class="token operator">+</span>i<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>    type ans <span class="token operator">=</span> <span class="token function">MTG</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>m<span class="token operator">+</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>ans <span class="token operator">>=</span> <span class="token number">2</span><span class="token operator">*</span>sum<span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"impossible\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%lld %d\n\n"</span><span class="token punctuation">,</span>ans<span class="token operator">-</span>sum<span class="token punctuation">,</span>rt<span class="token operator">-</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">const</span> <span class="token keyword">double</span> eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token macro property">#<span class="token directive keyword">define</span> type double</span>type in<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> id<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>used<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>pre<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">struct</span> edge<span class="token punctuation">{</span>  <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">;</span>  type c<span class="token punctuation">;</span>  <span class="token function">edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> type z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">u</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">v</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">c</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>es<span class="token punctuation">[</span>maxm<span class="token punctuation">]</span><span class="token punctuation">;</span>type <span class="token function">MTG</span><span class="token punctuation">(</span><span class="token keyword">int</span> root<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">)</span><span class="token punctuation">{</span>  type res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  in<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> INF<span class="token punctuation">,</span>id<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span>       <span class="token keyword">int</span> u <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>u<span class="token punctuation">;</span>       <span class="token keyword">int</span> v <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">&lt;</span> in<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> u <span class="token operator">!=</span> v<span class="token punctuation">)</span>  in<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">,</span>pre<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>     <span class="token punctuation">}</span><span class="token comment" spellcheck="true">//找最小的入边</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> root<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>       res <span class="token operator">+</span><span class="token operator">=</span> in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">fabs</span><span class="token punctuation">(</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> INF<span class="token punctuation">)</span> <span class="token operator">&lt;</span> eps<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span><span class="token comment" spellcheck="true">//加入所有的入边权到答案中</span>    <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//枚举每个点为起点进行找环</span>    <span class="token punctuation">{</span>      <span class="token keyword">int</span> v <span class="token operator">=</span> i<span class="token punctuation">;</span>      <span class="token keyword">while</span><span class="token punctuation">(</span>v <span class="token operator">!=</span> root <span class="token operator">&amp;&amp;</span> used<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">!=</span> i <span class="token operator">&amp;&amp;</span> id<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>  used<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">,</span>v <span class="token operator">=</span> pre<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>v <span class="token operator">!=</span> root <span class="token operator">&amp;&amp;</span> id<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//找到环的时候进行缩点编号</span>       <span class="token punctuation">{</span>         <span class="token operator">++</span>cnt<span class="token punctuation">;</span>         id<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> cnt<span class="token punctuation">;</span>         <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> pre<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span> u <span class="token operator">!=</span> v<span class="token punctuation">;</span> u <span class="token operator">=</span> pre<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span> id<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> cnt<span class="token punctuation">;</span>       <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cnt <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//无环则退出</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>id<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>  id<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>cnt<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//更新边</span>     <span class="token punctuation">{</span>       <span class="token keyword">int</span> u <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>u<span class="token punctuation">;</span>       <span class="token keyword">int</span> v <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">;</span>       es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>u <span class="token operator">=</span> id<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>       es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v <span class="token operator">=</span> id<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>u <span class="token operator">!=</span> v<span class="token punctuation">)</span>  es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">-</span><span class="token operator">=</span> in<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//更新边权</span>     <span class="token punctuation">}</span>     n <span class="token operator">=</span> cnt<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//更新节点数目和根节点编号</span>     root <span class="token operator">=</span> id<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>     <span class="token keyword">return</span> res<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="生成树计数"><a href="#生成树计数" class="headerlink" title="生成树计数"></a>生成树计数</h3><ul><li>基尔霍夫矩阵树定理</li></ul><p>无向图的基尔霍夫矩阵: 对角线上表示每个点的度数,若ij之间有边则矩阵ij处为-1<br>无向图的生成树的数目为: 任意一个n-1阶主子式的行列式的绝对值.</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">define</span> type long long</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">int</span> d<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录度数</span><span class="token keyword">int</span> g<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//邻接矩阵</span>type c<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//基尔霍夫矩阵</span><span class="token comment" spellcheck="true">//行列式求和</span>type <span class="token function">det</span><span class="token punctuation">(</span>type a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    type ret<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">while</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        type t<span class="token operator">=</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">/</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span>i<span class="token punctuation">;</span>k<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span>            a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">-</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">*</span> t<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span>i<span class="token punctuation">;</span>k<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ret<span class="token operator">=</span><span class="token operator">-</span>ret<span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    ret<span class="token operator">=</span>ret<span class="token operator">*</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>ret<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span>   ret<span class="token operator">=</span><span class="token operator">-</span>ret<span class="token punctuation">;</span>  <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span>type <span class="token function">num_st</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">)</span><span class="token punctuation">{</span>     <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>         <span class="token punctuation">{</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> j<span class="token punctuation">)</span> c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>           <span class="token keyword">else</span> c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// for(int i = 1; i &lt;= n; i++)</span>    <span class="token comment" spellcheck="true">//  for(int j = 1; j &lt;= n; j++)</span>    <span class="token comment" spellcheck="true">//     printf("%lld%c",c[i][j],j == n ? '\n' : ' ');</span>    <span class="token keyword">return</span> <span class="token function">det</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>n<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="单源最短路"><a href="#单源最短路" class="headerlink" title="单源最短路"></a>单源最短路</h2><h3 id="dijkstra"><a href="#dijkstra" class="headerlink" title="dijkstra"></a>dijkstra</h3><p>O(ElgV) 适合不含非负权边最短路</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span><span class="token keyword">typedef</span> pair <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> P<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">int</span> d<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">struct</span> edge<span class="token punctuation">{</span>    <span class="token keyword">int</span> to<span class="token punctuation">,</span>cost<span class="token punctuation">;</span>    <span class="token function">edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">int</span> d <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">to</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cost</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>vector <span class="token operator">&lt;</span>edge<span class="token operator">></span> G<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">dijkstra</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">memset</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>INF<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    priority_queue <span class="token operator">&lt;</span> P<span class="token punctuation">,</span>vector<span class="token operator">&lt;</span>P<span class="token operator">></span><span class="token punctuation">,</span>greater<span class="token operator">&lt;</span>P<span class="token operator">></span> <span class="token operator">></span>  Q<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//P.first 是距离，.P.second 是顶点</span>    Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">P</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>Q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        P x <span class="token operator">=</span> Q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> dist <span class="token operator">=</span> x<span class="token punctuation">.</span>first<span class="token punctuation">;</span>        <span class="token keyword">int</span> u <span class="token operator">=</span> x<span class="token punctuation">.</span>second<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">&lt;</span> dist<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//排除u相同时, dist不同的情况。</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            edge e <span class="token operator">=</span> G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">;</span>                Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">P</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>to<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>        G<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>dist<span class="token punctuation">;</span>      <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span><span class="token operator">&amp;</span>dist<span class="token punctuation">)</span><span class="token punctuation">;</span>      G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">edge</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>dist<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      G<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">edge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>dist<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> n <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">dijkstra</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>d<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="spfa"><a href="#spfa" class="headerlink" title="spfa"></a>spfa</h3><ul><li>bfs O(KE - VE)</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">bool</span> <span class="token function">spfa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">memset</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>INF<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>cnt<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>inq<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>inq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    queue <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Q<span class="token punctuation">;</span>    Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    cnt<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    inq<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>Q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> t <span class="token operator">=</span> Q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        inq<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            edge e <span class="token operator">=</span> G<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>inq<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">++</span>cnt<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">></span> n<span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                    Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>                    inq<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>dfs + spfa 找负环 O(KM)</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//  memset(vis,false,sizeof(vis));</span><span class="token comment" spellcheck="true">//  memset(d,INF,sizeof(d));</span><span class="token comment" spellcheck="true">//   d[0] = 0;</span><span class="token keyword">int</span> d<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> vis<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> <span class="token function">spfa</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span><span class="token punctuation">{</span>  vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i <span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">int</span> v <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">)</span>    <span class="token punctuation">{</span>      d<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">spfa</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Bellman-Ford-O-VE"><a href="#Bellman-Ford-O-VE" class="headerlink" title="Bellman_Ford  O(VE)"></a>Bellman_Ford  O(VE)</h3><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span><span class="token keyword">typedef</span> pair <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> P<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">1e4</span> <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">int</span> d<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">struct</span> edge <span class="token punctuation">{</span>  <span class="token keyword">int</span> from<span class="token punctuation">,</span>to<span class="token punctuation">,</span>cost<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>edge es<span class="token punctuation">[</span>maxm<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">Bellman_Ford</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">memset</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>INF<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token operator">*</span>m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            edge e <span class="token operator">=</span> es<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>from<span class="token punctuation">]</span> <span class="token operator">&lt;</span> INF <span class="token operator">&amp;&amp;</span> d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>from<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">)</span>  d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>from<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span> n <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>dist<span class="token punctuation">;</span>            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span><span class="token operator">&amp;</span>dist<span class="token punctuation">)</span><span class="token punctuation">;</span>            edge e1<span class="token punctuation">,</span>e2<span class="token punctuation">;</span>            e1<span class="token punctuation">.</span>from <span class="token operator">=</span> u<span class="token punctuation">,</span>e1<span class="token punctuation">.</span>to <span class="token operator">=</span> v<span class="token punctuation">,</span>e1<span class="token punctuation">.</span>cost <span class="token operator">=</span> dist<span class="token punctuation">;</span>            e2<span class="token punctuation">.</span>from <span class="token operator">=</span> v<span class="token punctuation">,</span>e2<span class="token punctuation">.</span>to <span class="token operator">=</span> u<span class="token punctuation">,</span>e2<span class="token punctuation">.</span>cost <span class="token operator">=</span> dist<span class="token punctuation">;</span>            es<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> e1<span class="token punctuation">;</span>            es<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> e2<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">Bellman_Ford</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>d<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="多源最短路"><a href="#多源最短路" class="headerlink" title="多源最短路"></a>多源最短路</h2><h3 id="Floyd"><a href="#Floyd" class="headerlink" title="Floyd"></a>Floyd</h3><ul><li>O(V^3)</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span><span class="token keyword">typedef</span> pair <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> P<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">1e4</span> <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">int</span> mp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">Floyd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> k <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>          <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>               mp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>mp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>mp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">+</span>mp<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span> n <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">memset</span><span class="token punctuation">(</span>mp<span class="token punctuation">,</span>INF<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>mp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>dist<span class="token punctuation">;</span>            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span><span class="token operator">&amp;</span>dist<span class="token punctuation">)</span><span class="token punctuation">;</span>            mp<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> dist<span class="token punctuation">;</span>            mp<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> dist<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">Floyd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>mp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="网络流"><a href="#网络流" class="headerlink" title="网络流"></a>网络流</h2><h3 id="最大流"><a href="#最大流" class="headerlink" title="最大流"></a>最大流</h3><h4 id="EK"><a href="#EK" class="headerlink" title="EK"></a>EK</h4><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//Max_flow</span><span class="token comment" spellcheck="true">//@2018/05/02 Wednesday</span><span class="token comment" spellcheck="true">//EK algorithm [Edmonds Karp] O(V*E^2) O(v^2)</span><span class="token comment" spellcheck="true">//by Tawn</span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1e3</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//n - Vertices  m - edges</span><span class="token keyword">int</span> pre<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//record predecesor and sign if it is visited</span><span class="token keyword">int</span> cap<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//record the capacity of residual network</span><span class="token keyword">int</span> flow<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//record the residual flow from starting vertex to current vertex</span>queue <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> st<span class="token punctuation">,</span> <span class="token keyword">int</span> ed<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">memset</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  pre<span class="token punctuation">[</span>st<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  flow<span class="token punctuation">[</span>st<span class="token punctuation">]</span> <span class="token operator">=</span> INF<span class="token punctuation">;</span>  q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>      <span class="token keyword">int</span> t <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>t <span class="token operator">==</span> ed<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>          <span class="token keyword">if</span><span class="token punctuation">(</span>pre<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> cap<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>          <span class="token punctuation">{</span>              pre<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>              flow<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>flow<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span>cap<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span>      <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>pre<span class="token punctuation">[</span>ed<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">else</span>              <span class="token keyword">return</span> flow<span class="token punctuation">[</span>ed<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">EK</span><span class="token punctuation">(</span><span class="token keyword">int</span> st<span class="token punctuation">,</span> <span class="token keyword">int</span> ed<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//the augmenting flow</span>    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//the max_flow</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res <span class="token operator">=</span> <span class="token function">bfs</span><span class="token punctuation">(</span>st<span class="token punctuation">,</span>ed<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//argumenting path</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> k <span class="token operator">=</span> ed<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>k <span class="token operator">!=</span> st<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> f <span class="token operator">=</span> pre<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>            cap<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> res<span class="token punctuation">;</span>            cap<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>f<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> res<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//reversible edge</span>            k <span class="token operator">=</span> f<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        sum <span class="token operator">+</span><span class="token operator">=</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> sum<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">int</span> s<span class="token punctuation">,</span>t<span class="token punctuation">,</span>c<span class="token punctuation">;</span>   <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>cap<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>cap<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>       <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>s<span class="token punctuation">,</span><span class="token operator">&amp;</span>t<span class="token punctuation">,</span><span class="token operator">&amp;</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>       cap<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token function">EK</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Dinic"><a href="#Dinic" class="headerlink" title="Dinic"></a>Dinic</h4><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//Max_flow</span><span class="token comment" spellcheck="true">//@2018/05/04 Friday</span><span class="token comment" spellcheck="true">//Dinic  O(n^2 * m)  O(m*3*2)</span><span class="token comment" spellcheck="true">//by Tawn</span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;algorithm></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;queue></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstring></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">1e6</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">int</span> l<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录层数</span><span class="token keyword">int</span> h<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//链式前向星</span><span class="token keyword">int</span> cur<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">struct</span> edge<span class="token punctuation">{</span>  <span class="token keyword">int</span> to<span class="token punctuation">;</span>  <span class="token keyword">int</span> c<span class="token punctuation">;</span>  <span class="token keyword">int</span> next<span class="token punctuation">;</span>  <span class="token function">edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">to</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">c</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">next</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>es<span class="token punctuation">[</span>maxm<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录边 注意是2倍</span><span class="token keyword">void</span> <span class="token function">add_edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>    es<span class="token punctuation">[</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>c<span class="token punctuation">,</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    h<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> tot<span class="token operator">++</span><span class="token punctuation">;</span>    es<span class="token punctuation">[</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>h<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    h<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> tot<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token function">memset</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   l<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>   queue <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span>   q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>    <span class="token keyword">int</span> u <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>u <span class="token operator">==</span> t<span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>        <span class="token punctuation">{</span>         <span class="token keyword">int</span> v <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">;</span>         <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>l<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span>l<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> l<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">,</span> <span class="token keyword">int</span> mf<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token keyword">return</span> mf<span class="token punctuation">;</span>    <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>i <span class="token operator">=</span> cur<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">&amp;&amp;</span> l<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">==</span> l<span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        <span class="token keyword">int</span> f <span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">,</span>mf <span class="token operator">-</span> ret<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">-</span><span class="token operator">=</span> f<span class="token punctuation">;</span>        es<span class="token punctuation">[</span>i<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">+</span><span class="token operator">=</span> f<span class="token punctuation">;</span>        ret <span class="token operator">+</span><span class="token operator">=</span> f<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>ret <span class="token operator">==</span> mf<span class="token punctuation">)</span> <span class="token keyword">return</span> ret<span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">dinic</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">bfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> t<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> cur<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>   ans <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">,</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>  <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>   tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>c<span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span><span class="token operator">&amp;</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">add_edge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token function">dinic</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="SAP"><a href="#SAP" class="headerlink" title="SAP"></a>SAP</h4><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//Max_flow</span><span class="token comment" spellcheck="true">//@2018/05/04 Friday</span><span class="token comment" spellcheck="true">//SAP  O(n^2 * m)  O(m*3*2)</span><span class="token comment" spellcheck="true">//by Tawn</span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;algorithm></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;queue></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstring></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">200</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">200</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">int</span> head<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//链式前向星</span><span class="token keyword">int</span> tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">struct</span> edge<span class="token punctuation">{</span> <span class="token keyword">int</span> to<span class="token punctuation">;</span> <span class="token keyword">int</span> c<span class="token punctuation">;</span> <span class="token keyword">int</span> next<span class="token punctuation">;</span> <span class="token function">edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">to</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">c</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">next</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>es<span class="token punctuation">[</span>maxm<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录边 注意是2倍</span><span class="token keyword">void</span> <span class="token function">add_edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>   es<span class="token punctuation">[</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>c<span class="token punctuation">,</span>head<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   head<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> tot<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">SAP</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">int</span> numh<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>h<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>ce<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>pre<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//numh 记录gap优化的统计高度数量数组，h 距离标号数组，ce 当前弧，pre前驱数组</span>   <span class="token keyword">int</span> f<span class="token punctuation">,</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> temp<span class="token punctuation">,</span> neck<span class="token punctuation">,</span> i<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//初始化最大流为0</span>   <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>numh<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>numh<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  ce<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> head<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>   numh<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> n<span class="token punctuation">;</span>   u <span class="token operator">=</span> s<span class="token punctuation">;</span>   <span class="token keyword">while</span><span class="token punctuation">(</span>h<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">&lt;</span> n<span class="token punctuation">)</span>   <span class="token punctuation">{</span>       <span class="token comment" spellcheck="true">//寻找增广路</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>u <span class="token operator">==</span> t<span class="token punctuation">)</span>       <span class="token punctuation">{</span>           f <span class="token operator">=</span> INF<span class="token punctuation">;</span>           <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> s<span class="token punctuation">;</span> i <span class="token operator">!=</span> t<span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>ce<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">)</span>           <span class="token punctuation">{</span>               <span class="token keyword">if</span><span class="token punctuation">(</span>f <span class="token operator">></span> es<span class="token punctuation">[</span>ce<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">)</span>               <span class="token punctuation">{</span>                   neck <span class="token operator">=</span> i<span class="token punctuation">;</span>                   f <span class="token operator">=</span> es<span class="token punctuation">[</span>ce<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">;</span>               <span class="token punctuation">}</span>           <span class="token punctuation">}</span>           <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> s<span class="token punctuation">;</span> i <span class="token operator">!=</span> t<span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>ce<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">)</span>           <span class="token punctuation">{</span>               temp <span class="token operator">=</span> ce<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>               es<span class="token punctuation">[</span>temp<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">-</span><span class="token operator">=</span> f<span class="token punctuation">;</span>               es<span class="token punctuation">[</span>temp<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">+</span><span class="token operator">=</span> f<span class="token punctuation">;</span>           <span class="token punctuation">}</span>           ans <span class="token operator">+</span><span class="token operator">=</span> f<span class="token punctuation">;</span>           u <span class="token operator">=</span> neck<span class="token punctuation">;</span>       <span class="token punctuation">}</span>       <span class="token comment" spellcheck="true">//寻找可行弧</span>       <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> ce<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">&amp;&amp;</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">==</span> h<span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//寻找增广路</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>       <span class="token punctuation">{</span>           ce<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>           pre<span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>           u <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">;</span>       <span class="token punctuation">}</span>       <span class="token keyword">else</span>       <span class="token punctuation">{</span>           <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">--</span>numh<span class="token punctuation">[</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//gap optimization</span>           ce<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> head<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>           <span class="token keyword">for</span><span class="token punctuation">(</span>temp <span class="token operator">=</span> n<span class="token punctuation">,</span> i <span class="token operator">=</span> head<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>               <span class="token keyword">if</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">)</span>  temp <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> h<span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           h<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> temp <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>           <span class="token operator">++</span>numh<span class="token punctuation">[</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>u <span class="token operator">!=</span> s<span class="token punctuation">)</span> u <span class="token operator">=</span> pre<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//重标号并且从当前点前驱重新增广</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>head<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>c<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>   <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span><span class="token operator">&amp;</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">add_edge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">add_edge</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>u<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//增加反向边</span>  <span class="token punctuation">}</span>  <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token function">SAP</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="最小费用最大流"><a href="#最小费用最大流" class="headerlink" title="最小费用最大流"></a>最小费用最大流</h3><h4 id="EK-amp-Spfa"><a href="#EK-amp-Spfa" class="headerlink" title="EK &amp; Spfa"></a>EK &amp; Spfa</h4><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">100</span>  <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span><span class="token keyword">typedef</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> P<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//const LL mod = 1e9 + 7;</span><span class="token macro property">#<span class="token directive keyword">define</span> PI 3.1415926</span><span class="token macro property">#<span class="token directive keyword">define</span> sc(x)  scanf("%d",&amp;x)</span><span class="token macro property">#<span class="token directive keyword">define</span> pf(x)  printf("%d",x)</span><span class="token macro property">#<span class="token directive keyword">define</span> pfn(x) printf("%d\n",x)</span><span class="token macro property">#<span class="token directive keyword">define</span> pfln(x) printf("%lld\n",x)</span><span class="token macro property">#<span class="token directive keyword">define</span> pfs(x) printf("%d ",x)</span><span class="token macro property">#<span class="token directive keyword">define</span> rep(n) for(int i = 0; i &lt; n; i++)</span><span class="token macro property">#<span class="token directive keyword">define</span> per(n) for(int i = n-1; i >= 0; i--)</span><span class="token macro property">#<span class="token directive keyword">define</span> mem(a,x) memset(a,x,sizeof(a))</span><span class="token keyword">struct</span> edge<span class="token punctuation">{</span>  <span class="token keyword">int</span> from<span class="token punctuation">,</span>to<span class="token punctuation">,</span>cap<span class="token punctuation">,</span>flow<span class="token punctuation">,</span>cost<span class="token punctuation">;</span>  <span class="token function">edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> from<span class="token punctuation">,</span><span class="token keyword">int</span> to<span class="token punctuation">,</span> <span class="token keyword">int</span> cap<span class="token punctuation">,</span> <span class="token keyword">int</span> flow<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">from</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">to</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cap</span><span class="token punctuation">(</span>cap<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">flow</span><span class="token punctuation">(</span>flow<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cost</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>vector<span class="token operator">&lt;</span>edge<span class="token operator">></span> E<span class="token punctuation">;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> G<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> inq<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> d<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> p<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">addedge</span><span class="token punctuation">(</span><span class="token keyword">int</span> from<span class="token punctuation">,</span> <span class="token keyword">int</span> to<span class="token punctuation">,</span> <span class="token keyword">int</span> cap<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span><span class="token punctuation">{</span>  E<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">edge</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span>to<span class="token punctuation">,</span>cap<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>cost<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  E<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">edge</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span>from<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span>cost<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  tot <span class="token operator">=</span> E<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  G<span class="token punctuation">[</span>from<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>tot<span class="token number">-2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  G<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>tot<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">spfa</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>flow<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>cost<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">mem</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">mem</span><span class="token punctuation">(</span>inq<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  d<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>inq<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> p<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> INF<span class="token punctuation">;</span>  queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Q<span class="token punctuation">;</span>  Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>Q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">int</span> u <span class="token operator">=</span> Q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    inq<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      edge e <span class="token operator">=</span> E<span class="token punctuation">[</span>G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>cap <span class="token operator">></span> e<span class="token punctuation">.</span>flow <span class="token operator">&amp;&amp;</span> d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">)</span>      <span class="token punctuation">{</span>        d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">;</span>        p<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>cap <span class="token operator">-</span> e<span class="token punctuation">.</span>flow<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>inq<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span> inq<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">==</span> INF<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  flow <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>  cost <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">*</span> a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> u <span class="token operator">=</span> t<span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>u <span class="token operator">!=</span> s<span class="token punctuation">)</span>  <span class="token punctuation">{</span>    E<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>flow <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>    E<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>flow <span class="token operator">-</span><span class="token operator">=</span> a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>    u <span class="token operator">=</span> E<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>from<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">mcf</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> flow <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>cost <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">spfa</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">,</span>flow<span class="token punctuation">,</span>cost<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>  <span class="token keyword">return</span> cost<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">//记得初始化各个变量</span>   <span class="token keyword">int</span> s<span class="token punctuation">,</span>t<span class="token punctuation">;</span>   <span class="token function">mcf</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="上下界网络流"><a href="#上下界网络流" class="headerlink" title="上下界网络流"></a>上下界网络流</h3><h4 id="无源汇可行流"><a href="#无源汇可行流" class="headerlink" title="无源汇可行流"></a>无源汇可行流</h4><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// 此处省略dinic板子</span><span class="token keyword">int</span> B<span class="token punctuation">[</span>maxm<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> in<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">int</span> T<span class="token punctuation">;</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">while</span><span class="token punctuation">(</span>T<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>   tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>      <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">;</span>      <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span><span class="token operator">&amp;</span>b<span class="token punctuation">,</span><span class="token operator">&amp;</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">add_edge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>c<span class="token operator">-</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>      B<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">;</span>      in<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> b<span class="token punctuation">;</span>      in<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> b<span class="token punctuation">;</span>   <span class="token punctuation">}</span>  <span class="token keyword">int</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> t <span class="token operator">=</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>res <span class="token operator">+</span><span class="token operator">=</span> in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token function">add_edge</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>i<span class="token punctuation">,</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">add_edge</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token operator">-</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token function">dinic</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>ans <span class="token operator">!=</span> res<span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"NO\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"YES\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>              <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>B<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> es<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="有源汇可行流"><a href="#有源汇可行流" class="headerlink" title="有源汇可行流"></a>有源汇可行流</h4><p>新增超级源点超级汇点  &amp;&amp;  t -INF-&gt; s</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//2018/10/04</span><span class="token comment" spellcheck="true">//by Tawn in JNU</span><span class="token comment" spellcheck="true">// 此处省略dinic板子</span><span class="token keyword">int</span> B<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> C<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> in<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//freopen("in.txt","r",stdin);</span> <span class="token keyword">int</span> T<span class="token punctuation">;</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">while</span><span class="token punctuation">(</span>T<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">int</span> s <span class="token operator">=</span> n<span class="token operator">+</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> t <span class="token operator">=</span> n<span class="token operator">+</span>m<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span>ss <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>tt<span class="token operator">=</span>t<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>   tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">add_edge</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>s<span class="token punctuation">,</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> t<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token function">add_edge</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span>i<span class="token punctuation">,</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>res <span class="token operator">+</span><span class="token operator">=</span> in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token function">add_edge</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>tt<span class="token punctuation">,</span><span class="token operator">-</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>  <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token function">dinic</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span>tt<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>ans <span class="token operator">!=</span> res<span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"IMPOSSIBLE\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">else</span> <span class="token punctuation">{</span>         <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>     <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">,</span>k<span class="token operator">+</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>         <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d%c"</span><span class="token punctuation">,</span>B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span>es<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">,</span> j <span class="token operator">==</span> m<span class="token operator">?</span> <span class="token string">'\n'</span><span class="token operator">:</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="有源汇最大流"><a href="#有源汇最大流" class="headerlink" title="有源汇最大流"></a>有源汇最大流</h4><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// 此处省略dinic板子</span><span class="token keyword">int</span> in<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> g<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> d<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> b<span class="token punctuation">[</span>maxm<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//该边下界</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>   <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token keyword">int</span> s <span class="token operator">=</span> n<span class="token operator">+</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>t <span class="token operator">=</span> n<span class="token operator">+</span>m<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span>ss <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>tt <span class="token operator">=</span> t<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>totc <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token function">add_edge</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>s<span class="token punctuation">,</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> t<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">add_edge</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span>i<span class="token punctuation">,</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> res <span class="token operator">+</span><span class="token operator">=</span> in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">add_edge</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>tt<span class="token punctuation">,</span><span class="token operator">-</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token function">dinic</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span>tt<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>ans <span class="token operator">==</span> res<span class="token punctuation">)</span>   <span class="token punctuation">{</span>      <span class="token function">add_edge</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>s<span class="token punctuation">,</span><span class="token operator">-</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">int</span> _ans <span class="token operator">=</span> <span class="token function">dinic</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>_ans<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> totc<span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">+</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">else</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"-1\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span>               <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="有源汇最小流"><a href="#有源汇最小流" class="headerlink" title="有源汇最小流"></a>有源汇最小流</h4><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// 此处省略dinic板子</span><span class="token keyword">int</span> in<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n<span class="token operator">||</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> s <span class="token operator">=</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> t <span class="token operator">=</span> n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span> ss <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> tt <span class="token operator">=</span> t<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      string s1<span class="token punctuation">,</span>s2<span class="token punctuation">;</span>      <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>p<span class="token punctuation">;</span>      <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span><span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>      in<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> p<span class="token punctuation">;</span>      in<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> p<span class="token punctuation">;</span>      <span class="token function">add_edge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> t<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>res <span class="token operator">+</span><span class="token operator">=</span> in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token function">add_edge</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span>i<span class="token punctuation">,</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token function">add_edge</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>tt<span class="token punctuation">,</span><span class="token operator">-</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token function">dinic</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span>tt<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">add_edge</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>s<span class="token punctuation">,</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>    ans <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">dinic</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span>tt<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>res <span class="token operator">==</span> ans<span class="token punctuation">)</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>es<span class="token punctuation">[</span>h<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"impossible\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="二分图"><a href="#二分图" class="headerlink" title="二分图"></a>二分图</h2><h3 id="判断是否二分图"><a href="#判断是否二分图" class="headerlink" title="判断是否二分图"></a>判断是否二分图</h3><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">bool</span> g<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> col<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//利用0，1染色，层序遍历，用同色则为false</span><span class="token keyword">bool</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">memset</span><span class="token punctuation">(</span>col<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>col<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>        queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span>        col<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> from <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> to <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> to <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> to<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>g<span class="token punctuation">[</span>from<span class="token punctuation">]</span><span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> col<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    col<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">!</span>col<span class="token punctuation">[</span>from<span class="token punctuation">]</span><span class="token punctuation">;</span>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>g<span class="token punctuation">[</span>from<span class="token punctuation">]</span><span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> col<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">==</span> col<span class="token punctuation">[</span>from<span class="token punctuation">]</span><span class="token punctuation">)</span>                    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="二分图匹配"><a href="#二分图匹配" class="headerlink" title="二分图匹配"></a>二分图匹配</h3><ul><li>匈牙利算法</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">bool</span> g<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> vis<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> line<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//寻找增广路O(VE)</span><span class="token keyword">bool</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> v<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>        vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> <span class="token function">dfs</span><span class="token punctuation">(</span>line<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>line<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">Max_match</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span><span class="token keyword">int</span> p<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> all <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> p<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">memset</span><span class="token punctuation">(</span>vis<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>vis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span> all<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> all<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>Hopcroft-Carp</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// O(sqrt(n)*e)</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">3010</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">bool</span> g<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> vis<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> dx<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>dy<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> Mx<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>My<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> dis<span class="token punctuation">;</span><span class="token keyword">int</span> GM<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> GN<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> speed<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">double</span> _time<span class="token punctuation">;</span><span class="token keyword">int</span> M<span class="token punctuation">,</span>N<span class="token punctuation">;</span><span class="token keyword">bool</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span><span class="token keyword">int</span> m<span class="token punctuation">)</span><span class="token punctuation">{</span>    dis <span class="token operator">=</span> INF<span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>dx<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>dx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>dy<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>dy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    queue <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> que<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>Mx<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                que<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>                dx<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>que<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> u <span class="token operator">=</span> que<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        que<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>dx<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">></span> dis<span class="token punctuation">)</span>  <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> v <span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> dy<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                dy<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> dx<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>My<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> dis <span class="token operator">=</span> dy<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">else</span> <span class="token punctuation">{</span>                    dx<span class="token punctuation">[</span>My<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> dy<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                    que<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>My<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> dis <span class="token operator">!=</span> INF<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span><span class="token keyword">int</span> m<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> v<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> dy<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> dx<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>          vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>          <span class="token keyword">if</span><span class="token punctuation">(</span>My<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> dy<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> dis<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>          <span class="token keyword">if</span><span class="token punctuation">(</span>My<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> <span class="token function">dfs</span><span class="token punctuation">(</span>My<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">,</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>          <span class="token punctuation">{</span>              My<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>              Mx<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">;</span>              <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span>      <span class="token punctuation">}</span>   <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">Max_match</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span><span class="token keyword">int</span> m<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> all <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>Mx<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>Mx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>My<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>My<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">bfs</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>       <span class="token function">memset</span><span class="token punctuation">(</span>vis<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>vis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>Mx<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>            all<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> all<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="最小路径覆盖"><a href="#最小路径覆盖" class="headerlink" title="最小路径覆盖"></a>最小路径覆盖</h3><ul><li>最小路径覆盖 = n-二分图最大匹配数  拆点建二分图</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">/*     int f = dfs(es[i].to,t,min(es[i].c,mf - ret));        if(f) nxt[x] = es[i].to;*/</span><span class="token keyword">int</span> nxt<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录路径</span><span class="token keyword">int</span> vis<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//查找路径时标记点</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>   tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>nxt<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>nxt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>vis<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>vis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">int</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> t <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>u<span class="token punctuation">,</span>v<span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     <span class="token function">add_edge</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">add_edge</span><span class="token punctuation">(</span>i<span class="token operator">+</span>n<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>       <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token function">add_edge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>v<span class="token operator">+</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token function">dinic</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>n<span class="token operator">-</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//最小路径覆盖 = n - 二分图最大匹配</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>       <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token punctuation">{</span>           vector <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> v<span class="token punctuation">;</span>           <span class="token keyword">int</span> t <span class="token operator">=</span> i<span class="token punctuation">;</span>           <span class="token keyword">do</span><span class="token punctuation">{</span>            vis<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>            t <span class="token operator">=</span> nxt<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">-</span>n<span class="token punctuation">;</span>           <span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span>t <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>             <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d%c"</span><span class="token punctuation">,</span>v<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> j <span class="token operator">==</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'\n'</span> <span class="token operator">:</span> <span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><p>二分图最小点权覆盖集 = 最小割 = 最大流，  最大点权独立集 = 总权 - 最小点权覆盖集</p>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Graph Theory </tag>
            
            <tag> Algorithm </tag>
            
            <tag> template </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dynamic Programming Template</title>
      <link href="/2019/09/27/dynamic-programming-template/"/>
      <url>/2019/09/27/dynamic-programming-template/</url>
      
        <content type="html"><![CDATA[<h2 id="最长上升子序列-nlogn"><a href="#最长上升子序列-nlogn" class="headerlink" title="最长上升子序列 nlogn"></a>最长上升子序列 nlogn</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// dp[k] 为长度为k时最小的 a[i]值;</span><span class="token comment" spellcheck="true">//如果a[i] >= dp[j], 说明dp[j+1] = a[i];</span><span class="token comment" spellcheck="true">//否则 二分查找dp{1-j} 中a[i] 所处的位置，并用a[i]取代。</span>dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span><span class="token operator">++</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">else</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> idx <span class="token operator">=</span> <span class="token function">lower_bound</span><span class="token punctuation">(</span>dp<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>dp<span class="token operator">+</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> dp<span class="token punctuation">;</span>    dp<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token keyword">int</span> ans <span class="token operator">=</span> j<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
            <tag> template </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UVA11212 Editing a Book</title>
      <link href="/2019/02/27/uva11212/"/>
      <url>/2019/02/27/uva11212/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>你有一篇n个自然段组成的文章，希望将它们排列成1，2，…，n。可以用Ctrl+X（剪切）和Ctrl+V（粘贴）快捷键来完成任务。每次可以剪切一段连续的自然段，粘贴时按照顺序粘贴。注意，剪贴板只有一个，所以不能连续剪切两次，只能剪切和粘贴交替。例如，为了将{2，4，1，5，3，6}变为升序，可以剪切1将其放到2前，然后剪切3将其放到4前。再如，排列{3，4，5，1，2}，只需一次剪切和一次粘贴即可——将{3，4，5}放在{1，2}后，或者将{1，2}放在{3，4，5}前。</p><p><strong>【输入格式】</strong></p><p>多组输入数据，对于每组输入数据<br>第一行一个整数n (1 &lt; n &lt; 10)<br>第二行n个整数<br>当n=0结束</p><p><strong>【输出格式】</strong></p><p>对于第i组输入数据，输出:<br>Case i: ans<br>ans 为最少的操作次数<br>每组输出用占一行</p><p><strong>【输入样例】</strong></p><p>6<br>2 4 1 5 3 6<br>5<br>3 4 5 1 2<br>0  </p><p><strong>【输出样例】</strong></p><p>Case 1: 2<br>Case 2: 1  </p><p><strong>【测试网站】</strong></p><p><a href="https://vjudge.net/problem/UVA-11212">uva11212</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>本题利用迭代加深搜索，也是一道典型的状态空间搜索问题，状态就是1~n的排列，初始状态是输入，终止状态是1,2,……n。由于n≤9,排列最多有9！=362880个，但由于每个状态的后继状态比较多，因此仍有TLE的危险。很显然，最坏的情况是需要n-1次剪切，搜索层数不多，但每一层的状态数目又非常庞大，适宜使用IDA<em>。本题如果利用迭代加深搜索，可以发现做多只需要8步，关键在于如何有效地剪枝。考虑后继不正确的数字的个数h，可以证明每次剪切时h最多减少3（因为一次剪切最多只会改变3个数字的后继，若剪切后这3个数字的后继都正确，则h最多减少了3），因此当h&gt;3</em>(maxd-d)时剪枝即可<br>减枝分析（也叫做启发函数）：<br>当改变一个区间的位置，最多会改变3个数的位置的正确性。<br>比如 1,2,3,4,5,6.序列，把2,3移动到6后面，那么1的后面变成了5, 而 6的后面编程了2,而3的后面变成 空了，同样，设当前有四个数字 a b c d ，如果把b移到c后面，则改变了a、b、c三个数的后继，所以最多会改变3个数的位置的正确性。<br>也就是说，对于这道题，如果遍历到了一个深度，（还能遍历的深度 - 当前深度） x 3　&lt; 不正确数字的个数，那么就没有必要继续遍历了，因为往后就是全把这些数字该对了也无法达到理想状态。<br>知道这个之后时间复杂度的问题就得到解决了，只需要每次枚举该步的所有移动就可以了。<br>搜索：截取 [i, j] 插入剩余序列的第k个数字前</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> Case<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">is_sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token number">-1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span> <span class="token operator">!=</span> a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> res<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>n<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> n<span class="token punctuation">)</span> res<span class="token operator">++</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> maxd<span class="token punctuation">,</span><span class="token keyword">int</span> d<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token function">is_sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>h <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>h <span class="token operator">></span> <span class="token punctuation">(</span>maxd<span class="token operator">-</span>d<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> b<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>old<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token function">memcpy</span><span class="token punctuation">(</span>old<span class="token punctuation">,</span>a<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>old<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">int</span> tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> b<span class="token punctuation">[</span>tot<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> old<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> b<span class="token punctuation">[</span>tot<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> old<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;=</span> tot<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        <span class="token keyword">int</span> tot1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> v<span class="token operator">++</span><span class="token punctuation">)</span> a<span class="token punctuation">[</span>tot1<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> i<span class="token punctuation">;</span> v <span class="token operator">&lt;=</span> j<span class="token punctuation">;</span> v<span class="token operator">++</span><span class="token punctuation">)</span> a<span class="token punctuation">[</span>tot1<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> old<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> k<span class="token punctuation">;</span> v <span class="token operator">&lt;</span> tot<span class="token punctuation">;</span> v<span class="token operator">++</span><span class="token punctuation">)</span> a<span class="token punctuation">[</span>tot1<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">dfs</span><span class="token punctuation">(</span>maxd<span class="token punctuation">,</span>d<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token number">-1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> i<span class="token punctuation">;</span>  <span class="token keyword">return</span> n<span class="token number">-1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">is_sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Case %d: %d\n"</span><span class="token punctuation">,</span><span class="token operator">++</span>Case<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">continue</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Case %d: %d\n"</span><span class="token punctuation">,</span><span class="token operator">++</span>Case<span class="token punctuation">,</span><span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Search </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU1203 I NEED A OFFER!</title>
      <link href="/2019/02/26/hdu1203/"/>
      <url>/2019/02/26/hdu1203/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>Speakless很早就想出国，现在他已经考完了所有需要的考试，准备了所有要准备的材料，于是，便需要去申请学校了。<br>要申请国外的任何大学，你都要交纳一定的申请费用，这可是很惊人的。Speakless没有多少钱，总共只攒了n万美元。<br>他将在m个学校中选择若干的（当然要在他的经济承受范围内）。<br>每个学校都有不同的申请费用a（万美元），并且Speakless估计了他得到这个学校offer的可能性b。<br>不同学校之间是否得到offer不会互相影响。“I NEED A OFFER”，他大叫一声。<br>帮帮这个可怜的人吧，帮助他计算一下，他可以收到至少一份offer的最大概率。<br>（如果Speakless选择了多个学校，得到任意一个学校的offer都可以）。</p><p><strong>【输入格式】</strong></p><p>输入有若干组数据，每组数据的第一行有两个正整数n,m(0&lt;=n&lt;=10000,0&lt;=m&lt;=10000)<br>后面的m行，每行都有两个数据ai(整型),bi(实型)分别表示第i个学校的申请费用和可能拿到offer的概率。<br>输入的最后有两个0。</p><p><strong>【输出格式】</strong></p><p>每组数据都对应一个输出，表示Speakless可能得到至少一份offer的最大概率。用百分数表示，精确到小数点后一位。</p><p><strong>【输入样例】</strong></p><p>10 3<br>4 0.1<br>4 0.2<br>5 0.3<br>0 0</p><p><strong>【输出样例】</strong></p><p>44.0%</p><p><strong>【提示】</strong></p><p>你可以用 printf(“%%”) 去打印 ‘%’.</p><p><strong>【测试网站】</strong></p><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1203">HDU1203</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>概率dp问题<br>由于概率很小，直接相乘会导致浮点数误差。<br>所以 取对数，化乘法为加法。</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">typedef</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> P<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">11000</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>v<span class="token punctuation">;</span><span class="token keyword">int</span> vol<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">double</span> val0<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>val<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>v <span class="token operator">||</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> v<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 初始化dp 数组    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%lf"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>vol<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>val0<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  val<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">log2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>val0<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  取对数    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> v<span class="token punctuation">;</span> j<span class="token operator">-</span>vol<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>         dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token operator">-</span>vol<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span>val<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  概率dp状态转移    <span class="token keyword">double</span> ans <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">-</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%.1lf"</span><span class="token punctuation">,</span>ans<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%%\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codevs1288 埃及分数</title>
      <link href="/2019/02/26/codevs1288/"/>
      <url>/2019/02/26/codevs1288/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>在古埃及，人们使用单位分数的和(形如1/a的, a是自然数)表示一切有理数。 如：2/3=1/2+1/6,但不允许2/3=1/3+1/3,因为加数中有相同的。 对于一个分数a/b,表示方法有很多种，但是哪种最好呢？ 首先，加数少的比加数多的好，其次，加数个数相同的，最小的分数越大越 好。 如： 19/45=1/3 + 1/12 + 1/180 19/45=1/3 + 1/15 + 1/45 19/45=1/3 + 1/18 + 1/30, 19/45=1/4 + 1/6 + 1/180 19/45=1/5 + 1/6 + 1/18. 最好的是最后一种，因为1/18比1/180,1/45,1/30,1/180都大。 给出a,b(0&lt;a&lt;b&lt;1000),编程计算最好的表达方式</p><p><strong>【输入格式】</strong></p><p>a b</p><p><strong>【输出格式】</strong></p><p>若干个数，自小到大排列，依次是单位分数的分母。</p><p><strong>【输入样例】</strong></p><p>19 45  </p><p><strong>【输出样例】</strong></p><p>5 6 18  </p><p><strong>【测试网站】</strong></p><p><a href="http://codevs.cn/problem/1288/">codevs1288</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>题目意思为给定一个单位分数，拆分为几个单位分数之和，要求不能有相同的单位分数，且个数最少。当个数相同的，最小的分数最大的方案为最优。<br>所以可以从小到大枚举个数，然后dfs搜索，即迭代加深搜索。<br>需要注意的是，需要剪枝，<br>1.枚举分母时由于受分数大小限制，所以分母有下限。<br>2.枚举分母是由于总个数确定maxd，当前已枚举的个数确定d,所以剩余个数确定maxd-d+1,<br>所以分母有上限，(maxd-d+1)x(1/i) &gt; x/y  </p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span><span class="token keyword">int</span> maxd <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>LL ans<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>cur<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>LL <span class="token function">gcd</span><span class="token punctuation">(</span>LL a<span class="token punctuation">,</span> LL b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> b <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> a <span class="token operator">:</span> <span class="token function">gcd</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>a<span class="token operator">%</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">st</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">&lt;=</span> x<span class="token operator">*</span>i<span class="token punctuation">)</span><span class="token keyword">return</span> i<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">int</span> d<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>d<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>d<span class="token punctuation">]</span> <span class="token operator">></span> cur<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">idfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> d<span class="token punctuation">,</span> <span class="token keyword">int</span> mind<span class="token punctuation">,</span> LL x<span class="token punctuation">,</span> LL y<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//mind 最小的分母</span><span class="token punctuation">{</span>  <span class="token keyword">bool</span> ok <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>d <span class="token operator">==</span> maxd<span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>y<span class="token operator">%</span>x <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    cur<span class="token punctuation">[</span>d<span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token operator">/</span>x<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> d<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> cur<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">int</span> s <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>mind<span class="token punctuation">,</span><span class="token function">st</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//分母下界</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> s<span class="token punctuation">;</span> <span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>     <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>maxd<span class="token operator">-</span>d<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>y <span class="token operator">&lt;=</span> x<span class="token operator">*</span>i<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//剪枝优化</span>     cur<span class="token punctuation">[</span>d<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>     LL xx <span class="token operator">=</span> x<span class="token operator">*</span>i<span class="token operator">-</span>y<span class="token punctuation">;</span> LL yy <span class="token operator">=</span> y<span class="token operator">*</span>i<span class="token punctuation">;</span> LL g <span class="token operator">=</span> <span class="token function">gcd</span><span class="token punctuation">(</span>xx<span class="token punctuation">,</span>yy<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">idfs</span><span class="token punctuation">(</span>d<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>xx<span class="token operator">/</span>g<span class="token punctuation">,</span>yy<span class="token operator">/</span>g<span class="token punctuation">)</span><span class="token punctuation">)</span> ok <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>  <span class="token keyword">return</span> ok<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  LL x<span class="token punctuation">,</span>y<span class="token punctuation">;</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%lld%lld"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span><span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>y<span class="token operator">%</span>x <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>y<span class="token operator">/</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token keyword">int</span> s <span class="token operator">=</span> <span class="token function">st</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">++</span>maxd<span class="token punctuation">)</span>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">idfs</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>s<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> maxd<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%lld%c"</span><span class="token punctuation">,</span> ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i <span class="token operator">==</span> maxd<span class="token operator">?</span> <span class="token string">'\n'</span> <span class="token operator">:</span> <span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Search </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP2758 编辑距离</title>
      <link href="/2019/02/26/luogup2758/"/>
      <url>/2019/02/26/luogup2758/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>设A和B是两个字符串。我们要用最少的字符操作次数，将字符串A转换为字符串B。这里所说的字符操作共有三种：</p><p>1、删除一个字符；</p><p>2、插入一个字符；</p><p>3、将一个字符改为另一个字符；</p><p>！皆为小写字母！</p><p><strong>【输入格式】</strong></p><p>第一行为字符串A；第二行为字符串B；字符串A和B的长度均小于2000。</p><p><strong>【输出格式】</strong></p><p>只有一个正整数，为最少字符操作次数。</p><p><strong>【输入样例】</strong></p><p>sfdqxbw<br>gfdgw  </p><p><strong>【输出样例】</strong></p><p>4  </p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/luoguP2758">luoguP2758</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>dp[i][j] 表示第一行的前i个字母和第二行的前j个字母进行匹配<br>通过增删替换等操作有如下动态转移方程<br>dp[i][j] = min(dp[i-1][j]+1,dp[i][j-1]+1,dp[i-1][j-1]+ (s[i] != s[j])</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">2000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//dp[i][j] = min(dp[i-1][j]+1,dp[i][j-1]+1,dp[i-1][j-1]+ (s[i] != s[j])</span><span class="token keyword">int</span> dp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  string s1<span class="token punctuation">,</span>s2<span class="token punctuation">;</span>  cin <span class="token operator">>></span> s1 <span class="token operator">>></span> s2<span class="token punctuation">;</span>  <span class="token keyword">int</span> n <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> m <span class="token operator">=</span> s2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span>s1<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> s2<span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">//cout &lt;&lt; i &lt;&lt; " " &lt;&lt; j &lt;&lt; " " &lt;&lt; dp[i][j] &lt;&lt; endl;</span>     <span class="token punctuation">}</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ1651 Multiplication Puzzle</title>
      <link href="/2019/02/26/poj1651/"/>
      <url>/2019/02/26/poj1651/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>给你n张卡牌，每个卡牌有一个权值，当你取出一个卡片时，你会得到一个得分,例如10 1 50 20 5, 你拿出第二张，则会得到分数10 x 1 x 50，<br>要求拿完2 - n-1张卡牌，不能拿第一张和最后一张。例如拿的顺序是1，20，50， 则分数为10 x 1 x 50 + 50 x 20 x 5 + 10 x 50 x 5 = 8000。</p><p><strong>【输入格式】</strong></p><p>第一行一个数n。(3 &lt; n &lt; 100)<br>第二行n个整数代表权值。</p><p><strong>【输出格式】</strong></p><p>输出一个整数——最小的得分</p><p><strong>【输入样例】</strong></p><p>6<br>10 1 50 50 20 5  </p><p><strong>【输出样例】</strong></p><p>3650  </p><p><strong>【测试网站】</strong></p><p><a href="http://poj.org/problem?id=1651">poj1651</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>区间DP,dp[i][j] 表示拿出i-j的牌的最小得分<br>dp[i][j] = min(dp[i][k-1] + dp[k+1][j] + a[i-1] x a[k] x a[j+1])   (i&lt;=k&lt;=j)</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">long</span> <span class="token keyword">long</span> dp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token number">-1</span><span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>     <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>         <span class="token punctuation">{</span>           dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1e18</span><span class="token punctuation">;</span>           <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> i<span class="token punctuation">;</span> k <span class="token operator">&lt;=</span> j<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>             dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> a<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token operator">*</span>a<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span>a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU2412 Party at Hali-Bula</title>
      <link href="/2019/02/26/hdu2412/"/>
      <url>/2019/02/26/hdu2412/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>公司里有n(n&lt;=200)个人形成一个树状结构，即除了老板之外每个员工都有唯一的直属上司。要求选尽量多的人，但不能同时选择一个人和他的直属上司。问：最多能选多少人，以及在人数最多的前提下方案是否唯一。</p><p><strong>【输入格式】</strong></p><p>第一行一个数n;第二行输入老板的名字;以下的n-1行中,每行是一位员工的名字和其直属上司的名字(英文单词,长度为1到100),两个名字之间有空格隔开,’0’为输入结束的标识符。</p><p><strong>【输出格式】</strong></p><p>一行,输出一个数字，表示最大的访客数量。并再同一行输出单词’Yes’或’No’，代表目前方案是否唯一。</p><p><strong>【输入样例】</strong></p><p>6<br>Jason<br>Jack Jason<br>Joe Jack<br>Jill Jason<br>John Jack<br>Jim Jill<br>2<br>Ming<br>Cho Ming<br>0  </p><p><strong>【输出样例】</strong></p><p>4 Yes<br>1 No  </p><p><strong>【测试网站】</strong></p><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2412">HDU2412</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>树形DP<br>用f[i][0]表示不选择i点时，i点及其子树能选出的最多人数，f[i][1]表示选择i点时，i点及其子树的最多人数<br>状态转移方程:<br>对于叶子节点 f[k][0] = 0, f[k][1] = 1<br>对于非叶子节点i,<br>f[i][0] = ∑ max(f[j][0], f[j][1]) (j是i的儿子)<br>f[i][1] = 1 + ∑ f[j][0] (j是i的儿子)<br>最多人数即为max(f[0][0], f[0][1])<br>如何判断最优解是否唯一?<br>新加一个状态dup[i][j]，表示相应的f[i][j]是否是唯一方案。<br>对于叶子结点, dup[k][0] = dup[k][1] = 1.<br>对于非叶子结点,<br>对于i的任一儿子j，若(f[j][0] &gt; f[j][1] 且 dup[j][0] == 0) 或 (f[j][0] &lt; f[j][1] 且 dup[j][1] == 0) 或 (f[j][0] == f[j][1])，则dup[i][0] = 0<br>对于i的任一儿子j有dup[j][0] = 0, 则dup[i][1] = 0</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">200</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">;</span>vector <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> G<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> f<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> vis<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> ans<span class="token punctuation">;</span><span class="token keyword">bool</span> dup<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>  f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  dup<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> dup<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">int</span> u <span class="token operator">=</span> G<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>     vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>     <span class="token function">dfs</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>     f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">></span> f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> dup<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span>          dup<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> dup<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span>          dup<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>          dup<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>     f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>dup<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> dup<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>  map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> mp<span class="token punctuation">;</span>  <span class="token keyword">int</span> tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  string boss<span class="token punctuation">,</span>u<span class="token punctuation">,</span>v<span class="token punctuation">;</span>  cin <span class="token operator">>></span> boss<span class="token punctuation">;</span>  mp<span class="token punctuation">[</span>boss<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>tot<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> G<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>     cin <span class="token operator">>></span> u <span class="token operator">>></span> v<span class="token punctuation">;</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>mp<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> mp<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>tot<span class="token punctuation">;</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>mp<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> mp<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>tot<span class="token punctuation">;</span>     G<span class="token punctuation">[</span>mp<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>mp<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     G<span class="token punctuation">[</span>mp<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>mp<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token function">memset</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>vis<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>vis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   vis<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   ans <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">></span> f<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> ans <span class="token operator">=</span> dup<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> f<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> ans <span class="token operator">=</span> dup<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token keyword">else</span> ans <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Yes\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">else</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"No\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1122 最大子树和</title>
      <link href="/2019/02/26/luogup1122/"/>
      <url>/2019/02/26/luogup1122/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>小明对数学饱有兴趣，并且是个勤奋好学的学生，总是在课后留在教室向老师请教一些问题。一天他早晨骑车去上课，路上见到一个老伯正在修剪花花草草，顿时想到了一个有关修剪花卉的问题。于是当日课后，小明就向老师提出了这个问题：</p><p>一株奇怪的花卉，上面共连有N N朵花，共有N-1N−1条枝干将花儿连在一起，并且未修剪时每朵花都不是孤立的。每朵花都有一个“美丽指数”，该数越大说明这朵花越漂亮，也有“美丽指数”为负数的，说明这朵花看着都让人恶心。所谓“修剪”，意为：去掉其中的一条枝条，这样一株花就成了两株，扔掉其中一株。经过一系列“修剪“之后，还剩下最后一株花（也可能是一朵）。老师的任务就是：通过一系列“修剪”（也可以什么“修剪”都不进行），使剩下的那株（那朵）花卉上所有花朵的“美丽指数”之和最大。</p><p>老师想了一会儿，给出了正解。小明见问题被轻易攻破，相当不爽，于是又拿来问你。</p><p><strong>【输入格式】</strong></p><p>第一行一个整数N(1 ≤ N ≤ 16000)N(1≤N≤16000)。表示原始的那株花卉上共N N朵花。</p><p>第二行有N N个整数，第II个整数表示第II朵花的美丽指数。</p><p>接下来N-1N−1行每行两个整数a,ba,b，表示存在一条连接第aa 朵花和第bb朵花的枝条。</p><p><strong>【输出格式】</strong></p><p>一个数，表示一系列“修剪”之后所能得到的“美丽指数”之和的最大值。保证绝对值不超过21474836472147483647。</p><p><strong>【输入样例】</strong></p><p>7<br>-1 -1 -1 1 1 1 0<br>1 4<br>2 5<br>3 6<br>4 7<br>5 7<br>6 7  </p><p><strong>【输出样例】</strong></p><p>3</p><p><strong>【说明】</strong></p><p>【数据规模与约定】</p><p>对于60%的数据，有N≤1000；</p><p>对于100%的数据，有N≤16000。</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1122">luoguP11122</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>简单的树形DP,dp[i] += max(0,dp[j]), j 为 i 的子节点</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">16000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>vector <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> G<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> vis<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>  f<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">int</span> u <span class="token operator">=</span> G<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      <span class="token function">dfs</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>      f<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">;</span>      <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>      G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>      G<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">memset</span><span class="token punctuation">(</span>vis<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>vis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    vis<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token operator">-</span>INF<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        ans <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ2955 Brackets</title>
      <link href="/2019/02/26/poj2955/"/>
      <url>/2019/02/26/poj2955/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>题目大意：给你一串()[]括号，要你求出这串括号的最大匹配个数，如’(‘与’)’匹配，为2个，’[‘与’]’匹配，为2个，其他不能匹配…….</p><p><strong>【输入格式】</strong></p><p>输入有多组样例，每组样例为一行字符，end时结束。</p><p><strong>【输出格式】</strong></p><p>每个样例输出一个答案，占一行</p><p><strong>【输入样例】</strong></p><p>((()))<br>()()()<br>([]])<br>)[)(<br>([][][)<br>end  </p><p><strong>【输出样例】</strong></p><p>6<br>6<br>4<br>0<br>6  </p><p><strong>【测试网站】</strong></p><p><a href="http://poj.org/problem?id=2955">poj2955</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>dp[i][j]代表从区间i到区间j所匹配的括号的最大个数，首先，假设不匹配，那么dp[i][j]=dp[i+1][j]；然后查找i+1~~j有木有与第i个括号匹配的</p><p>假设存在：<br>dp[i][j]=max(dp[i][j],dp[i+1][k-1]+dp[k][j]+2)…..</p><p>注意有多组数据，dp数组不能开得太大，开2000*2000 TLE了</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstring></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> dp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">char</span> str<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>str<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'e'</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//  dp[i][j] = max(dp[i+1][j-1] + 1, dp[i+1][j], dp[i][j-1]);</span>  <span class="token function">memset</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token number">-1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'('</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">')'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'['</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">']'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> j<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">+</span>dp<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ3280 Cheapest Palindrome</title>
      <link href="/2019/02/26/poj3280/"/>
      <url>/2019/02/26/poj3280/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>给你长度为m的字符串，其中有n种字符，每种字符都有两个值，分别是插入这个字符的代价，删除这个字符的代价，让你求将原先给出的那串字符变成一个回文串的最小代价。</p><p><strong>【输入格式】</strong></p><p>第一行n,m;<br>第二行一个字符串<br>接下来n行一个字母，两个整数用空格隔开，分别代表增加和删除的代价</p><p><strong>【输出格式】</strong></p><p>一个整数，最小代价</p><p><strong>【输入样例】</strong></p><p>3 4<br>abcb<br>a 1000 1100<br>b 350 700<br>c 200 800  </p><p><strong>【输出样例】</strong></p><p>0  </p><p><strong>【说明】</strong></p><p>If we insert an “a” on the end to get “abcba”, the cost would be 1000. If we delete the “a” on the beginning to get “bcb”, the cost would be 1100. If we insert “bcb” at the begining of the string, the cost would be 350 + 200 + 350 = 900, which is the minimum.</p><p><strong>【测试网站】</strong></p><p><a href="http://poj.org/problem?id=3280">poj3280</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>dp[i][j]代表区间i到区间j成为回文串的最小代价，那么对于dp[i][j]有三种情况：<br>1、dp[i+1][j]表示区间i到区间j已经是回文串了的最小代价，那么对于s[i]这个字母，我们有两种操作，删除与添加，对应有两种代价，dp[i+1][j]+add[s[i]],dp[i+1][j]+del[s[i]]，取这两种代价的最小值；<br>2、dp[i][j-1]表示区间i到区间j-1已经是回文串了的最小代价，那么对于s[j]这个字母，同样有两种操作，dp[i][j-1]+add[s[j]],dp[i][j-1]+del[s[j]]，取最小值<br>3、若是s[i]==s[j]，dp[i+1][j-1]表示区间i+1到区间j-1已经是回文串的最小代价，那么对于这种情况，我们考虑dp[i][j]与dp[i+1][j-1]的大小<br>然后dp[i][j]取上面这些情况的最小值</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstring></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">2000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>string str<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>  cin <span class="token operator">>></span> str<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> c<span class="token punctuation">;</span>    <span class="token keyword">int</span> x<span class="token punctuation">,</span>y<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%c%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>c<span class="token punctuation">,</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span><span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>    a<span class="token punctuation">[</span>c<span class="token operator">-</span><span class="token string">'a'</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span> b<span class="token punctuation">[</span>c<span class="token operator">-</span><span class="token string">'a'</span><span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> m<span class="token number">-1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>     dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>     <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>     dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> str<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> j<span class="token number">-1</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>     dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token function">min</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token punctuation">[</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token function">min</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>str<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token punctuation">[</span>str<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>m<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1140 相似基因</title>
      <link href="/2019/02/26/luogup1140/"/>
      <url>/2019/02/26/luogup1140/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>大家都知道，基因可以看作一个碱基对序列。它包含了44种核苷酸，简记作A,C,G,TA,C,G,T。生物学家正致力于寻找人类基因的功能，以利用于诊断疾病和发明药物。</p><p>在一个人类基因工作组的任务中，生物学家研究的是：两个基因的相似程度。因为这个研究对疾病的治疗有着非同寻常的作用</p><p>两个基因的相似度的计算方法如下：  </p><p>对于两个已知基因，例如AGTGATGAGTGATG和GTTAGGTTAG，将它们的碱基互相对应。当然，中间可以加入一些空碱基-，例如：</p><table><thead><tr><th>A</th><th>G</th><th>T</th><th>G</th><th>A</th><th>T</th><th>-</th><th>G</th></tr></thead><tbody><tr><td>-</td><td>G</td><td>T</td><td>-</td><td>-</td><td>T</td><td>A</td><td>G</td></tr></tbody></table><p>这样,两个基因之间的相似度就可以用碱基之间相似度的总和来描述，碱基之间的相似度如下表所示：</p><p>||A|C|G|T|-|<br>|-||-|-|-|-|-|<br>|A|5|-1|-2|-1|-3|<br>|C|-1|5|-3|-2|-4|<br>|G|-2|-3|5|-2|-2|<br>|T|-1|-2|-2|5|-1|<br>|-|-3|-4|-2|-1|*|<br>那么相似度就是：<br>(-3)+5+5+(-2)+(-3)+5+(-3)+5=9(−3)+5+5+(−2)+(−3)+5+(−3)+5=9。<br>因为两个基因的对应方法不唯一，例如又有：</p><p>| A | G | T | G | A | T | G |<br>|-|-|-|-|-|-|-|-|<br>| - | G | T | T | A | - | G |</p><p>相似度为：(-3)+5+5+(-2)+5+(-1)+5=14(−3)+5+5+(−2)+5+(−1)+5=14。规定两个基因的相似度为所有对应方法中，相似度最大的那个。</p><p><strong>【输入格式】</strong></p><p>共两行。每行首先是一个整数，表示基因的长度；隔一个空格后是一个基因序列，序列中只含A,C,G,TA,C,G,T四个字母。1 \le 1≤序列的长度 \le 100≤100。</p><p><strong>【输出格式】</strong></p><p>仅一行，即输入基因的相似度。</p><p><strong>【输入样例】</strong></p><p>7 AGTGATG<br>5 GTTAG</p><p><strong>【输出样例】</strong></p><p>14</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1140">luoguP1140</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>dp[i][j] 表示第一个基因序列前i个和第二个基因序列前j个进行配对时的最大相似度。</p><p>dp[i][j] = max(dp[i][j],dp[i-1][j-1] + mp[a[i]][b[j]])<br>dp[i][j] = max(dp[i][j],dp[i-1][j] + mp[a[i]][‘-‘])<br>dp[i][j] = max(dp[i][j],dp[i][j-1] + mp[‘-‘][b[j]])</p><p>初始化:<br>所有的dp[i][0]为mp[a[i][‘-‘]]<br>所有的dp[0][i]为mp[‘-‘][b[i]]</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> dp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>string sa<span class="token punctuation">,</span>sb<span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">int</span> mp<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token punctuation">{</span>  <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span>  <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span>  <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span>  <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">turn</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">switch</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">case</span> <span class="token string">'A'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token string">'C'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token string">'G'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token string">'T'</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> cin <span class="token operator">>></span> sa<span class="token punctuation">;</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span> cin <span class="token operator">>></span> sb<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  a<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">turn</span><span class="token punctuation">(</span>sa<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  b<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">turn</span><span class="token punctuation">(</span>sb<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//初始化时需要注意</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> mp<span class="token punctuation">[</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">+</span> mp<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span>  dp<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">+</span> mp<span class="token punctuation">[</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> mp<span class="token punctuation">[</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">+</span> mp<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//  cout &lt;&lt; i &lt;&lt; " " &lt;&lt; j &lt;&lt; " " &lt;&lt; dp[i][j] &lt;&lt; endl;</span>      <span class="token punctuation">}</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1282 多米诺骨牌</title>
      <link href="/2019/02/25/luogup1282/"/>
      <url>/2019/02/25/luogup1282/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>多米诺骨牌有上下2个方块组成，每个方块中有1~6个点。现有排成行的</p><p>上方块中点数之和记为S1，下方块中点数之和记为S2，它们的差为|S1-S2|。例如在图8-1中，S1=6+1+1+1=9，S2=1+5+3+2=11，|S1-S2|=2。每个多米诺骨牌可以旋转180°，使得上下两个方块互换位置。 编程用最少的旋转次数使多米诺骨牌上下2行点数之差达到最小。</p><p><img src="https://cdn.luogu.org/upload/pic/91.png" alt="你想输入的替代文字"></p><p>对于图中的例子，只要将最后一个多米诺骨牌旋转180°，可使上下2行点数之差为0。</p><p><strong>【输入格式】</strong></p><p>输入文件的第一行是一个正整数n(1≤n≤1000)，表示多米诺骨牌数。接下来的n行表示n个多米诺骨牌的点数。每行有两个用空格隔开的正整数，表示多米诺骨牌上下方块中的点数a和b，且1≤a，b≤6。</p><p><strong>【输出格式】</strong></p><p>输出文件仅一行，包含一个整数。表示求得的最小旋转次数。</p><p><strong>【输入样例】</strong></p><p>4<br>6 1<br>1 5<br>1 3<br>1 2  </p><p><strong>【输出样例】</strong></p><p>1</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1282">luoguP1282</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>dp[i][j] 表示前i个第一行达到和为j时旋转次数最小值<br>dp[i][j] = min(dp[i-1][j],dp[i-1][j-a[i]]<br>(1 &lt;= i &lt;= n, 0 &lt;= j &lt;= 6*n)<br>最后在枚举j，求其对应的和的差值，统计差值最小的情况下的最小旋转次数，即答案</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token operator">*</span><span class="token number">6</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    s <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">memset</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span>INF<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token number">6</span><span class="token operator">*</span>n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">>=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">>=</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>  <span class="token keyword">int</span> ans <span class="token operator">=</span> INF<span class="token punctuation">,</span>anst <span class="token operator">=</span> INF<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> s<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> INF<span class="token punctuation">)</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>anst <span class="token operator">></span> <span class="token function">abs</span><span class="token punctuation">(</span>s<span class="token operator">-</span>j<span class="token operator">-</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span>      anst <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>s<span class="token operator">-</span>j<span class="token operator">-</span>j<span class="token punctuation">)</span><span class="token punctuation">,</span> ans <span class="token operator">=</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>anst <span class="token operator">==</span> <span class="token function">abs</span><span class="token punctuation">(</span>s<span class="token operator">-</span>j<span class="token operator">-</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span> ans <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span>dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1880 石子合并</title>
      <link href="/2019/02/25/luogup1880/"/>
      <url>/2019/02/25/luogup1880/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>在一个圆形操场的四周摆放N堆石子,现要将石子有次序地合并成一堆.规定每次只能选相邻的2堆合并成新的一堆，并将新的一堆的石子数，记为该次合并的得分。</p><p>试设计出1个算法,计算出将N堆石子合并成1堆的最小得分和最大得分.</p><p><strong>【输入格式】</strong></p><p>数据的第1行试正整数N,1≤N≤100,表示有N堆石子.第2行有N个数,分别表示每堆石子的个数.</p><p><strong>【输出格式】</strong></p><p>输出共2行,第1行为最小得分,第2行为最大得分.</p><p><strong>【输入样例】</strong></p><p>4<br>4 5 9 4  </p><p><strong>【输出样例】</strong></p><p>43<br>54</p><p><strong>【说明】</strong></p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P880">luoguP1880</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><p>因为石子是围成一圈的，所以将n堆石子展开成2<em>n,再进行区间dp<br>从长度为2开始，一直到n，n-2</em>n 的部分也需要进行dp, dp状态转移方程为：<br>dp[i][j] = max(dp[i][k] + dp[k+1][j] + sum[j]-sum[i-1]) (i&lt;k&lt;j-1)<br>最后答案max(dp[i][i+n-1])。<br>最小得分亦然。</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">200</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> dp1<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>dp2<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>sum<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">int</span> n<span class="token punctuation">;</span>   <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      a<span class="token punctuation">[</span>n<span class="token operator">+</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token operator">*</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> sum<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">+</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>dp1<span class="token punctuation">,</span>INF<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>dp1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>dp2<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>dp2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token operator">*</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> dp1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> len <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> len<span class="token operator">++</span><span class="token punctuation">)</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> len<span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token operator">*</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">,</span>j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// !j &lt;= 2*n!</span>          <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> i<span class="token punctuation">;</span> k <span class="token operator">&lt;</span> j<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>         <span class="token punctuation">{</span>           dp1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> dp1<span class="token punctuation">[</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> sum<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-</span>sum<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           dp2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> dp2<span class="token punctuation">[</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> sum<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-</span>sum<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span>  <span class="token keyword">int</span> ans1 <span class="token operator">=</span> INF<span class="token punctuation">,</span>ans2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    ans1 <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>ans1<span class="token punctuation">,</span>dp1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token operator">+</span>n<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ans2 <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>ans2<span class="token punctuation">,</span>dp2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token operator">+</span>n<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n%d\n"</span><span class="token punctuation">,</span>ans1<span class="token punctuation">,</span>ans2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1280 尼克的任务</title>
      <link href="/2019/02/25/luogup1280/"/>
      <url>/2019/02/25/luogup1280/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>尼克每天上班之前都连接上英特网，接收他的上司发来的邮件，这些邮件包含了尼克主管的部门当天要完成的全部任务，每个任务由一个开始时刻与一个持续时间构成。</p><p>尼克的一个工作日为N分钟，从第一分钟开始到第N分钟结束。当尼克到达单位后他就开始干活。如果在同一时刻有多个任务需要完成，尼克可以任选其中的一个来做，而其余的则由他的同事完成，反之如果只有一个任务，则该任务必需由尼克去完成，假如某些任务开始时刻尼克正在工作，则这些任务也由尼克的同事完成。如果某任务于第P分钟开始，持续时间为T分钟，则该任务将在第P+T-1分钟结束。</p><p>写一个程序计算尼克应该如何选取任务，才能获得最大的空暇时间。</p><p><strong>【输入格式】</strong></p><p>输入数据第一行含两个用空格隔开的整数N和K(1≤N≤10000，1≤K≤10000)，N表示尼克的工作时间，单位为分钟，K表示任务总数。</p><p>接下来共有K行，每一行有两个用空格隔开的整数P和T，表示该任务从第P分钟开始，持续时间为T分钟，其中1≤P≤N，1≤P+T-1≤N。</p><p><strong>【输出格式】</strong></p><p>输出文件仅一行，包含一个整数，表示尼克可能获得的最大空暇时间。</p><p><strong>【输入样例】</strong></p><p>15 6<br>1 2<br>1 6<br>4 11<br>8 5<br>8 1<br>11 5    </p><p><strong>【输出样例】</strong></p><p>4  </p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1280">luoguP1280</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>设dp[i] 表示当时间为i时，尼克在之后能获得的最大空暇。<br>从后往前进行dp<br>如果该时刻没有任务，dp[i] = dp[i+1] + 1<br>如果该时刻有任务，  dp[i] = max(dp[i],dp[i+T])<br>最终答案为dp[1],初始时全为0。</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">10000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">typedef</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> P<span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>k<span class="token punctuation">;</span><span class="token keyword">int</span> p<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> <span class="token function">cmp</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> p<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">></span> p<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>t<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>a<span class="token operator">+</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>cmp<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//for(int i = 1; i &lt;= k; i++) cout &lt;&lt; a[i] &lt;&lt; endl;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token punctuation">,</span>j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//cout &lt;&lt; i &lt;&lt;' ' &lt;&lt; p[a[j]] &lt;&lt; endl;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">!=</span> p<span class="token punctuation">[</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">continue</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">==</span> p<span class="token punctuation">[</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">+</span>t<span class="token punctuation">[</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        j<span class="token operator">++</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">//  cout &lt;&lt; dp[i] &lt;&lt; " * " &lt;&lt; endl;</span>  <span class="token punctuation">}</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1091 合唱队形</title>
      <link href="/2019/02/12/luogup1091/"/>
      <url>/2019/02/12/luogup1091/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>N位同学站成一排，音乐老师要请其中的(N−K)位同学出列，使得剩下的K位同学排成合唱队形。<br>合唱队形是指这样的一种队形：设K位同学从左到右依次编号为1,2,…,K，他们的身高分别为T1,T2,…,TK,则他们的身高满足T1&lt;…<ti>T{i+1}&gt;…&gt;TK(1≤i≤K)。<br>你的任务是，已知所有N位同学的身高，计算最少需要几位同学出列，可以使得剩下的同学排成合唱队形。</ti></p><p><strong>【输入格式】</strong></p><p>共二行。<br>第一行是一个整数N(2≤N≤100)，表示同学的总数。<br>第二行有nn个整数，用空格分隔，第i个整数Ti(130≤Ti≤230)是第i位同学的身高(厘米)。  </p><p><strong>【输出格式】</strong></p><p>一个整数，最少需要几位同学出列</p><p><strong>【输入样例】</strong></p><p>8<br>186 186 150 200 160 130 197 220</p><p><strong>【输出样例】</strong></p><p>4</p><p><strong>【说明】</strong></p><p>对于50％的数据，保证有n n≤20；</p><p>对于全部的数据，保证有n n≤100。</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1091">luoguP1091</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>枚举中间那个最高的身高，然后分别从左从右向最高的身高求LIS,此时此种方案下出列的同学最少，然后取枚举的所有方案中的最优结果。</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> dp1<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>dp2<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> n<span class="token punctuation">;</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      dp1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> dp1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp1<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>     dp2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>     <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> n<span class="token punctuation">;</span> j <span class="token operator">></span> i<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> dp2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp2<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>  <span class="token keyword">int</span> ans <span class="token operator">=</span> INF<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     ans <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span>n<span class="token operator">-</span>dp1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>dp2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1020 导弹拦截</title>
      <link href="/2019/02/11/luogup1020/"/>
      <url>/2019/02/11/luogup1020/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>某国为了防御敌国的导弹袭击，发展出一种导弹拦截系统。但是这种导弹拦截系统有一个缺陷：虽然它的第一发炮弹能够到达任意的高度，但是以后每一发炮弹都不能高于前一发的高度。某天，雷达捕捉到敌国的导弹来袭。由于该系统还在试用阶段，所以只有一套系统，因此有可能不能拦截所有的导弹。</p><p>输入导弹依次飞来的高度（雷达给出的高度数据是≤50000的正整数），计算这套系统最多能拦截多少导弹，如果要拦截所有导弹最少要配备多少套这种导弹拦截系统。</p><p><strong>【输入格式】</strong></p><p>1行，若干个整数（个数 ≤100000）</p><p><strong>【输出格式】</strong></p><p>2行，每行一个整数，第一个数字表示这套系统最多能拦截多少导弹，第二个数字表示如果要拦截所有导弹最少要配备多少套这种导弹拦截系统</p><p><strong>【输入样例】</strong></p><p>389 207 155 300 299 170 158 65</p><p><strong>【输出样例】</strong></p><p>6<br>2</p><p><strong>【说明】</strong></p><p>为了让大家更好地测试n方算法，本题开启spj，n方100分，nlogn200分</p><p>每点两问，按问给分</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1020">luoguP1020</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>1.第一问求最长不上升子序列。反过来即最长不下降子序列，有n^2 的做法，还有nlogn的做法。<br>n^2做法：dp[i]表示前i个数最长的满足要求的序列长度。<br>nlogn 做法： dp[j] 表示长度为j时，最小的数值。 对于每一个a[i], 二分查找其应该放入dp数组中的哪个位置。<br>2.第二问求最少可划分为多少个不上升子序列。<br>应用dilworth定理：  设(X,≤) 是一个有限偏序集，并令m是反链的最大的大小。则X可以被划分成m个但不能再少的链<br>最少链划分 = 最长反链长度<br>所以最少划分数 = LIS<br><a href="https://www.cnblogs.com/flipped/p/5009943.html">dilworth定理的讲解与证明</a> 《== 请点击<br>所以只需要用前面提到的nlogn的算法求LIS即可。  </p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1e5</span><span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> dp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> n<span class="token operator">++</span><span class="token punctuation">;</span>  dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> INF<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token number">-1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>     <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token function">upper_bound</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span>dp<span class="token operator">+</span>ans<span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> dp<span class="token punctuation">;</span>     dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>     ans <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>  cout <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> INF<span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token function">lower_bound</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span>dp<span class="token operator">+</span>ans<span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> dp<span class="token punctuation">;</span>      dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>      ans <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>   cout <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP2789 直线交点数</title>
      <link href="/2019/02/09/luogup2789/"/>
      <url>/2019/02/09/luogup2789/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>平面上有N条直线，且无三线共点，那么这些直线能有多少不同的交点数？</p><p><strong>【输入格式】</strong></p><p>一个正整数N</p><p><strong>【输出格式】</strong></p><p>一个整数表示方案总数</p><p><strong>【输入样例】</strong></p><p>4  </p><p><strong>【输出样例】</strong></p><p>5</p><p><strong>【说明】</strong></p><p>N&lt;=25</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P2789">luoguP2789</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>题目求不同交点数的方案数，那么我们可以将所有情况的交点数都求出，然后查重统计答案。可以根据是否平行划分成不同的情况，比如，对于n个点，我们考虑，n条直线相互平行、n-1条直线相互平行、n-2条直线相互平行、、、，即n-r条直线相互平行，那个这r条相互平行的直线与剩下的直线的交点数 = r(n-r), 然后我们再递归到下一层来讨论n-r的情况，依次类推下去。请结合代码理解！</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">bool</span> vis<span class="token punctuation">[</span><span class="token number">1000</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span> ans<span class="token operator">++</span><span class="token punctuation">;</span> vis<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> x<span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>  <span class="token function">fun</span><span class="token punctuation">(</span>x<span class="token operator">-</span>i<span class="token punctuation">,</span>i<span class="token operator">*</span><span class="token punctuation">(</span>x<span class="token operator">-</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  cin <span class="token operator">>></span> n<span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>vis<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>vis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">fun</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  cout <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Rucursion </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1616 疯狂的采药</title>
      <link href="/2019/02/04/luogup1616/"/>
      <url>/2019/02/04/luogup1616/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>辰辰是个天资聪颖的孩子，他的梦想是成为世界上最伟大的医师。为此，他想拜附近最有威望的医师为师。医师为了判断他的资质，给他出了一个难题。医师把他带到一个到处都是草药的山洞里对他说：“孩子，这个山洞里有一些不同的草药，采每一株都需要一些时间，每一株也有它自身的价值。我会给你一段时间，在这段时间里，你可以采到一些草药。如果你是一个聪明的孩子，你应该可以让采到的草药的总价值最大。”</p><p>如果你是LiYuxiang，你能完成这个任务吗？</p><p>此题和原题的不同点：</p><p>1.每种草药可以无限制地疯狂采摘。</p><p>2.药的种类眼花缭乱，采药时间好长好长啊！师傅等得菊花都谢了！</p><p>如果你是辰辰，你能完成这个任务吗？</p><p><strong>【输入格式】</strong></p><p>输入第一行有两个整数T（1 &lt;= T &lt;= 100000）和M（1 &lt;= M &lt;= 10000），用一个空格隔开，T代表总共能够用来采药的时间，M代表山洞里的草药的数目。接下来的M行每行包括两个在1到10000之间（包括1和10000）的整数，分别表示采摘某种草药的时间和这种草药的价值。</p><p><strong>【输出格式】</strong></p><p>1个整数，表示在规定的时间内可以采到的草药的最大总价值。</p><p><strong>【输入样例】</strong></p><p>70 3<br>71 100<br>69 1<br>1 2  </p><p><strong>【输出样例】</strong></p><p>140</p><p><strong>【说明】</strong></p><p>对于30%的数据，M &lt;= 1000；</p><p>对于全部的数据，M &lt;= 10000，且M*T&lt;10000000(别数了，7个0)。</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1616">luoguP1616</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>完全背包模板题目，采药时间作为限制条件，等同于背包问题的体积，药品价值作为价值衡量，然后利用套用完全背包模板解题。</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxc <span class="token operator">=</span> <span class="token number">100000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">10000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> dp<span class="token punctuation">[</span>maxc<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> v<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>w<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> T<span class="token punctuation">,</span>M<span class="token punctuation">;</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>T<span class="token punctuation">,</span><span class="token operator">&amp;</span>M<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> M<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> M<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> T<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>           dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1049 装箱问题</title>
      <link href="/2019/02/04/luogup1049/"/>
      <url>/2019/02/04/luogup1049/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong>  </p><p>有一个箱子容量为V（正整数，0 ≤ V ≤ 20000），同时有n个物品 0&lt;n≤30，每个物品有一个体积（正整数）。</p><p>要求n个物品中，任取若干个装入箱内，使箱子的剩余空间为最小。</p><p><strong>【输入格式】</strong></p><p>1个整数，表示箱子容量</p><p>1个整数，表示有n个物品</p><p>接下来n行，分别表示这n个物品的各自体积  </p><p><strong>【输出格式】</strong></p><p>1个整数，表示箱子剩余空间。</p><p><strong>【输入样例】</strong></p><p>24<br>6<br>8<br>3<br>12<br>7<br>9<br>7  </p><p><strong>【输出样例】</strong></p><p>0</p><p><strong>【说明】</strong></p><p>NOIp2001普及组 第4题</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1049">luoguP1049</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>01背包模板题目，体积作为限制条件，等同于背包问题的体积，体积也同时作为价值衡量，然后利用套用01背包模板解题，最后答案为剩余空间为箱子体积V - dp[V]。</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxc <span class="token operator">=</span> <span class="token number">20000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">30</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> v<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> dp<span class="token punctuation">[</span>maxc<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> V<span class="token punctuation">,</span>n<span class="token punctuation">;</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>V<span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> V<span class="token punctuation">;</span> j <span class="token operator">>=</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>      dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>V<span class="token operator">-</span>dp<span class="token punctuation">[</span>V<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1048 采药</title>
      <link href="/2019/02/04/luogup1048/"/>
      <url>/2019/02/04/luogup1048/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>辰辰是个天资聪颖的孩子，他的梦想是成为世界上最伟大的医师。为此，他想拜附近最有威望的医师为师。医师为了判断他的资质，给他出了一个难题。医师把他带到一个到处都是草药的山洞里对他说：“孩子，这个山洞里有一些不同的草药，采每一株都需要一些时间，每一株也有它自身的价值。我会给你一段时间，在这段时间里，你可以采到一些草药。如果你是一个聪明的孩子，你应该可以让采到的草药的总价值最大。”</p><p>如果你是辰辰，你能完成这个任务吗？</p><p><strong>【输入格式】</strong></p><p>第一行有2个整数 T (1 ≤ T ≤ 1000) 和 M ( 1 ≤ M ≤ 100)，用一个空格隔开，T代表总共能够用来采药的时间，MM代表山洞里的草药的数目。接下来的M行每行包括两个在1到100之间（包括1和100）的整数，分别表示采摘某株草药的时间和这株草药的价值。</p><p><strong>【输出格式】</strong></p><p>1个整数，表示在规定的时间内可以采到的草药的最大总价值。</p><p><strong>【输入样例】</strong></p><p>70 3<br>71 100<br>69 1<br>1 2  </p><p><strong>【输出样例】</strong></p><p>3</p><p><strong>【说明】</strong></p><p>对于30%的数据，M ≤ 10；</p><p>对于全部的数据，M ≤ 100。</p><p>NOIP2005普及组第三题</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1048">luoguP1048</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>01背包模板题目，采药时间作为限制条件，等同于背包问题的体积，药品价值作为价值衡量，然后利用套用01背包模板解题。</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxc <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> dp<span class="token punctuation">[</span>maxc<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> v<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>w<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> T<span class="token punctuation">,</span>M<span class="token punctuation">;</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>T<span class="token punctuation">,</span><span class="token operator">&amp;</span>M<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> M<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> M<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> T<span class="token punctuation">;</span> j <span class="token operator">>=</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>           dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1164 小A点菜</title>
      <link href="/2019/02/04/luogup1164/"/>
      <url>/2019/02/04/luogup1164/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>uim神犇拿到了uoi的ra（镭牌）后，立刻拉着基友小A到了一家……餐馆，很低端的那种。<br>uim指着墙上的价目表（太低级了没有菜单），说：“随便点”。</p><p>不过uim由于买了一些辅（e）辅（ro）书，口袋里只剩M元(M≤10000)。<br>餐馆虽低端，但是菜品种类不少，有 N 种 (N≤100)，第i种卖 a[i]<br>元)(a[i] ≤ 1000)。<br>由于是很低端的餐馆，所以每种菜只有一份。<br>小A奉行“不把钱吃光不罢休”，所以他点单一定刚好吧uim身上所有钱花完。他想知道有多少种点菜方法。</p><p>由于小A肚子太饿，所以最多只能等待11秒。</p><p><strong>【输入格式】</strong></p><p>第一行是两个数字，表示NN和MM。</p><p>第二行起NN个正数a[i], 可以有相同的数字，每个数字均在1000以内。</p><p><strong>【输出格式】</strong></p><p>一个正整数，表示点菜方案数，保证答案的范围在int之内。</p><p><strong>【输入样例】</strong></p><p>4 4<br>1 1 2 2</p><p><strong>【输出样例】</strong></p><p>3</p><p><strong>【说明】</strong></p><p>NOIP 2006 普及组 第二题</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1164">luoguP1164</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>01背包模板题目。第二种01背包问题类型，设dp[i][j], 为考虑前i件物品用光j元的方案数。<br>（1）if(j==第i道菜的价格) dp[i][j] = dp[i-1][j]+1;<br>（2）if(j&gt;第i道菜的价格)  dp[i][j] = dp[i-1][j]+dp[i-1][j-第i道菜的价格];<br>（3）if(j&lt;第i道菜的价格) dp[i][j] = dp[i-1][j];</p><p>也可用滚动数组优化，初始化时dp[] = {0}, dp[0] = 1;<br>动态转移方程为  dp[j] += dp[j-a[i]]; (j: m : a[i])</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">10000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> dp<span class="token punctuation">[</span>maxm<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span>    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> m<span class="token punctuation">;</span> j <span class="token operator">>=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>         dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> dp<span class="token punctuation">[</span>j<span class="token operator">-</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1060 开心的金明</title>
      <link href="/2019/02/04/luogup1060/"/>
      <url>/2019/02/04/luogup1060/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>金明今天很开心，家里购置的新房就要领钥匙了，新房里有一间他自己专用的很宽敞的房间。更让他高兴的是，妈妈昨天对他说：“你的房间需要购买哪些物品，怎么布置，你说了算，只要不超过N元钱就行”。今天一早金明就开始做预算，但是他想买的东西太多了，肯定会超过妈妈限定的N元。于是，他把每件物品规定了一个重要度，分为5等：用整数1-5表示，第5等最重要。他还从因特网上查到了每件物品的价格（都是整数元）。他希望在不超过N元（可以等于N元）的前提下，使每件物品的价格与重要度的乘积的总和最大。<br>设第j件物品的价格为v[j], 重要度为w[j], 共选中了k件物品，编号一次为j1,j2,…jk,则所求总和为：v[j1] * w[j1] + v[j2] * w[j2] + … + v[jk] * w[jk]。<br>请你帮助金明设计一个满足要求的购物单。</p><p><strong>【输入格式】</strong></p><p>第一行，为2个正整数，用一个空格隔开：N m（其中 N &lt; 30000) 表示总钱数，(m &lt; 25) 为希望购买物品的个数。</p><p>从第2行到第m+1行，第j行给出了编号为j−1的物品的基本数据，每行有2个非负整数 v p（其中v表示该物品的价格(v &lt;= 10000) p表示该物品的重要度(1-5)</p><p><strong>【输出格式】</strong></p><p>1个正整数，为不超过总钱数的物品的价格与重要度乘积的总和的最大值(&lt;100000000)。</p><p><strong>【输入样例】</strong></p><p>1000 5<br>800 2<br>400 5<br>300 5<br>400 3<br>200 2</p><p><strong>【输出样例】</strong></p><p>3900</p><p><strong>【说明】</strong></p><p>NOIP 2006 普及组 第二题</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1060">luoguP1060</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>01背包模板题目，价格作为限制条件，等同于背包问题的体积，价格和重要度的乘积作为价值衡量，然后利用套用01背包模板解题。</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">30000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> v<span class="token punctuation">[</span>maxm<span class="token punctuation">]</span><span class="token punctuation">,</span>w<span class="token punctuation">[</span>maxm<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> dp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        w<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span><span class="token operator">=</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> n<span class="token punctuation">;</span> j<span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>                dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1064 金明的预算方案</title>
      <link href="/2019/02/04/luogup1064/"/>
      <url>/2019/02/04/luogup1064/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>金明今天很开心，家里购置的新房就要领钥匙了，新房里有一间他自己专用的很宽敞的房间。更让他高兴的是，妈妈昨天对他说：“你的房间需要购买哪些物品，怎么布置，你说了算，只要不超过N元钱就行”。今天一早金明就开始做预算，他把想买的物品分为两类：主件与附件，附件是从属于某个主件的，下表就是一些主件与附件的例子：</p><p>主件 附件</p><p>电脑 打印机，扫描仪</p><p>书柜 图书</p><p>书桌 台灯，文具</p><p>工作椅 无</p><p>如果要买归类为附件的物品，必须先买该附件所属的主件。每个主件可以有0个、1个或2个附件。附件不再有从属于自己的附件。<br>但是他想买的东西太多了，肯定会超过妈妈限定的N元。于是，他把每件物品规定了一个重要度，分为5等：用整数1-5表示，第5等最重要。他还从因特网上查到了每件物品的价格（都是整数元）。他希望在不超过N元（可以等于N元）的前提下，使每件物品的价格与重要度的乘积的总和最大。<br>设第j件物品的价格为v[j], 重要度为w[j], 共选中了k件物品，编号一次为j1,j2,…jk,则所求总和为：v[j1] * w[j1] + v[j2] * w[j2] + … + v[jk] * w[jk]。<br>请你帮助金明设计一个满足要求的购物单。</p><p><strong>【输入格式】</strong></p><p>第11行，为两个正整数，用一个空格隔开：</p><p>N m （其中 N(&lt;32000) 表示总钱数，m(&lt;60)为希望购买物品的个数。） 从第2行到第m+1行，第j行给出了编号为j−1的物品的基本数据，每行有3个非负整数 vpq （其中vv表示该物品的价格(v&lt;10000)，p表示该物品的重要度（1-5），q表示该物品是主件还是附件。如果q=0，表示该物品为主件，如果q&gt;0，表示该物品为附件，q是所属主件的编号）</p><p><strong>【输出格式】</strong></p><p>一个正整数，为不超过总钱数的物品的价格与重要度乘积的总和的最大值（&lt;200000）。</p><p><strong>【输入样例】</strong></p><p>1000 5<br>800 2 0<br>400 5 1<br>300 5 1<br>400 3 0<br>500 2 0     </p><p><strong>【输出样例】</strong></p><p>2200<br><strong>【说明】</strong></p><p>NOIP 2006 提高组 第二题</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1064">luoguP1064</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>01背包模板题目，价格作为限制条件，等同于背包问题的体积，价格和重要度的乘积作为价值衡量，然后利用套用01背包模板解题。<br>然后这题是P1060的升级版，要分类讨论一下。<br>1.不取该主件<br>2.只取该主件<br>3.取主件和附件1<br>4.取主件和附件2<br>5.取主件和附件1、2</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxc <span class="token operator">=</span> <span class="token number">32000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">typedef</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> P<span class="token punctuation">;</span><span class="token keyword">int</span> c<span class="token punctuation">,</span>m<span class="token punctuation">,</span>u<span class="token punctuation">,</span>p<span class="token punctuation">,</span>q<span class="token punctuation">,</span>tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> mp<span class="token punctuation">;</span>vector<span class="token operator">&lt;</span>P<span class="token operator">></span> vs<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> dp<span class="token punctuation">[</span>maxc<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>c<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>     <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>p<span class="token punctuation">,</span><span class="token operator">&amp;</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>q <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>       <span class="token punctuation">{</span>         mp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>tot<span class="token punctuation">;</span>         vs<span class="token punctuation">[</span>tot<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">P</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>u<span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>    <span class="token keyword">else</span> vs<span class="token punctuation">[</span>mp<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">P</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>u<span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> tot<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> c<span class="token punctuation">;</span> j <span class="token operator">>=</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">]</span> <span class="token operator">+</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">]</span> <span class="token operator">+</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second <span class="token operator">+</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">]</span> <span class="token operator">+</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second <span class="token operator">+</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">-</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">]</span> <span class="token operator">+</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second <span class="token operator">+</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second <span class="token operator">+</span> vs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1129 [ZJOI2007]矩阵游戏</title>
      <link href="/2019/02/01/luogup1129/"/>
      <url>/2019/02/01/luogup1129/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>小Q是一个非常聪明的孩子，除了国际象棋，他还很喜欢玩一个电脑益智游戏――矩阵游戏。矩阵游戏在一个N×N黑白方阵进行（如同国际象棋一般，只是颜色是随意的）。每次可以对该矩阵进行两种操作：</p><p>行交换操作：选择矩阵的任意两行，交换这两行（即交换对应格子的颜色）</p><p>列交换操作：选择矩阵的任意两列，交换这两列（即交换对应格子的颜色）</p><p>游戏的目标，即通过若干次操作，使得方阵的主对角线(左上角到右下角的连线)上的格子均为黑色。</p><p>对于某些关卡，小Q百思不得其解，以致他开始怀疑这些关卡是不是根本就是无解的！于是小Q决定写一个程序来判断这些关卡是否有解。</p><p><strong>【输入格式】</strong></p><p>第一行包含一个整数T，表示数据的组数。</p><p>接下来包含T组数据，每组数据第一行为一个整数N，表示方阵的大小；接下来N行为一个N×N的01矩阵（0表示白色，1表示黑色）。</p><p><strong>【输出格式】</strong></p><p>包含T行。对于每一组数据，如果该关卡有解，输出一行Yes；否则输出一行No</p><p><strong>【输入样例】</strong></p><p>2<br>2<br>0 0<br>0 1<br>3<br>0 0 1<br>0 1 0<br>1 0 0  </p><p><strong>【输出样例】</strong></p><p>No<br>Yes</p><p><strong>【说明】</strong></p><p>对于20%的数据，N ≤ 7<br>对于50%的数据，N ≤ 50<br>对于%100%的数据，N ≤ 200</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1129">luoguP1129</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>二分图最大匹配变形，使用匈牙利算法。<br>行和列交换，问是否最终能使正对角线上的各自全为黑色，经过观察可以发现，对于任意2个黑色方块，如果它们初始状态时不在同一行（列），那么无论如何交换，它们都不会在同一行（列）。所以，只需要查看初始状态下，对于每一行是否有一列能与之匹配，再利用二分图最大匹配查看行和列的匹配数，如若等于n,则说明则可以满足题意。输出yes,否则输出No。</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">200</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">100000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">bool</span> vis<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> line<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> h<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">struct</span> edge<span class="token punctuation">{</span>  <span class="token keyword">int</span> to<span class="token punctuation">,</span>next<span class="token punctuation">;</span>  <span class="token function">edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> to <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> next <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">to</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">next</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>es<span class="token punctuation">[</span>maxm<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">add_edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token punctuation">{</span> es<span class="token punctuation">[</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> tot<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i <span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> v <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>        vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> <span class="token function">dfs</span><span class="token punctuation">(</span>line<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>line<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">Max_match</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span><span class="token keyword">int</span> p<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> all <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> p<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">memset</span><span class="token punctuation">(</span>vis<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>vis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span> all<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> all<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> n<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> T<span class="token punctuation">;</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>T<span class="token operator">--</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        <span class="token keyword">int</span> x<span class="token punctuation">;</span>        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>           <span class="token function">add_edge</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>  <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token function">Max_match</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>ans <span class="token operator">==</span> n<span class="token punctuation">)</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Yes\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">else</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"No\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Graph Theory </tag>
            
            <tag> Algorithm </tag>
            
            <tag> Bipartite graph </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1640 [SCOI2010]连续攻击游戏</title>
      <link href="/2019/02/01/luogup1640/"/>
      <url>/2019/02/01/luogup1640/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>lxhgww最近迷上了一款游戏，在游戏里，他拥有很多的装备，每种装备都有2个属性，这些属性的值用[1,10000]之间的数表示。当他使用某种装备时，他只能使用该装备的某一个属性。并且每种装备最多只能使用一次。游戏进行到最后，lxhgww遇到了终极boss，这个终极boss很奇怪，攻击他的装备所使用的属性值必须从1开始连续递增地攻击，才能对boss产生伤害。也就是说一开始的时候，lxhgww只能使用某个属性值为1的装备攻击boss，然后只能使用某个属性值为2的装备攻击boss，然后只能使用某个属性值为3的装备攻击boss……以此类推。现在lxhgww想知道他最多能连续攻击boss多少次？</p><p><strong>【输入格式】</strong></p><p>输入的第一行是一个整数N，表示lxhgww拥有N种装备接下来N行，是对这N种装备的描述，每行2个数字，表示第i种装备的2个属性值</p><p><strong>【输出格式】</strong></p><p>输出一行，包括1个数字，表示lxhgww最多能连续攻击的次数。</p><p><strong>【输入样例】</strong></p><p>3<br>1 2<br>3 2<br>4 5  </p><p><strong>【输出样例】</strong></p><p>2</p><p><strong>【说明】</strong></p><p>对于30%的数据，保证N &lt; = 1000</p><p>对于100%的数据，保证N &lt; = 1000000</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1640">luoguP1640</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>二分图最大匹配变形，使用匈牙利算法，左边为武器属性，右边为武器编号，根据武器的属性进行建边，然后从1到属性最大值开始找增广路，若没找到则break,因为武器属性必须连续。</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1000000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">bool</span> vis<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> line<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> h<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">struct</span> edge<span class="token punctuation">{</span>  <span class="token keyword">int</span> to<span class="token punctuation">,</span>next<span class="token punctuation">;</span>  <span class="token function">edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> to <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> next <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">to</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">next</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>es<span class="token punctuation">[</span>maxn<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">add_edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token punctuation">{</span> es<span class="token punctuation">[</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> tot<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i <span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> v <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>        vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> <span class="token function">dfs</span><span class="token punctuation">(</span>line<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>line<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">Max_match</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span><span class="token keyword">int</span> p<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> all <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> p<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//属性从1开始</span>    <span class="token punctuation">{</span>        <span class="token function">memset</span><span class="token punctuation">(</span>vis<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>vis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span> all<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> all<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> n<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">int</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span><span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">add_edge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">add_edge</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token function">Max_match</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">10001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Graph Theory </tag>
            
            <tag> Algorithm </tag>
            
            <tag> Bipartite graph </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP3386 【模板】二分图匹配</title>
      <link href="/2019/02/01/luogup3386/"/>
      <url>/2019/02/01/luogup3386/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>给定一个二分图，结点个数分别为n,m，边数为e，求二分图最大匹配数</p><p><strong>【输入格式】</strong></p><p>第一行，n,m,e</p><p>第二至e+1行，每行两个正整数u,v，表示u,v有一条连边</p><p><strong>【输出格式】</strong></p><p>共一行，二分图最大匹配</p><p><strong>【输入样例】</strong></p><p>1 1 1<br>1 1</p><p><strong>【输出样例】</strong></p><p>1</p><p><strong>【说明】</strong></p><p>n,m ≤ 1000, 1 ≤ u ≤ n, 1 ≤ v ≤ m, e ≤ n × m<br>因为数据有坑，可能会遇到 v &gt; m 或者 u &gt; n 的情况。<br>请把 v &gt; m 或者 u &gt; n 的数据自觉过滤掉。</p><p>算法：二分图匹配</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P3386">luoguP3386</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>二分图匹配的最大匹配问题，裸题。由于n,m都在1000以内，所以可以选用匈牙利算法(O(VE))。</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">bool</span> g<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//存图，pXn 的图</span><span class="token keyword">bool</span> vis<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//标记一次寻找增广路是对边顶点</span><span class="token keyword">int</span> line<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录匹配方案</span><span class="token comment" spellcheck="true">//寻找增广路O(VE)</span><span class="token keyword">bool</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> v<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>        vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> <span class="token function">dfs</span><span class="token punctuation">(</span>line<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>line<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">Max_match</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span><span class="token keyword">int</span> p<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> all <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> p<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">memset</span><span class="token punctuation">(</span>vis<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>vis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span> all<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> all<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">,</span>e<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">,</span><span class="token operator">&amp;</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> e<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>u <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> u <span class="token operator">></span> n <span class="token operator">||</span> v <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> v <span class="token operator">></span> m<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>    u<span class="token operator">--</span><span class="token punctuation">,</span>v<span class="token operator">--</span><span class="token punctuation">;</span>    g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token function">Max_match</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Graph Theory </tag>
            
            <tag> Algorithm </tag>
            
            <tag> Bipartite graph </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nowcoder317C 小a与星际探索</title>
      <link href="/2019/01/23/nowcoder317c/"/>
      <url>/2019/01/23/nowcoder317c/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>小a正在玩一款星际探索游戏，小a需要驾驶着飞船从1号星球出发前往n号星球。其中每个星球有一个能量指数p。星球i能到达星球j当且仅当 pi &gt; pj 。同时小a的飞船还有一个耐久度 t，初始时为 1号点的能量指数，若小a前往星球 j，那么飞船的耐久度会变为 t⊕pj (即t异或pj，关于其定义请自行百度) 小a想知道到达n号星球时耐久度最大为多少 注意：对于每个位置来说，从它出发可以到达的位置仅与两者的p有关，与下标无关。</p><p><strong>【输入格式】</strong></p><p>第一行一个整数n，表示星球数接下来一行有n个整数，第i个整数表示pi。</p><p><strong>【输出格式】</strong></p><p>一个整数表示到达n号星球时最大的耐久度<br>若不能到达n号星球或到达时的最大耐久度为0则输出−1</p><p><strong>【输入样例】</strong></p><p>3<br>457 456 23</p><p><strong>【输出样例】</strong></p><p>478</p><p><strong>【说明】</strong></p><p>小a有两种方法到达3号星球<br>第一种：1→2→3，最终耐久度为457⊕456⊕23=22<br>第二种：1→3，最终耐久度为 457⊕3=478</p><p>1⩽n,∀pi⩽3000</p><p><strong>【测试网站】</strong></p><p><a href="https://ac.nowcoder.com/acm/contest/317/C">nowcoder317C</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>到达性dp问题，与极值dp略作区分(自己瞎编的haha)<br>首先可以按照pi从大到排序，将1和n之间的p取出来并去重，然后直接在新序列上做背包，用dp[i][j]表示到达第i个位置，当前耐久度为j是否可行。转移的时候分两种情况讨论：</p><ol><li>到达该点</li><li>不到达该点<br>对n位置特殊判断一下，最后枚举n所在位置dp数组的第二维，判断一下即可<br>注意一个小细节：dp数组的第二维不能只开到3000要开到4096<br>时间复杂度：O(np)</li></ol><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span><span class="token keyword">typedef</span> pair <span class="token operator">&lt;</span>LL<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> P<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">3000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">4096</span><span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">bool</span> dp<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">[</span>maxm<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> p<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> n<span class="token punctuation">,</span>tot <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> p<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">&lt;</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> p<span class="token punctuation">[</span><span class="token operator">++</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  p<span class="token punctuation">[</span><span class="token operator">++</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> p<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token function">sort</span><span class="token punctuation">(</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>p<span class="token operator">+</span>tot<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  n <span class="token operator">=</span> tot<span class="token punctuation">;</span>  tot <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> p<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> p<span class="token punctuation">[</span><span class="token operator">++</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">4096</span><span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> tot<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> m<span class="token punctuation">;</span> j <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">!=</span> tot<span class="token punctuation">)</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">^</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">||</span> dp<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token punctuation">{</span>          dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">||</span> dp<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">^</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>          <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"-1\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP2766 最长不下降子序列问题</title>
      <link href="/2019/01/23/luogup2766/"/>
      <url>/2019/01/23/luogup2766/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>«问题描述：</p><p>给定正整数序列x1,…,xn 。</p><p>（1）计算其最长不下降子序列的长度s。</p><p>（2）计算从给定的序列中最多可取出多少个长度为s的不下降子序列。</p><p>（3）如果允许在取出的序列中多次使用x1和xn，则从给定序列中最多可取出多少个长度为s的不下降子序列。</p><p>«编程任务：</p><p>设计有效算法完成（1）（2）（3）提出的计算任务。</p><p><strong>【输入格式】</strong></p><p>第1 行有1个正整数n，表示给定序列的长度。接下来的1 行有n个正整数n:x1, …, xn。</p><p><strong>【输出格式】</strong></p><p>第1 行是最长不下降子序列的长度s。第2行是可取出的长度为s 的不下降子序列个数。第3行是允许在取出的序列中多次使用x1和xn时可取出的长度为s 的不下降子序列个数。</p><p><strong>【输入样例】</strong></p><p>4<br>3 6 2 5</p><p><strong>【输出样例】</strong></p><p>2<br>2<br>3  </p><p><strong>【说明】</strong></p><p>n≤500</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P2766">luoguP2766</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>先用 dp 求得最长上升子序列&nbsp; 解决题（1）</p><p>然后每个数拆点，连一个流量为1 的边， 对于 a[i] &lt;= a[j] 且 i &lt; j,且 dp[i] + 1 = dp[j]&nbsp; 连一条 i - j+n 流量为 1 的边,</p><p>对于 dp[i] = 1,&nbsp; s —–INF–&gt;i&nbsp;&nbsp;&nbsp; 对于dp[i] = LIS&nbsp; i+n —-INF—&gt; t,&nbsp; ans = dinic(s,t); 解决题（2）</p><p>对于题（3）&nbsp; 将 1 和 n 拆点自边 的流量从1 改成 INF 就可以了， ans += dinic(s,t); 解决题(3)</p><p>注意特判一下 LIS = 1 的情况</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1500</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">1000000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">,</span>k<span class="token punctuation">;</span><span class="token keyword">int</span> l<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录层数</span><span class="token keyword">int</span> h<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//链式前向星</span><span class="token keyword">int</span> cur<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">struct</span> edge<span class="token punctuation">{</span>  <span class="token keyword">int</span> to<span class="token punctuation">;</span>  <span class="token keyword">int</span> c<span class="token punctuation">;</span>  <span class="token keyword">int</span> next<span class="token punctuation">;</span>  <span class="token function">edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">to</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">c</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">next</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>es<span class="token punctuation">[</span>maxm<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录边 注意是2倍</span><span class="token keyword">void</span> <span class="token function">add_edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>    es<span class="token punctuation">[</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>c<span class="token punctuation">,</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    h<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> tot<span class="token operator">++</span><span class="token punctuation">;</span>    es<span class="token punctuation">[</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>h<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    h<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> tot<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//cout &lt;&lt; u &lt;&lt;" " &lt;&lt;v &lt;&lt; " " &lt;&lt; c&lt;&lt;endl;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token function">memset</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   l<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>   queue <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span>   q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>    <span class="token keyword">int</span> u <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//cout  &lt;&lt; u &lt;&lt;endl;</span>    q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>u <span class="token operator">==</span> t<span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>        <span class="token punctuation">{</span>         <span class="token keyword">int</span> v <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">;</span>         <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>l<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span>l<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> l<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">,</span> <span class="token keyword">int</span> mf<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token keyword">return</span> mf<span class="token punctuation">;</span>    <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>i <span class="token operator">=</span> cur<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">&amp;&amp;</span> l<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">==</span> l<span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        <span class="token keyword">int</span> f <span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">,</span>mf <span class="token operator">-</span> ret<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">-</span><span class="token operator">=</span> f<span class="token punctuation">;</span>        es<span class="token punctuation">[</span>i<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">+</span><span class="token operator">=</span> f<span class="token punctuation">;</span>        ret <span class="token operator">+</span><span class="token operator">=</span> f<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>ret <span class="token operator">==</span> mf<span class="token punctuation">)</span> <span class="token keyword">return</span> ret<span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">dinic</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">bfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> t<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> cur<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>   ans <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">,</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>  <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">510</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> dp<span class="token punctuation">[</span><span class="token number">510</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">int</span> maxa <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       maxa <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>maxa<span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>   tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">int</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> t <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>   <span class="token function">add_edge</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">+</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">add_edge</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>n<span class="token operator">+</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">!=</span> n<span class="token punctuation">)</span> <span class="token function">add_edge</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>i<span class="token operator">+</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">add_edge</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>i<span class="token punctuation">,</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> maxa<span class="token punctuation">)</span> <span class="token function">add_edge</span><span class="token punctuation">(</span>i<span class="token operator">+</span>n<span class="token punctuation">,</span>t<span class="token punctuation">,</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">add_edge</span><span class="token punctuation">(</span>i<span class="token operator">+</span>n<span class="token punctuation">,</span>j<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"1\n1\n1\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>maxa <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n%d\n%d\n"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span>   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>maxa<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token function">dinic</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>   es<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">=</span> INF<span class="token punctuation">;</span>   es<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">=</span> INF<span class="token punctuation">;</span>   res <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">dinic</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Graph Theory </tag>
            
            <tag> Algorithm </tag>
            
            <tag> Network-flows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP3171 [CQOI2015]网络吞吐量</title>
      <link href="/2019/01/23/luogup3171/"/>
      <url>/2019/01/23/luogup3171/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>路由是指通过计算机网络把信息从源地址传输到目的地址的活动，也是计算机网络设计中的重点和难点。网络中实现路由转发的硬件设备称为路由器。为了使数据包最快的到达目的地，路由器需要选择最优的路径转发数据包。例如在常用的路由算法OSPF(开放式最短路径优先)中，路由器会使用经典的Dijkstra算法计算最短路径，然后尽量沿最短路径转发数据包。现在，若已知一个计算机网络中各路由器间的连接情况，以及各个路由器的最大吞吐量（即每秒能转发的数据包数量），假设所有数据包一定沿最短路径转发，试计算从路由器1到路由器n的网络的最大吞吐量。计算中忽略转发及传输的时间开销，不考虑链路的带宽限制，即认为数据包可以瞬间通过网络。路由器1到路由器n作为起点和终点，自身的吞吐量不用考虑，网络上也不存在将1和n直接相连的链路。。</p><p><strong>【输入格式】</strong></p><p>输入文件第一行包含两个空格分开的正整数n和m，分别表示路由器数量和链路的数量。网络中的路由器使用1到n编号。接下来m行，每行包含三个空格分开的正整数a、b和d，表示从路由器a到路由器b存在一条距离为d的双向链路。 接下来n行，每行包含一个正整数c，分别给出每一个路由器的吞吐量。</p><p><strong>【输出格式】</strong></p><p>输出一个整数，为题目所求吞吐量。</p><p><strong>【输入样例】</strong></p><p>7 10<br>1 2 2<br>1 5 2<br>2 4 1<br>2 3 3<br>3 7 1<br>4 5 4<br>4 3 1<br>4 6 1<br>5 6 2<br>6 7 1<br>1<br>100<br>20<br>50<br>20<br>60<br>1  </p><p><strong>【输出样例】</strong></p><p>70</p><p><strong>【说明】</strong></p><p>对于100%的数据，n&lt;=500，m&lt;=100000，d,c&lt;=10^9</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P3171">luoguP3171</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>题意：有一个路由网络, 每个路由器有一个吞吐量, 不同的路由器之间会有链路, 该链路带宽不限, 但是有一个距离, 该路由网络的传输数据严格按照算法OSPF(开放式最短路径优先)来规划数据传输，即使用经典的Dijkstra算法计算最短路径并沿最短路径转发数据包。然后求1到n的最大吞吐量。<br>解决办法：拆点建图，将路由器拆成两个点，i,i+n,然后构建一条流量为吞吐量的边(i –&gt; i+n); 在原路由网络双向跑最短路，然后根据d1[],d2[],d的关系来选择有效边, 即最短路上的边，将该边放入新网络，流量为INF。 然后跑dinic最大流即可。<br>注意：1,n,自己本身的吞吐量不受限制; 由于最短路不一定只有一条, 所以maxflow 可能会超过1e9, 所以要用long long !</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span><span class="token keyword">typedef</span> pair <span class="token operator">&lt;</span>LL<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> P<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">600</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>maxm<span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span>maxm<span class="token punctuation">]</span><span class="token punctuation">,</span>c<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>LL d1<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>d2<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">,</span>d<span class="token punctuation">[</span>maxm<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">struct</span> edge<span class="token punctuation">{</span>    <span class="token keyword">int</span> to<span class="token punctuation">,</span>cost<span class="token punctuation">;</span>    <span class="token function">edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">int</span> d <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">to</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cost</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>vector <span class="token operator">&lt;</span>edge<span class="token operator">></span> G<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">dijkstra</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> d1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1e18</span><span class="token punctuation">;</span>    d1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    priority_queue <span class="token operator">&lt;</span> P<span class="token punctuation">,</span>vector<span class="token operator">&lt;</span>P<span class="token operator">></span><span class="token punctuation">,</span>greater<span class="token operator">&lt;</span>P<span class="token operator">></span> <span class="token operator">></span>  Q<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//P.first 是距离，.P.second 是顶点</span>    Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">P</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>Q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        P x <span class="token operator">=</span> Q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        LL dist <span class="token operator">=</span> x<span class="token punctuation">.</span>first<span class="token punctuation">;</span>        <span class="token keyword">int</span> u <span class="token operator">=</span> x<span class="token punctuation">.</span>second<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>d1<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">&lt;</span> dist<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//排除u相同时, dist不同的情况。</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            edge e <span class="token operator">=</span> G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>d1<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">></span> d1<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                d1<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> d1<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">;</span>                Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">P</span><span class="token punctuation">(</span>d1<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>to<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> d2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1e18</span><span class="token punctuation">;</span>    d2<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">P</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>Q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        P x <span class="token operator">=</span> Q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        LL dist <span class="token operator">=</span> x<span class="token punctuation">.</span>first<span class="token punctuation">;</span>        <span class="token keyword">int</span> u <span class="token operator">=</span> x<span class="token punctuation">.</span>second<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>d2<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">&lt;</span> dist<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//排除u相同时, dist不同的情况。</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            edge e <span class="token operator">=</span> G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>d2<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">></span> d2<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                d2<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> d2<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">;</span>                Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">P</span><span class="token punctuation">(</span>d2<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>to<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>dist<span class="token punctuation">;</span>      <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span><span class="token operator">&amp;</span>dist<span class="token punctuation">)</span><span class="token punctuation">;</span>      a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">,</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">,</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dist<span class="token punctuation">;</span>      G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">edge</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>dist<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      G<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">edge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>dist<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> l<span class="token punctuation">[</span>maxn<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录层数</span><span class="token keyword">int</span> h<span class="token punctuation">[</span>maxn<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//链式前向星</span><span class="token keyword">int</span> cur<span class="token punctuation">[</span>maxn<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">struct</span> edge1<span class="token punctuation">{</span>  <span class="token keyword">int</span> to<span class="token punctuation">,</span>c<span class="token punctuation">,</span>next<span class="token punctuation">;</span>  <span class="token function">edge1</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">to</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">c</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">next</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>es<span class="token punctuation">[</span>maxm<span class="token operator">*</span><span class="token number">2</span><span class="token operator">+</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录边 注意是2倍</span><span class="token keyword">void</span> <span class="token function">add_edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">//cout &lt;&lt; u &lt;&lt; " " &lt;&lt; v &lt;&lt; " " &lt;&lt; c &lt;&lt; endl;</span>    es<span class="token punctuation">[</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge1</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>c<span class="token punctuation">,</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    h<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> tot<span class="token operator">++</span><span class="token punctuation">;</span>    es<span class="token punctuation">[</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge1</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>h<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    h<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> tot<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token function">memset</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   l<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>   queue <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span>   q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>    <span class="token keyword">int</span> u <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>u <span class="token operator">==</span> t<span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>        <span class="token punctuation">{</span>         <span class="token keyword">int</span> v <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">;</span>         <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>l<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span>l<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> l<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">,</span> <span class="token keyword">int</span> mf<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token keyword">return</span> mf<span class="token punctuation">;</span>    <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>i <span class="token operator">=</span> cur<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">&amp;&amp;</span> l<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">==</span> l<span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        <span class="token keyword">int</span> f <span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">,</span>mf <span class="token operator">-</span> ret<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">-</span><span class="token operator">=</span> f<span class="token punctuation">;</span>        es<span class="token punctuation">[</span>i<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">+</span><span class="token operator">=</span> f<span class="token punctuation">;</span>        ret <span class="token operator">+</span><span class="token operator">=</span> f<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>ret <span class="token operator">==</span> mf<span class="token punctuation">)</span> <span class="token keyword">return</span> ret<span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span>LL <span class="token function">dinic</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>  LL ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">bfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token operator">*</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> cur<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>   ans <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token number">1e9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>  <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">select_build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token function">add_edge</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>i<span class="token operator">+</span>n<span class="token punctuation">,</span>c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>d1<span class="token punctuation">[</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span>d2<span class="token punctuation">[</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span>d<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> d1<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token function">add_edge</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>n<span class="token punctuation">,</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>d2<span class="token punctuation">[</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span>d1<span class="token punctuation">[</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span>d<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> d1<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token function">add_edge</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>n<span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">dijkstra</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">select_build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%lld\n"</span><span class="token punctuation">,</span> <span class="token function">dinic</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Graph Theory </tag>
            
            <tag> Algorithm </tag>
            
            <tag> Network-flows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP2604 [ZJOI2010]网络扩容</title>
      <link href="/2019/01/22/luogup2604/"/>
      <url>/2019/01/22/luogup2604/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>给定一张有向图，每条边都有一个容量C和一个扩容费用W。这里扩容费用是指将容量扩大1所需的费用。  求：<br>1、 在不扩容的情况下，1到N的最大流；<br>2、 将1到N的最大流增加K所需的最小扩容费用。</p><p><strong>【输入格式】</strong></p><p>输出文件一行包含两个整数，分别表示问题1和问题2的答案。</p><p><strong>【输出格式】</strong></p><p>1个整数，表示具有该性质数的个数。</p><p><strong>【输入样例】</strong></p><p>5 8 2<br>1 2 5 8<br>2 5 9 9<br>5 1 6 2<br>5 1 1 8<br>1 2 8 7<br>2 5 4 9<br>1 2 1 1<br>1 4 2 1   </p><p><strong>【输出样例】</strong></p><p>13 19</p><p><strong>【说明】</strong></p><p>30%的数据中，N&lt;=100</p><p>100%的数据中，N&lt;=1000，M&lt;=5000，K&lt;=10</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P2604">luoguP2604</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>首先题意很明显，第一问是求最大流，直接用Dinic求最大流即可，不知道怎么求最大流请先学习如何求最大流，第二问是求最小花费下使最大流增长k，所以其本质是最小费用最大流，只需要建图时注意，将一条边分别拆成一条费用为0容量为c的边和一条费用为w容量为INF的边，然后再用EK&amp;Spfa跑最小费用最大流的增广时，如果当前flow + a[t] &gt;= k(需要增加的流) + maxflow(dinic所求)， 则不需要再增广，并且使cost加上相应的最后部分流增广的费用，然后返回退出即可。详见代码。</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">1e4</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">,</span>k<span class="token punctuation">;</span><span class="token keyword">int</span> l<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录层数</span><span class="token keyword">int</span> h<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//链式前向星</span><span class="token keyword">int</span> cur<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">struct</span> edge<span class="token punctuation">{</span>  <span class="token keyword">int</span> to<span class="token punctuation">;</span>  <span class="token keyword">int</span> c<span class="token punctuation">;</span>  <span class="token keyword">int</span> next<span class="token punctuation">;</span>  <span class="token function">edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">to</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">c</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">next</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>es<span class="token punctuation">[</span>maxm<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录边 注意是2倍</span><span class="token keyword">void</span> <span class="token function">add_edge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>    es<span class="token punctuation">[</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>c<span class="token punctuation">,</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    h<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> tot<span class="token operator">++</span><span class="token punctuation">;</span>    es<span class="token punctuation">[</span>tot<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">edge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>h<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    h<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> tot<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token function">memset</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   l<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>   queue <span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span>   q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>    <span class="token keyword">int</span> u <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>u <span class="token operator">==</span> t<span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>        <span class="token punctuation">{</span>         <span class="token keyword">int</span> v <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">;</span>         <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>l<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span>l<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> l<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">,</span> <span class="token keyword">int</span> mf<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token keyword">return</span> mf<span class="token punctuation">;</span>    <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>i <span class="token operator">=</span> cur<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">=</span> es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span>    <span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">&amp;&amp;</span> l<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">==</span> l<span class="token punctuation">[</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>        <span class="token keyword">int</span> f <span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">,</span>t<span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c<span class="token punctuation">,</span>mf <span class="token operator">-</span> ret<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        es<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">-</span><span class="token operator">=</span> f<span class="token punctuation">;</span>        es<span class="token punctuation">[</span>i<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>c <span class="token operator">+</span><span class="token operator">=</span> f<span class="token punctuation">;</span>        ret <span class="token operator">+</span><span class="token operator">=</span> f<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>ret <span class="token operator">==</span> mf<span class="token punctuation">)</span> <span class="token keyword">return</span> ret<span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">dinic</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">bfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> t<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> cur<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>   ans <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">,</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>  <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span><span class="token keyword">typedef</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> P<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//const LL mod = 1e9 + 7;</span><span class="token macro property">#<span class="token directive keyword">define</span> PI 3.1415926</span><span class="token macro property">#<span class="token directive keyword">define</span> sc(x)  scanf("%d",&amp;x)</span><span class="token macro property">#<span class="token directive keyword">define</span> pf(x)  printf("%d",x)</span><span class="token macro property">#<span class="token directive keyword">define</span> pfn(x) printf("%d\n",x)</span><span class="token macro property">#<span class="token directive keyword">define</span> pfln(x) printf("%lld\n",x)</span><span class="token macro property">#<span class="token directive keyword">define</span> pfs(x) printf("%d ",x)</span><span class="token macro property">#<span class="token directive keyword">define</span> rep(n) for(int i = 0; i &lt; n; i++)</span><span class="token macro property">#<span class="token directive keyword">define</span> per(n) for(int i = n-1; i >= 0; i--)</span><span class="token macro property">#<span class="token directive keyword">define</span> mem(a,x) memset(a,x,sizeof(a))</span><span class="token keyword">struct</span> edge1<span class="token punctuation">{</span>  <span class="token keyword">int</span> from<span class="token punctuation">,</span>to<span class="token punctuation">,</span>cap<span class="token punctuation">,</span>flow<span class="token punctuation">,</span>cost<span class="token punctuation">;</span>  <span class="token function">edge1</span><span class="token punctuation">(</span><span class="token keyword">int</span> from<span class="token punctuation">,</span><span class="token keyword">int</span> to<span class="token punctuation">,</span> <span class="token keyword">int</span> cap<span class="token punctuation">,</span> <span class="token keyword">int</span> flow<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">from</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">to</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cap</span><span class="token punctuation">(</span>cap<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">flow</span><span class="token punctuation">(</span>flow<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">cost</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> tot1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>vector<span class="token operator">&lt;</span>edge1<span class="token operator">></span> E<span class="token punctuation">;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> G<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> inq<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> d<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> p<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">addedge</span><span class="token punctuation">(</span><span class="token keyword">int</span> from<span class="token punctuation">,</span> <span class="token keyword">int</span> to<span class="token punctuation">,</span> <span class="token keyword">int</span> cap<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span><span class="token punctuation">{</span>  E<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">edge1</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span>to<span class="token punctuation">,</span>cap<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>cost<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  E<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">edge1</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span>from<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span>cost<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  tot1 <span class="token operator">=</span> E<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  G<span class="token punctuation">[</span>from<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>tot1<span class="token number">-2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  G<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>tot1<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">spfa</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>flow<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>cost<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">mem</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>INF<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">mem</span><span class="token punctuation">(</span>inq<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  d<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>inq<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> p<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> INF<span class="token punctuation">;</span>  queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> Q<span class="token punctuation">;</span>  Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>Q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">int</span> u <span class="token operator">=</span> Q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    inq<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>      edge1 e <span class="token operator">=</span> E<span class="token punctuation">[</span>G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>cap <span class="token operator">></span> e<span class="token punctuation">.</span>flow <span class="token operator">&amp;&amp;</span> d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">)</span>      <span class="token punctuation">{</span>        d<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>cost<span class="token punctuation">;</span>        p<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> G<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>cap <span class="token operator">-</span> e<span class="token punctuation">.</span>flow<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>inq<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>Q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span> inq<span class="token punctuation">[</span>e<span class="token punctuation">.</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">==</span> INF<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>flow <span class="token operator">+</span> a<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">>=</span> k<span class="token punctuation">)</span>  <span class="token punctuation">{</span>    cost <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>k<span class="token operator">-</span>flow<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  flow <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>  cost <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">*</span> a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> u <span class="token operator">=</span> t<span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>u <span class="token operator">!=</span> s<span class="token punctuation">)</span>  <span class="token punctuation">{</span>    E<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>flow <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>    E<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>flow <span class="token operator">-</span><span class="token operator">=</span> a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>    u <span class="token operator">=</span> E<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>from<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">mcf</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> flow <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>cost <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">spfa</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">,</span>flow<span class="token punctuation">,</span>cost<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>  <span class="token keyword">return</span> cost<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">,</span><span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>   tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>c<span class="token punctuation">;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>     <span class="token keyword">int</span> x<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u<span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span><span class="token operator">&amp;</span>c<span class="token punctuation">,</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">add_edge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">addedge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>c<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">addedge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>INF<span class="token punctuation">,</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token function">dinic</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>   k <span class="token operator">+</span><span class="token operator">=</span> ans<span class="token punctuation">;</span>   <span class="token keyword">int</span> s<span class="token punctuation">,</span>t<span class="token punctuation">;</span>   s <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> t <span class="token operator">=</span> n<span class="token punctuation">;</span>   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">" %d\n"</span><span class="token punctuation">,</span><span class="token function">mcf</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Graph Theory </tag>
            
            <tag> Algorithm </tag>
            
            <tag> Network-flows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>luoguP1028 数的计算</title>
      <link href="/2018/12/17/luogup1028/"/>
      <url>/2018/12/17/luogup1028/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>我们要求找出具有下列性质数的个数(包含输入的自然数 n ):</p><p>先输入一个自然数 n (n ≤ 1000),然后对此自然数按照如下方法进行处理:</p><pre><code>1.不作任何处理;2.在它的左边加上一个自然数,但该自然数不能超过原数的一半;3.加上数后,继续按此规则进行处理,直到不能再加自然数为止.</code></pre><p><strong>【输入格式】</strong></p><p>1个自然数 n (n ≤ 1000)</p><p><strong>【输出格式】</strong></p><p>1个整数，表示具有该性质数的个数。</p><p><strong>【输入样例】</strong></p><p>6</p><p><strong>【输出样例】</strong></p><p>6</p><p><strong>【说明】</strong></p><p>满足条件的数为</p><p>6，16，26，126，36，136</p><p><strong>【测试网站】</strong></p><p><a href="https://www.luogu.org/problemnew/show/P1028">luoguP1028</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>题目给出一个n, 然后根据题目给的操作我们可以得到一些数，题目求总共得到的数的个数。所以我们可以递归的求出所有得到的数。为了不重复进行递归操作，我们用num[i] 数组来记录从 i 递归下去可以得到的数的个数，包括它本身。num数组开始时全部初始化为-1，num[i] ==  -1 表示 i 还未被递归求过。num[i] != -1 则说明 i 已经被递归过了，则不需要递归，直接返回num[i] 即可。</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstring></span> </span><span class="token comment" spellcheck="true">// memset函数的头文件</span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">int</span> num<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//num[x] != -1 则说明 x 已经被递归过了，则不需要递归，直接返回num[x] 即可。</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> num<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//num[x] ==  -1 表示 x 还未被递归求过</span>  num<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//代表自己的 1</span>  <span class="token comment" spellcheck="true">// 搜索小于等于自己一半的数，统计通过这些数可以得到的数的个数</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> x<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  num<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> num<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//统计完所有的把num[x]返回到上一层</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> n<span class="token punctuation">,</span>ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token function">memset</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// memset函数 ： 将num数组中的所有元素赋值为-1</span>  cin <span class="token operator">>></span> n<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 输入n</span>  <span class="token function">dfs</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//递归计算从n出发能得到的数的总数</span>  cout <span class="token operator">&lt;&lt;</span> num<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Recursion </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU2955 01 背包 Robberies</title>
      <link href="/2018/12/17/hdu2955/"/>
      <url>/2018/12/17/hdu2955/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>Roy想要抢劫银行，每家银行都有一定的金额和被抓到的概率，知道Roy被抓的最大概率P，求Roy在不被抓的情况下，最多抢劫多少钱。</p><p><strong>【输入格式】</strong></p><p>第一行输入给出T，即案例数。<br>对于每个场景，第一行输入给出浮点数P，Roy需要低于的概率，以及整数N，即他计划的银行数。<br>然后接下来N行，其中第j行给出整数Mj和浮点数Pj . 表示 Bank j包含Mj百万，并且被抓住它的概率是Pj。</p><p><strong>【输出格式】</strong></p><p>对于每个测试用例，输出一个他可以获得的最大数百万行，而被捕获的概率小于限制集.<br>0 &lt;T &lt;= 1000.0 &lt;= P &lt;= 1.00 &lt;N &lt;= 1000 &lt;Mj &lt;= 1000.0 &lt;= Pj &lt;= 1.0<br>银行如果被抢劫就会破产，你可以认为所有概率都是独立的。</p><p><strong>【输入样例】</strong></p><p>3<br>0.04 3<br>1 0.02<br>2 0.03<br>3 0.05<br>0.06 3<br>2 0.03<br>2 0.03<br>3 0.05<br>0.10 3<br>1 0.03<br>2 0.02<br>3 0.05</p><p><strong>【输出样例】</strong></p><p>2<br>4<br>6</p><p><strong>【测试网站】</strong></p><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2955">HDU2955</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>到达性dp问题。<br>状态转移方程为 <b> dp[j] = max(dp[j],dp[j-v[i]] * (1-p[i])); </b> dp[i] 表示能抢到i个百万不被抓到的最大概率。<br>套用01背包模板，把银行里的总钱数当作总容量，概率当作价值 ，最后再根据概率判断其能不能到达该钱数。<br><b>被抓到的最小概率 = 1-不被抓到的最大概率</b></p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">110</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> T<span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>k<span class="token punctuation">;</span><span class="token keyword">double</span> P<span class="token punctuation">;</span><span class="token keyword">double</span> p<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> v<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">double</span> dp<span class="token punctuation">[</span><span class="token number">10005</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//dp数组，dp[i] 代表能抢到i个百万不被抓到的最大概率</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">int</span> T<span class="token punctuation">;</span>   <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">while</span><span class="token punctuation">(</span>T<span class="token operator">--</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%lf%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>P<span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%lf"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sum <span class="token operator">+</span><span class="token operator">=</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//统计总钱数</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> sum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//初始化dp 数组</span>    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//抢到0个百万的概率总是为1</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> sum<span class="token punctuation">;</span> j<span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>         dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//状态转移</span>    <span class="token keyword">int</span> ans<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> sum<span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> P<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">//被抓到的最小概率 = 1-不被抓到的最大概率</span>              <span class="token punctuation">{</span>ans <span class="token operator">=</span> i<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU3466 Proud Merchants</title>
      <link href="/2018/12/17/hdu3466/"/>
      <url>/2018/12/17/hdu3466/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>现在n个物品，每组物品有三个属性，pi，买这种物品你需要花费的钱，vi,该物品的价值。qi,如果你想要买这种物品你所拥有的钱必须大于qi。<br>问你能用你所有的钱最多能获得多大价值。<br>(每个物品只能买一次）</p><p><strong>【输入格式】</strong></p><p>有多组测试数据。<br>对于每组测试数据开始时有两个书N,M (1 ≤ N ≤ 500, 1 ≤ M ≤ 5000);分别表示物品的编号和你所拥有的钱数。<br>然后是N行，每行包含三个数字Pi，Qi和Vi（1≤Pi≤Qi≤100,1≤Vi≤1000），它们的含义在描述中。<br>输入终止于文件结束标记。</p><p><strong>【输出格式】</strong></p><p>对于每个测试用例，输出一个整数，表示你可以得到的物品的价值总和的最大值。</p><p><strong>【输入样例】</strong></p><p>2 10<br><br>10 15 10<br><br>5 10 5<br><br>3 10<br><br>5 10 5<br><br>3 5 6<br><br>2 7 3</p><p><strong>【输出样例】</strong></p><p>2<br><br>4<br><br>6</p><p><strong>【测试网站】</strong></p><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3466">HDU3466</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>因为每个物品都有一个限制q，而01背包dp是从前i个物品转移到前i+1个物品，所以必须保证转移时无后效性，即前面i个物品选择的结果不会影响到后面的选择.<br>在这里体现在前i个物品中会影响的范围为q-p;如果第i+1个物品的q-p &gt; 前i个物品的q-p,则可以保证如果选择第i个物品，那么前面i+1个物品的q的限制条件都能满足。 即 qi+1 在的位置&gt;qi</p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">510</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">int</span> dp<span class="token punctuation">[</span><span class="token number">5005</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">struct</span> Node<span class="token punctuation">{</span>  <span class="token keyword">int</span> p<span class="token punctuation">,</span>q<span class="token punctuation">,</span>v<span class="token punctuation">;</span><span class="token punctuation">}</span>a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> <span class="token function">cmp</span> <span class="token punctuation">(</span>Node a<span class="token punctuation">,</span> Node b<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> a<span class="token punctuation">.</span>q <span class="token operator">-</span> a<span class="token punctuation">.</span>p <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>q <span class="token operator">-</span> b<span class="token punctuation">.</span>p<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">~</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>p<span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>q<span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>a<span class="token operator">+</span>n<span class="token punctuation">,</span>cmp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//排序</span>    <span class="token function">memset</span><span class="token punctuation">(</span>dp<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//初始化dp数组</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> m<span class="token punctuation">;</span> j <span class="token operator">>=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>q<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token operator">-</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>p<span class="token punctuation">]</span> <span class="token operator">+</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//无后效性dp</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU5890 Eighty seven</title>
      <link href="/2018/12/17/hdu5890/"/>
      <url>/2018/12/17/hdu5890/</url>
      
        <content type="html"><![CDATA[<h2 id="一、题目内容"><a href="#一、题目内容" class="headerlink" title="一、题目内容"></a>一、题目内容</h2><p><strong>【题目描述】</strong></p><p>Fib先生是一所小学的数学老师。<br>在下一课中，他计划教孩子们如何加数字。<br>在课前，他将准备N张数字牌。第i张牌上的号码是ai。<br>在课堂上，每回合，他将删除不超过3张卡片，然后让学生选择任意十张卡片，其中数字的总和为87.<br>每次转动后，被删除的卡片将被放回原位。现在，他想知道每回合是否至少有一个解决方案。你能帮助他吗？</p><p><strong>【输入格式】</strong></p><p>第一行输入包含整数t（t≤5），即测试用例的数量。<br>对于每个测试用例，第一行包含整数N（N≤50）。<br>第二行包含N个非负整数a1，a2，…，aN。<br>第i个数字代表第i个卡上的数字。<br>第三行包括整数Q（Q≤100000）。<br>下一个Q行的每一行包含三个整数i，j，k，表示Mr.Fib将在本回合中删除第i，第j和第k个卡。当i = j，i = k或j = k时，问题可能会退化。</p><p><strong>【输出格式】</strong></p><p>对于每种情况的每一轮，如果存在至少一个解，则输出“是”，否则输出“否”。</p><p><strong>【输入样例】</strong></p><p>1<br>12<br>1 2 3 4 5 6 7 8 9 42 21 22<br>10<br>1 2 3<br>3 4 5<br>2 3 2<br>10 10 10<br>10 11 11<br>10 1 1<br>1 2 10<br>1 11 12<br>1 10 10<br>11 11 12</p><p><strong>【输出样例】</strong><br>No<br>No<br>No<br>Yes<br>No<br>Yes<br>No<br>No<br>Yes<br>Yes</p><p><strong>【测试网站】</strong></p><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5890">HDU5890</a></p><h2 id="二、题目分析"><a href="#二、题目分析" class="headerlink" title="二、题目分析"></a>二、题目分析</h2><p>题目大意是 给出n个数和q次询问，每次删除1到3个数，问使否能从剩下的数中选10个数和为87</p><p>因为N只有50所以可以先预处理所有情况</p><p>然后用bitset &lt;90&gt; dp[11] 进行二维背包dp  dp[i][j] 为1 代表在取i个数时能加和到 j ；</p><p><a href="https://blog.csdn.net/snowy_smile/article/details/79120063">bitset 用法</a></p><h2 id="三、代码示例"><a href="#三、代码示例" class="headerlink" title="三、代码示例"></a>三、代码示例</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;algorithm></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;queue></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstring></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;map></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;bitset></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">508</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> maxm <span class="token operator">=</span> <span class="token number">10000</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">typedef</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> P<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> LL<span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>Q<span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>maxn<span class="token punctuation">]</span><span class="token punctuation">;</span>bitset<span class="token operator">&lt;</span><span class="token number">90</span><span class="token operator">></span> dp<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// dp[i][j] 为1 代表在取i个数时能加和到 j</span><span class="token keyword">bool</span> ans<span class="token punctuation">[</span><span class="token number">55</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">55</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">55</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ans[i][j][k]表示然后i,j,k后是否能组成87</span><span class="token keyword">bool</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> z<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">11</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">!=</span> x <span class="token operator">&amp;&amp;</span> i <span class="token operator">!=</span> y <span class="token operator">&amp;&amp;</span> i <span class="token operator">!=</span> z<span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>    dp<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">|</span><span class="token operator">=</span> <span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//二维dp + bitset优化</span>   <span class="token punctuation">}</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">87</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">int</span> T<span class="token punctuation">;</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>T<span class="token operator">--</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//预处理</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> j<span class="token punctuation">;</span> k <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    ans<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> ans<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    ans<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> ans<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>Q<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>Q<span class="token operator">--</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token keyword">int</span> i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>k<span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>i<span class="token punctuation">,</span><span class="token operator">&amp;</span>j<span class="token punctuation">,</span><span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Yes\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"No\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Algorithm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DP </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
